{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"posts/12%20Years%2C%201780%20Kilometers%2C%206%20Hours/","title":"12 Years, 1780 Kilometers, 6 Hours","text":"<p>+++ title = \"12\u5e74\uff0c1780\u516c\u91cc\uff0c6\u5c0f\u65f6\" date = 2013-08-03</p> <p>categories = [\"Life\"] tags = [\"Essay\"] +++</p> <p>12\u5e74\u524d\uff0c\u9752\u6da9\u7684\u4ed6\u6000\u63e3\u7740\u61f5\u61c2\u7684\u68a6\u60f3\u8e0f\u4e0a\u4e86\u8fd9\u4e2a\u88ab\u4eba\u6d25\u6d25\u4e50\u9053\u7684\u57ce\u5e02\u7684\u571f\u5730\u3002</p> <p>\u53e4\u8272\u53e4\u9999\u7684\u5357\u9523\u9f13\u5df7\u548c\u94a2\u7b4b\u94c1\u9aa8\u7684\u56fd\u8d38\u4e2d\u5fc3\u3001\u6c14\u52bf\u78c5\u7934\u7684\u4e07\u91cc\u957f\u57ce\u548c\u5b81\u9759\u5982\u74a7\u7684\u4e92\u57ce\u5c0f\u6cb3\u4f53\u73b0\u51fa\u5b83\u4e0e\u751f\u4ff1\u6765\u7684\u6df7\u4e71\u3002\u5bc6\u5bc6\u9ebb\u9ebb\u7684\u4eba\u7fa4\uff0c\u62e5\u5835\u4e0d\u582a\u7684\u8f66\u6d41\uff0c\u5fd9\u5fd9\u788c\u788c\u7684\u4eba\u4eec\uff0c\u5306\u5306\u5fd9\u5fd9\u7684\u811a\u6b65\u5374\u53c8\u53cd\u6620\u51fa\u90a3\u4e0e\u6df7\u4e71\u6297\u8861\u7684\u79e9\u5e8f\u3002\u4eba\u4eec\u5728\u8fd9\u513f\u5b9e\u73b0\u68a6\u60f3\u3001\u4f53\u5473\u7e41\u534e\u3001\u5206\u4eab\u559c\u60a6\uff0c\u4e5f\u5728\u8fd9\u513f\u589e\u957f\u6b32\u671b\u3001\u4ea7\u751f\u9893\u5e9f\u3001\u65e0\u5c3d\u6323\u624e\u3002</p> <p>12\u5e74\u7684\u7ecf\u5386\uff0c\u8ba9\u4ed6\u98de\u5feb\u7684\u6210\u957f\u3002</p> <p>12\u5e74\u7684\u5c81\u6708\uff0c\u8ba9\u4ed6\u6536\u83b7\u9887\u591a\u3002</p> <p>12\u5e74\u7684\u4eba\u751f\uff0c\u6709\u559c\u60a6\uff0c\u6709\u60b2\u4f24\uff0c\u6709\u6b22\u4e50\uff0c\u6709\u5fe7\u6101\u3002</p> <p>12\u5e74\u7684\u751f\u6d3b\uff0c\u65e2\u611f\u8c22\uff0c\u4e5f\u62b1\u6028\uff0c\u65e2\u63a5\u53d7\uff0c\u4e5f\u65e0\u5948\u3002</p> <p>12\u5e74\u7684\u65e5\u5b50\uff0c\u5145\u5b9e\u5374\u53c8\u5e73\u6de1\u3002</p> <p>\u4e00\u8def\u8d70\u6765\uff0c\u8ba9\u4ed6\u6df1\u6df1\u4f53\u4f1a\u5230\u5728\u8fd9\u4e2a\u4ec0\u4e48\u90fd\u6709\uff0c\u4ec0\u4e48\u90fd\u4e0d\u7f3a\u5c11\u7684\u57ce\u5e02\u91cc\u5374\u552f\u72ec\u6ca1\u6709\u5c3d\u5934\u3002\u5728\u8fd9\u91cc\uff0c\u53ea\u6709\u90a3\u4e01\u70b9\u5b58\u5728\u611f\uff0c\u5374\u6ca1\u6709\u4e00\u4e1d\u5f52\u5c5e\u611f\u3002</p> <p>\u80cc\u8d77\u884c\u56ca\uff0c\u62fe\u62d5\u5fc3\u60c5\uff0c6\u5c0f\u65f6\uff0c1780\u516c\u91cc\uff0c\u4ece\u65b0\u51fa\u53d1\u3002</p>"},{"location":"posts/CSRF/","title":"CSRF","text":"<p>+++ title = \"\u8c08 CSRF\" date = 2012-12-10</p> <p>categories = [\"Tech\"] tags = [\"CSRF\"] +++</p>"},{"location":"posts/CSRF/#csrf","title":"csrf\u662f\u4ec0\u4e48","text":"<p>csrf \u7b80\u5355\u7684\u8bf4\u5c31\u662f\u4ee5\u8de8\u57df\u7684\u65b9\u5f0f\uff0c\u5229\u7528\u4f60\u6b63\u5e38\u7684cookie\uff0c\u4fee\u6539\u4f60\u5728website\u4e0a\u7684\u6570\u636e\u3002\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff1a 1. \u5f53\u4f60\u6b63\u5e38\u767b\u9646www.xxx.com\u3002xxx.com\u4f1a\u8bb0\u5f55\u4e00\u4e2acookie\u5230\u4f60\u7684client\u7aef\u3002\u8868\u793a\uff0c\u4f60\u73b0\u5728\u5df2\u7ecf\u6b63\u5e38\u767b\u9646\u8fc7\u4e86\u3002 2. \u7136\u540e\u4f60\u8bbf\u95ee\u4e00\u4e2a\u6076\u610f\u7f51\u7ad9\uff0cwww.evil.com, evil.com\u6709\u4e00\u4e2a\u94fe\u63a5\uff0c\u4f1a\u63d0\u4ea4\u4e00\u4e2apost\u8bf7\u6c42\u5230xxx.com\uff0c\u4fee\u6539\u4f60\u5728xxx.com\u4e0a\u7684\u5bc6\u7801</p>"},{"location":"posts/CSRF/#csrf_1","title":"\u5982\u679c\u9632\u6b62csrf\u653b\u51fb","text":"<ol> <li>\u9a8c\u8bc1HTTP Referer</li> </ol> <p>\u5229\u7528HTTP Referer\u5b57\u6bb5\uff0c\u5e76\u4e14\u8fdb\u884c\u9a8c\u8bc1\uff0c\u8fd9\u6837\u53ea\u5141\u8bb8xxx.com\u7684referer\u8fdb\u884c\u4fee\u6539\u5bc6\u7801\u4fee\u6539\u64cd\u4f5c\u3002\u867d\u7136\u7b80\u5355\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e9b\u4f4e\u7248\u672c\u7684Browser\uff0c\u4f8b\u5982\uff1aIE6\u3002 HTTP Referer\u53ef\u4ee5\u8fdb\u884c\u4f2a\u9020\u3002\u6240\u4ee5\u4e0d\u5b89\u5168\u3002</p> <ol> <li> <p>\u9a8c\u8bc1token</p> </li> <li> <p>\u8981\u6c42\u63d0\u4ea4\u4e0a\u6765\u7684\u8bf7\u6c42\u643a\u5e26\u4e00\u4e2a\u52a0\u5bc6\u7684token\uff0c\u5229\u7528\u8fd9\u4e2atoken\u8fdb\u884c\u670d\u52a1\u5668\u7aef\u7684\u6821\u9a8c\u3002\u4ece\u800c\u9632\u6b62csrf\u653b\u51fb\u3002\u6bd4\u8f83\u5b89\u5168\uff0c\u4f46\u662f\u9700\u8981\u53d8\u52a8\u4e00\u5b9a\u7684\u4ee3\u7801\u3002</p> </li> <li> <p>\u5728HTTP\u7684HEADER\u91cc\u9762\u52a0\u5165\u4e00\u4e2a\u6821\u9a8c\u7684token\u3002\u4f46\u662f\u7531\u4e8e\u5728HEADER\u4e2d\uff0c\u6240\u4ee5\u5f97\u91c7\u7528AJAX\u3002\u4e5f\u6bd4\u8f83\u5b89\u5168\uff0c\u4f46\u662f\u4ee3\u7801\u53d8\u5316\u975e\u5e38\u5927</p> </li> </ol>"},{"location":"posts/CSRF/#_1","title":"\u7ed3\u8bba","text":"<p>\u7efc\u4e0a\u8003\u8651\uff0c\u6b63\u5e38\u91c7\u7528\u7b2c2\u4e2d\u65b9\u5f0f\u6700\u9760\u8c31\u3002\u4e0d\u8fc7\uff0c\u6ce8\u610f\u540e\u7aef\u90fd\u9700\u8981\u5199\u4e00\u4e2afilter\uff0c\u7528\u6765\u6821\u9a8c\u8fd9\u4e2atoken</p>"},{"location":"posts/Idealism%20and%20Realism/","title":"Idealism and Realism","text":"<p>+++ title = \"\u4e24\u79cd\u4e3b\u4e49\" date = 2020-09-11</p> <p>categories = [\"Life\"] tags = [\"Essay\"] +++</p> <p>\u6211\u4ee5\u4e3a\uff0c\u8fd9\u4e16\u754c\u4e0a\u5927\u4f53\u5b58\u5728\u4e24\u79cd\u6807\u51c6\uff1a\u4e00\u79cd\u662f\u7406\u60f3\u4e3b\u4e49\u8005\u7684\u6807\u51c6\uff0c\u4e00\u79cd\u662f\u73b0\u5b9e\u4e3b\u4e49\u8005\u7684\u6807\u51c6\u3002</p> <p>\u5982\u679c\u4f60\u662f\u4e2a\u7406\u60f3\u4e3b\u4e49\u8005\uff0c\u76f8\u4fe1\u5b58\u5728\u4e00\u79cd\u8d85\u8d8a\u6027\u7684\u3001\u7edd\u5bf9\u7684\u4eba\u6743\u6807\u51c6\uff0c\u4e00\u4e2a\u6709\u826f\u77e5\u7684\u4eba\u5c31\u5e94\u8be5\u65f6\u523b\u4e3a\u4e86\u4fdd\u969c\u5168\u4eba\u7c7b\u7684\u4eba\u6743\u4e8b\u4e1a\u800c\u594b\u6597\u3002\u5e76\u4e14\u4f60\u80fd\u59cb\u7ec8\u575a\u6301\u81ea\u5df1\u7684\u7acb\u573a\u548c\u6807\u51c6\uff0c\u4e0d\u754f\u5f3a\u6743\u4e0e\u8d44\u672c\u7684\u9ad8\u538b\uff0c\u65e0\u8bba\u5bf9\u897f\u65b9\u548c\u975e\u897f\u65b9\u56fd\u5bb6\u90fd\u4e00\u89c6\u540c\u4ec1\u3002\u90a3\u4e48\uff0c\u6211\u656c\u4f60\u662f\u4e00\u4f4d\u6709\u826f\u77e5\u7684\u4eba\u6743\u6597\u58eb\u3002</p> <p>\u5982\u679c\u4f60\u662f\u4e00\u4e2a\u73b0\u5b9e\u4e3b\u4e49\u8005\uff0c\u77e5\u9053\u51e1\u4e8b\u90fd\u662f\u8981\u5b9e\u4e8b\u6c42\u662f\uff0c\u6ca1\u6709\u4ec0\u4e48\u653e\u4e4b\u56db\u6d77\u800c\u7686\u51c6\u7684\u6807\u51c6\uff0c\u4e00\u5207\u653f\u7b56\u90fd\u8981\u4ece\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u51fa\u53d1\u3002\u5e76\u4e14\u4f60\u8ba4\u4e3a\u5404\u56fd\u6709\u5404\u56fd\u7684\u60c5\u51b5\uff0c\u6bcf\u4e2a\u56fd\u5bb6\u90fd\u6709\u9002\u5408\u81ea\u5df1\u7684\u5236\u5ea6\uff0c\u4e0e\u5176\u8ffd\u6c42\u62bd\u8c61\u7684\u4ef7\u503c\uff0c\u4e0d\u5982\u591a\u53bb\u60f3\u529e\u6cd5\u53bb\u89e3\u51b3\u4eba\u6c11\u5b9e\u9645\u7684\u9700\u6c42\u3002\u90a3\u4e48\uff0c\u6211\u4e5f\u5c0a\u656c\u4f60\u3002</p> <p>\u6211\u6240\u7406\u89e3\u7684\u6240\u8c13\u7684\u897f\u65b9\u5f0f\u7684\u201c\u53cc\u91cd\u6807\u51c6\u201d\uff0c\u5c31\u662f\u4ee5\u7406\u60f3\u4e3b\u4e49\u8981\u6c42\u522b\u4eba\uff0c\u4ee5\u73b0\u5b9e\u4e3b\u4e49\u8981\u6c42\u81ea\u5df1\u3002</p> <p>\u8fd9\u6837\u7684\u53cc\u91cd\u6807\u51c6\u5176\u5b9e\u4e0d\u96be\u7406\u89e3\uff0c\u5c31\u662f\u865a\u4f2a\u548c\u65e0\u803b\u3002</p>"},{"location":"posts/Python%20Socket%20Programming/","title":"Python Socket Programming","text":"<p>+++ title = \"Python Socket Programming\" date = 2010-06-13</p> <p>categories = [\"Tech\"] tags = [\"Python\", \"Socket\"] +++</p>"},{"location":"posts/Python%20Socket%20Programming/#synchronization","title":"synchronization","text":""},{"location":"posts/Python%20Socket%20Programming/#tcp","title":"TCP","text":"<p>server:</p> <pre><code>server = socket(AF_INET, SOCK_STREAM)\nserver.bind((ip, port))\nserver.listen(5)\nnew_sock, address = server.accept()\nnew_sock.send(...)\nnew_sock.recv(...)\nnew_sock.close()\n</code></pre> <p>client:</p> <pre><code>client = socket(AF_INET, SOCK_STREAM)\nclient.connect(ip, port)\nclient.send(...)\nclient.recv(...)\nclient.close()\n</code></pre>"},{"location":"posts/Python%20Socket%20Programming/#udp","title":"UDP","text":"<p>server:</p> <pre><code>server = socket(AF_INET, SOCK_DGRAM)\nserver.bind((ip, port))\ndata, address = server.recvfrom(...)\nserver.sendto(data, address)\n</code></pre> <p>client:</p> <pre><code>client = socket(AF_INET, SOCK_DGRAM)\nclient.recvfrom()\nclient.sendto(data, address)\n</code></pre>"},{"location":"posts/Python%20Socket%20Programming/#asynchronization","title":"asynchronization","text":"<p>server:</p> <pre><code>class Server(asyncore.dispatcher):\n\n    def __init__(self, host, port):\n        asyncore.dispatcher.__init__(self)\n        self.create_socket(AF_INET, SOCK_STREAM)\n        self.set_reuse_addr()\n        self.bind((host, port))\n        self.listen(5)\n\n        def handle_accept(self):\n            pair = self.accept()\n            if pair is not None:\n                sock, address = pair[0], pair[1]\n                server_handler(sock, address)\n\nclass ServerHandler(asyncore.dispatcher):\n\n    def __init__(self, sock, address):\n        asyncore.dispatcher.__init__(sock)\n\n    def handle_write(self):\n        pass\n\n    def handle_read(self):\n        pass\n\n    def readable(self):\n        pass\n\n    def writable(self):\n        pass\n\n    def handle_close(self):\n        pass\n</code></pre> <p>client\uff1a</p> <pre><code>class Client(asyncore.dispatcher):\n\n    def __init__(self, host, port):\n        asyncore.dispatcher.__init__(self)\n        self.connect((host, port))\n\n    def handle_write(self):\n        pass\n\n    def handle_read(self):\n        pass\n\n    def readable(self):\n        pass\n\n    def writable(self):\n        pass\n\n    def handle_close(self):\n        pass\n</code></pre>"},{"location":"posts/QCon%20Beijing%202013/","title":"QCon Beijing 2013","text":"<p>+++ title = \"2013\u5e74\u7684\u5317\u4eacQCon\" date = \"2013-01-25\"</p> <p>categories = [\"Tech\"] tags = [\"QCon\"] +++</p>"},{"location":"posts/QCon%20Beijing%202013/#_1","title":"\u5f15\u5b50","text":"<p>\u63a5\u5230\u4e86QCon BeiJing\u7684\u9080\u8bf7\uff0c\u5f88\u8363\u5e78\uff0c\u4e5f\u5f88\u6709\u538b\u529b\uff0c\u4e0d\u77e5\u9053\u80fd\u4e0d\u80fd\u8bb2\u597d\u3002\u5c3d\u529b\u5427\u3002</p>"},{"location":"posts/QCon%20Beijing%202013/#_2","title":"\u4e00\u5468\u51c6\u5907","text":"<p>\u5728\u786e\u5b9a\u4e86 Topic \u7684\u4e3b\u9898\u540e\uff0c\u5f00\u59cb\u4e86\u4e3a\u671f\u4e00\u5468\u7684\u51c6\u5907\u65f6\u95f4\u3002\u8fd9\u662f\u5fd9\u788c\u7684\u4e00\u5468\uff0c\u672c\u4ee5\u4e3a\u51c6\u5907PPT\u4f1a\u5f88\u7b80\u5355\u7684\uff0c\u4f46\u5199\u7684\u65f6\u5019\uff0c\u624d\u53d1\u73b0\u5f88\u591a\u4e1c\u897f\u90fd\u9700\u8981\u5b8c\u5584\u548c\u51c6\u5907\uff0c\u786e\u5b9e\u4e0d\u7b80\u5355\u3002\u4f46\u65e2\u7136\u53c2\u52a0 QCon \u7684\u8bb2\u6f14\uff0c\u65e2\u7136\u53bb\u5206\u4eab\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u8981\u505a\u597d\u5b83\uff0c\u4e00\u5b9a\u8981\u8bb2\u597d\u5b83\u3002\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c\u65ad\u65ad\u7eed\u7eed\uff0c\u78e8\u78e8\u8e6d\u8e6d\uff0c\u603b\u7b97\u662f\u5199\u5b8c\u4e86\u3002</p>"},{"location":"posts/QCon%20Beijing%202013/#_3","title":"\u6280\u5de7","text":"<p>\u53c2\u52a0\u4e86qcon\u7684\u8bb2\u5e08\u57f9\u8bad\uff0c\u6536\u83b7\u9887\u591a\u3002</p> <p>\u6f14\u8bb2\u548c\u9605\u8bfb</p> <p>\u6f14\u8bb2\u4e0d\u662f\u9605\u8bfb\uff0c\u4e0d\u8981\u5728\u6f14\u8bb2\u4e2d\u53bb\u9605\u8bfb\u90a3\u4e9b\u672c\u6765\u5e94\u8be5\u7531\u8d44\u6599\u4f20\u8fbe\u7684\u4fe1\u606f\u3002\u6f14\u8bb2\u5e94\u8be5\u627f\u62c5\u4e66\u9762\u8d44\u6599\u89e3\u51b3\u4e0d\u597d\u7684\u95ee\u9898\u3002\u300e\u6f14\u8bb2\u9648\u8ff0\u300f\u4e0e\u300e\u8d44\u6599\u9605\u8bfb\u300f\u6709\u7740\u4e0d\u540c\u7684\u7279\u70b9\u3002\u5426\u5219\uff0c\u76f4\u63a5\u628a\u8bb2\u6f14\u7684\u8d44\u6599\u6253\u5370\u597d\u53d1\u7ed9\u542c\u8bb2\u8005\u56de\u53bb\u9605\u8bfb\u597d\u4e86\u3002</p> <p>\u51c6\u5907\u5185\u5bb9 - \u5148\u51c6\u5907\u5185\u5bb9\uff0c\u540e\u8fdb\u884c\u6392\u7248\uff08\u5de6\u53f3\u8111\u4e0d\u540c\uff0c\u6df7\u6742\u8fdb\u884c\u773c\u4e2d\u964d\u4f4e\u6548\u7387\uff09 - \u7528\u624b\u7ed8\u601d\u7ef4\u5bfc\u56fe\u8fdb\u884c\u5185\u5bb9\u6574\u7406\uff08\u624b\u7ed8\u7684\u5370\u8c61\u4f1a\u6bd4\u7528\u8f6f\u4ef6\u5f3a\u5f88\u591a\u500d\uff09 - \u4ea7\u54c1\u7684FAB\uff08Feature, Advantage, Benefit\uff09\uff0c\u805a\u7126\u5bf9\u542c\u4f17\u7684Benifit\u3002 - \u5185\u5bb9\u8403\u53d6\u6f0f\u6597\uff0c\u5316\u7e41\u4e3a\u7b80, \u4fe1\u606f\u7531\u6df7\u4e71\u590d\u6742\u53d8\u4e3a\u7b80\u6d01\u6709\u529b\u7684\u8fc7\u7a0b\u3002\uff08\u901a\u8fc7ticker note\u80fd\u591f\u505a\u5230\u8fd9\u4e9b\uff09 - \u4f20\u9012\u4fe1\u5fc3\u6bd4\u4f20\u9012\u4fe1\u606f\u66f4\u91cd\u8981\uff08\u4e8c\u8005\u4f1a\u8868\u73b0\u51fa\u622a\u7136\u4e0d\u540c\u7684\u601d\u8def\u548c\u505a\u6cd5\u3002\u4e0d\u8981\u8bd5\u56fe\u628a\u81ea\u5df1\u5728\u6f14\u8bb2\u9886\u57df\u4e2d\u77e5\u9053\u7684\u4e1c\u897f\u5168\u76d8\u6258\u51fa\uff0c\u4ee5\u663e\u5e72\u8d27\u5341\u8db3\u3002\u4e00\u6b21\u6700\u7cdf\u7cd5\u7684\u6f14\u8bb2\u9648\u8ff0,\u53ef\u80fd\u5c31\u662f\u56e0\u4e3a\u8d1f\u8f7d\u4e86\u8fc7\u591a\u7684\u4fe1\u606f\u9020\u6210\u7684\u3002\uff09 - \u8ba9\u4f60\u7684\u6f14\u8bb2\u6709\u5408\u9002\u7684\u300e\u7c92\u5ea6\u300f\uff0c\u4e0d\u8981\u7528\u9010\u5b57\u9010\u53e5\u7684\u6f14\u8bb2\u7a3f\uff0c\u4fdd\u6301\u7c92\u5ea6\u6700\u4f73\u5de5\u5177\u201csticker-note\u201d - \u4e0d\u8981\u7528\u5c42\u7ea7\u7ed3\u6784\uff0c\u7528\u7ebf\u6027\u7ed3\u6784\u6765\u7ec4\u7ec7slides</p> <p>\u73b0\u573a\u8868\u73b0 - \u514b\u670d\u7d27\u5f20\uff1a\u8f6c\u79fb\u89c2\u4f17\u6ce8\u610f\u529b\uff0c\u523b\u610f\u6f14\u7ec3\uff08\u81ea\u6211\u5f55\u50cf5\u5206\u949f\uff09\uff0c\u73b0\u573a\u8003\u5bdf\uff08\u91cd\u8981\uff09 - \u624b\u52bf\uff1a\u4e07\u80fd\u5207\u897f\u74dc\uff0c\u53cc\u624b\u5207\uff0c\u5de6\u624b\u5207\uff0c\u53f3\u624b\u5207\uff0c\u5207\u5411\u89c2\u4f17\u3002</p> <p>\u5fcc\u8bb3\uff1a\u63e3\u515c\uff0c\u6276\u81c2</p> <p>\u89c6\u89c9\u529b slides \u4fe1\u606f\u5e94\u8be5\u5177\u5907\u4e09\u4e2a\u5c42\u6b21\uff1a  1. \u5e7b\u706f\u7247\uff1a\u8981\u70b9\u3001\u56fe\u7247\u3001\u8868\u683c\uff0c\u8f85\u52a9\u8fdb\u884c\u89c6\u89c9\u4f20\u8fbe 2. \u6ce8\u91ca\uff1a\u8f85\u52a9\u8fdb\u884c\u8bed\u8a00\u4f20\u8fbe 3. \u8d44\u6599\u8bb2\u4e49\uff1a\u8f85\u52a9\u4f20\u9012\u65e0\u6cd5\u7ec6\u81f4\u5c55\u5f00\u7684\u5185\u5bb9\u3002\u53ef\u4ee5\u9644\u5728\u6700\u540e\u51e0\u9875\uff0c\u4e5f\u53ef\u4ee5\u6253\u5370\u51fa\u6765\uff0c\u7136\u540e\u53d1\u7ed9\u542c\u8bb2\u8005\u3002</p> <p>\u624b\u6bb5</p> <p>\u5229\u7528\u201c\u6f14\u8bb2\u8005\u89c6\u56fe\u201d\uff0c\u5728\u5207\u6362\u5230\u4e0b\u4e00\u9875ppt\u4e4b\u524d\uff0c\u5148\u901a\u8fc7\u6f14\u8bb2\u8005\u8bd5\u56fe\u4e2d\u7684\u5185\u5bb9\uff0c\u8bb2\u8ff0\u4e0b\u4e00\u9875ppt\u7684\u5185\u5bb9\uff0c\u7136\u540e\u518d\u81ea\u7136\u5207\u6362\uff0c\u51f8\u663e\u719f\u7ec3\u4e0e\u4ece\u5bb9\u3002\u6b64\u624b\u6cd5\u518d\u7535\u5f71\u4e2d\u7684\u5b66\u540d\uff1ashock cutting\u3002</p>"},{"location":"posts/QCon%20Beijing%202013/#_4","title":"\u4f5c\u4e3a\u8bb2\u5e08","text":"<p>4\u6708\uff0cQCon\u7ec8\u4e8e\u5f00\u59cb\u4e86\u300226\u53f7\u4e0a\u5348\u7684\u4f01\u4e1a\u7ea7\u7b2c2\u573a\u662f\u6211\u7684slides\u3002\u4e3b\u9898\u662f\uff1aSOHU\u90ae\u7bb1\u5728Python\u4e2d\u7684\u7ecf\u9a8c\uff0c\u611f\u89c9\u4e0d\u9519\uff0c\u6709\u53ef\u4ee5\u63d0\u9ad8\u7684\u5730\u65b9\u3002 - \u4f46\u662f\u8bb2\u7684\u65f6\u5019\u8fc7\u4e8e\u6765\u56de\u8d70\u52a8\u4e86 - \u6ca1\u6709\u5728\u505c\u5728\u4e00\u4e2a\u5730\u65b9\u8ba9\u7126\u70b9\u90fd\u96c6\u4e2d\u8fc7\u6765 - \u8d85\u65f67\u5206\u949f\uff0c\u9884\u671f40\u5206\u949f\uff0c\u8bb2\u4e8647\u5206\u949f</p> <p>\u8fd9\u4e2a\u662f\u6211infoq\u6f14\u8bb2\u7684\u5185\u5bb9 \u8fd9\u4e2a\u662fslides</p>"},{"location":"posts/QCon%20Beijing%202013/#_5","title":"\u4f5c\u4e3a\u542c\u4f17","text":""},{"location":"posts/QCon%20Beijing%202013/#erlang","title":"Erlang\u5f00\u53d1\u5b9e\u8df5","text":"<p>QCon\u5317\u4eac\uff0c\u6211\u9664\u4e86\u662f\u8bb2\u5e08\uff0c\u4e5f\u542c\u4e86\u51e0\u573a\u4e0d\u9519\u7684\u6f14\u8bb2\u3002\u5c24\u5176\u662f\u5bf9\u4e8e\u6dd8\u5b9d \u4f59\u950b \u7684 \u300aerlang\u5f00\u53d1\u5b9e\u8df5\u300b\u6620\u50cf\u8fd8\u662f\u86ee\u6df1\u523b\u7684\u3002\u9664\u4e86\u5f00\u59cb\u5173\u4e8eerlang\u7684\u54f2\u5b66\u548c\u4e16\u754c\u89c2\uff0c\u57fa\u672c\u4e0a\u5c31\u6ca1\u6709\u548cerlang\u76f8\u5173\u7684\u4e1c\u897f\u4e86\uff0c\u90fd\u662f\u518d\u8bb2\u4e00\u4e9b\u7cfb\u7edf\u8bbe\u8ba1\u76f8\u5173\u7684\u3002</p> <p>erlang\u7684\u4e16\u754c\u89c2 - \u4e16\u754c\u662f\u5e76\u884c\u7684 - \u5916\u7269\u7686\u72ec\u5584\u5176\u8eab - \u4e07\u4e8b\u7686\u901a\u8baf</p> <p>\u4e16\u754c\u89c2\u5f88\u65b0\u9896\uff0c\u4f46\u662f\u5374\u662f\u5f88\u6b63\u786e\u3002\u6b63\u662f\u8fd9\u79cd\u7b80\u5355\u76f4\u63a5\u7684\u4e16\u754c\u89c2\uff0c\u4f7f\u5f97erlang\u7684\u4e16\u754c\u975e\u5e38\u7684\u76f4\u89c2\u548c\u7b80\u5355</p> <p>\u5927\u578b\u7cfb\u7edf\u5177\u6709\u7684\u5171\u901a\u6027 - \u9ad8\u54cd\u5e94 - \u9ad8\u6027\u80fd - \u9ad8\u4e00\u81f4\u6027</p> <p>\u5bf9\u4e8e\u8fd9\u4e2a\uff0c\u6211\u89c9\u5f97\uff0c\u4f59\u950b\u7684\u610f\u601d\u662f\u6307\u5404\u4e2a\u7cfb\u7edf\u5e94\u8be5\u4fdd\u8bc1\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\u9762\u662f\u4e00\u81f4\u7684\uff0c\u800c\u4e0d\u662f\u51fa\u73b0\u591a\u4e2a\u4e0d\u540c\u7684\u7248\u672c\u3002\u5f53\u7136\uff0c\u9ad8\u4e00\u81f4\u6027\u8fd8\u53ef\u4ee5\u6307\u6570\u636e\u4e0a\u7684\u9ad8\u4e00\u81f4\u6027\u3002\u4e0d\u8fc7\u5927\u578b\u7cfb\u7edf\u4e0d\u4e00\u5b9a\u8981\u6c42\u9ad8\u4e00\u81f4\u6027\uff0c\u8fd9\u4e2a\u662f\u7531\u5177\u4f53\u7684\u4e1a\u52a1\u51b3\u5b9a\u7684\u3002\u800c\u4e14\u5728\u5f88\u591a\u65f6\u5019\uff0c\u9ad8\u6027\u80fd\uff0c\u9ad8\u54cd\u5e94 \u548c \u6570\u636e\u9ad8\u4e00\u81f4\u6027\u5f88\u96be\u8fbe\u5230\u540c\u65f6\u6ee1\u8db3</p> <p>\u5927\u578b\u7cfb\u7edf\u8bbe\u8ba1 - \u590d\u6742\u6027\u7ba1\u7406</p> <p>\u7cfb\u7edf\u80af\u5b9a\u5177\u6709\u590d\u6742\u6027\uff0c\u5c24\u5176\u662f\u5927\u578b\u7cfb\u7edf\u3002\u65e2\u7136\u5b58\u5728\u590d\u6742\u6027\uff0c\u90a3\u4e48\u901a\u5e38\u8981\u505a\u7684\u4e8b\u60c5\u662f\u628a\u590d\u6742\u6027\u96c6\u4e2d\u5230\u4e00\u4e2a\u70b9\u4e0a\uff0c\u800c\u4e0d\u8981\u5206\u6563\u5230\u5404\u4e2a\u5730\u65b9\uff0c\u53ea\u6709\u8fd9\u6837\uff0c\u624d\u80fd\u5bb9\u6613\u7ba1\u7406\uff0c\u5bb9\u6613\u5dee\u9519\uff0c\u5bb9\u6613\u8bbe\u8ba1\uff0c\u5bb9\u6613\u5b9e\u73b0</p> <ul> <li> <p>\u8b66\u544a\u96f6\u5bb9\u5fcd</p> <p>\u6211\u975e\u5e38\u7684\u8d5e\u6210\u8fd9\u4e2a\u89c2\u70b9\u3002\u5bf9\u4e8e\u770b\u4f3c\u5e73\u5e38\u7684warning\u5343\u4e07\u4e0d\u8981\u4e0d\u5728\u4e4e\uff0c\u53cd\u800c\uff0c\u4f60\u5e94\u8be5\u91cd\u89c6\u8d77\u6765\u3002\u56e0\u4e3a\uff0c\u8fd9\u4e2a\u770b\u4f3c\u65e0\u6240\u8c13\u7684warning\u6781\u6709\u53ef\u80fd\u662f\u5bfc\u81f4\u4f60\u7cfb\u7edf\u5d29\u6e83\u7684\u6700\u4e8f\u7978\u9996\u3002\u8fd9\u4e2a\u5728\u6211\u505aPostfix MTA \u548c Milter \u4ea4\u4e92\u65f6\u5019\u51fa\u73b0\u7684warning\u5c31\u80fd\u5f00\u51fa\u6765\u3002</p> </li> <li> <p>\u6363\u4e71\u7cfb\u7edf</p> <p>\u4f59\u950b\u63d0\u51fa\u4e86\u4e00\u4e2a\u6709\u610f\u601d\u7684\u89c2\u70b9\uff0c\u5c31\u662f\u81ea\u5df1\u5199\u4e00\u4e2a\u6363\u4e71\u7cfb\u7edf\u7528\u6765\u6a21\u62df\u5404\u79cd\u771f\u5b9e\u53d1\u751f\u7684\u4e0d\u53ef\u9884\u77e5\u7684\u5f02\u5e38\uff0c\u4f8b\u5982\uff1a\u7f51\u7edc\u6545\u969c\uff0c\u7b2c3\u65b9\u4f9d\u8d56\u670d\u52a1\u5954\u6e83\uff0c\u786c\u4ef6\u635f\u574f\uff0c\u6570\u636e\u5e93\u9519\u8bef\u3002\u4ece\u800c\u7834\u574f\u751f\u4ea7\u73af\u5883\u4e2d\u5404\u79cd\u670d\u52a1\u7684\u6b63\u5e38\u8fd0\u884c\u3002\u7528\u6765\u68c0\u6d4b\u7a0b\u5e8f\u7684\u9c81\u68d2\u6027\u3002</p> </li> </ul> <p>\u5927\u578b\u670d\u52a1\u90e8\u7f72</p> <ul> <li> <p>\u4e0d\u505c\u673a\u70ed\u66f4\u65b0</p> <p>\u8fd9\u4e2a\u548cerlang\u6709\u5173\u7cfb\uff0c\u56e0\u4e3aerlang\u662f\u652f\u6301\u70ed\u66f4\u65b0\u4ee3\u7801\u7684\u3002\u5bf9\u4e8e\u5176\u5b83\u8bed\u8a00\uff0c\u4f8b\u5982python\uff0c\u90a3\u4e48\u53ef\u80fd\u6ca1\u6709\u8fd9\u79cd\u65b9\u5f0f\uff0c\u80fd\u505a\u7684\u4e8b\u60c5\u53ef\u80fd\u5c31\u662f restart service gracefully\u3002</p> </li> <li> <p>\u7cfb\u7edf\u76d1\u63a7</p> <p>\u5404\u79cd\u76d1\u63a7\uff0c\u78c1\u76d8\uff0cIO\uff0c\u7f51\u7edc\uff0c\u54cd\u5e94\u7b49\u7b49</p> </li> <li> <p>\u652f\u6301\u968f\u65f6\u66f4\u65b0\uff0c\u5220\u9664\uff0c\u6dfb\u52a0\uff0c\u505c\u6b62\uff0c\u542f\u52a8\u8282\u70b9</p> </li> <li>\u5bf9\u96c6\u7fa4\u7684\u5b89\u5168\uff0c\u8fdb\u884c\u5ba1\u8ba1\uff1a1) \u5b8c\u5584\u7684\u65e5\u5fd7\uff1b2) \u5b8c\u6574\u7684history\uff1b <p>\u5f88\u5bb9\u6613\u7684\u67e5\u627e\u5230\u8bef\u64cd\u4f5c\u7684\u6b65\u9aa4\uff08\u5f53\u7136\uff0c\u5bf9\u4e8e\u64cd\u4f5c\u7684history\u53ef\u80fd\u548c\u4e00\u4e9b\u4e1a\u52a1\u76f8\u5173\uff09</p> </li> </ul>"},{"location":"posts/QCon%20Beijing%202013/#_6","title":"\u63a8\u8350\u5f15\u64ce","text":"<p>\u542c\u4e86\u63a8\u8350\u5f15\u64ce\u7684\u4e13\u573a\u3002\u611f\u89c9\u603b\u4f53\u5c06\u6765\uff0c\u65b0\u610f\u4e0d\u9ad8\u3002\u57fa\u672c\u4e0a\u90fd\u5dee\u4e0d\u591a\u3002\u5173\u4e8e\u63a8\u8350\u5f15\u64ce\u505a\u4e00\u4e0b\u603b\u7ed3\u3002</p> <p>\u63a8\u8350\u5f15\u64ce\u7684\u672c\u8d28\uff1a</p> <p>\u5728\u7528\u6237\u548c\u5546\u54c1\u4e4b\u95f4\u901a\u8fc7\u4e00\u79cd\u5408\u7406\u7684\u65b9\u5f0f\u627e\u5230\u4e00\u79cd\u8054\u7cfb - \u628a\u5177\u6709\u548c\u5f53\u524d\u7528\u6237\u559c\u6b22\u7684\u5546\u54c1\u76f8\u540c\u7684\u7279\u5f81\u7684\u5546\u54c1\u63a8\u8350\u51fa\u6765 - \u7c7b\u4f3c\u7528\u6237\u559c\u6b22\u7684\uff0c\u4f46\u662f\u5f53\u524d\u7528\u6237\u8fd8\u6ca1\u6709\u4e70\uff0c\u63a8\u8350\u51fa\u6765 - \u628a\u548c\u7528\u6237\u559c\u6b22\u7684\u5546\u54c1\u76f8\u4f3c\u7684\u5546\u54c1\u8fdb\u884c\u63a8\u8350</p> <p>\u51b7\u542f\u52a8</p> <p>\u6240\u8c13\u51b7\u542f\u52a8\u5c31\u662f\u8bf4\uff0c\u5f53\u4e00\u4e2a\u7528\u6237\u521a\u521a\u6ce8\u518c\uff0c\u6216\u8005\u4e00\u4e2a\u7528\u6237\u521d\u6b21\u767b\u9646\uff0c\u90a3\u4e48\u4ed6\u7684\u5386\u53f2\u6570\u636e\u4e3a0\uff0c\u6216\u8005\u5f88\u5c11\uff0c\u6240\u4ee5\uff0c\u5f88\u96be\u5206\u6790\u4ed6\u7684\u8d2d\u4e70\u610f\u56fe - \u901a\u8fc7\u5546\u54c1\u70ed\u70b9\u6765\u63a8\u8350 - \u901a\u8fc7\u5730\u57df\u7279\u70b9\u6765\u63a8\u8350 - \u901a\u8fc7\u7528\u6237\u4fe1\u606f\u6765\u63a8\u8350 - \u5b9e\u65f6\u7684\u6355\u83b7\u7528\u6237\u7684\u6d4f\u89c8\u884c\u4e3a\uff0c\u8fdb\u884c\u5b9e\u65f6\u5206\u6790\uff0c\u53bb\u8fde\u7ebf\u5546\u54c1\u6570\u636e\u8fdb\u884c\u63a8\u8350\uff08\u8fd9\u4e2a\u662f\u4e00\u4e2a\u6709\u96be\u5ea6\u7684\u5b9e\u65f6\u6216\u8005\u51c6\u5b9e\u65f6\u7cfb\u7edf\uff09</p> <p>\u7b97\u6cd5 - \u534f\u540c\u8fc7\u6ee4\u53ef\u4ee5\u8bf4\u662f\u6240\u6709\u63a8\u8350\u5f15\u64ce\u7684\u7b2c\u4e00\u6b65\u3002\u4efb\u4f55\u4e00\u4e2a\u63a8\u8350\u5f15\u64ce\u4e00\u5f00\u59cb\u4e00\u5b9a\u5f97\u7528\u534f\u540c\u8fc7\u6ee4\u6765\u5b9e\u73b0\u4e00\u904d - jaccard \u7b97\u6cd5\u516c\u5f0f\uff1a\u4e70\u8fc7\u4e24\u4e2a\u4ea7\u54c1\u7684\u4ea4\u96c6/\u4e70\u8fc7\u4e24\u4e2a\u4ea7\u54c1\u7684\u5e76\u96c6 - \u63a8\u8350\u5f15\u64ce\u5f80\u5f80\u662f\u591a\u4e2a\u7b97\u6cd5\u7ed3\u5408\u548c\u914d\u5408\u4f7f\u7528\uff0c\u800c\u4e0d\u662f\u5355\u4e00\u7684\u67d0\u79cd\u7b97\u6cd5 - \u7b97\u6cd5\u7684\u5173\u6ce8\u70b9   - ctr: \u70b9\u51fb\u7387\uff0c\u7528\u6237\u662f\u5426\u559c\u6b22\u63a8\u8350\u7ed3\u679c   - cvr: \u8f6c\u5316\u7387\uff0c\u4ece\u63a8\u8350\u5230\u4ed8\u94b1   - pcvr: ctr * cvr  \u8fd9\u4e2a\u503c\u8d8a\u9ad8\u8d8a\u597d\uff0c\u4f46\u662fctr\u548ccvr\u57fa\u672c\u4e0a\u662f\u4e00\u4e2a\u53cd\u6bd4\u8d8b\u52bf - \u7b97\u6cd5\u91cd\u8981\u6027\uff1a\u7b97\u6cd5\u5f88\u91cd\u8981\uff0c\u4f46\u662f\u4e0d\u662f\u6700\u91cd\u8981\u3002\u5de5\u7a0b\u548c\u7cfb\u7edf\u7684\u5b9e\u73b0\u80fd\u529b\u624d\u662f\u6700\u91cd\u8981\u7684\uff0c\u751a\u81f3\u9ad8\u4e8e\u7b97\u6cd5\u3002   - eg. \u4e00\u6dd8\u7684 \u4e24\u4e2a\u4ea7\u54c1\u4e4b\u95f4\u7684\u76f8\u4f3c\u5ea6\uff1a     - hadoop\uff0c\u6bcf\u5929\u9700\u8981\u8ba1\u7b97 4\u4e2a\u5c0f\u65f6\uff0c\u540e\u6765\u7684\u4f18\u5316 \u7528\u4e862\u4e2a\u5c0f\u65f6\uff0c\u6700\u540e\u53ea\u9700\u898124min     - 20% improve in CTR</p> <p>\u7535\u5546\u63a8\u8350\u5f15\u64ce\u7684\u6570\u636e - \u6570\u636e\u6a21\u578b\uff1a   - \u5b9d\u8d1dmetadata\uff0ctitle\uff0cattributes   - \u4eba\u7fa4\u5c5e\u6027\uff1a\u5e74\u7eaa\uff0c\u6027\u522b\uff0c\u8d2d\u4e70\u529b \u7b49\u7b49   - \u6027\u522b\u9884\u6d4b\uff1a\u7269\u7406\u6027\u522b(\u7537/\u5973)\uff0c\u8d2d\u4e70\u6027\u522b(\u8d26\u53f7\u53ef\u80fd\u5bb6\u5ead\u516c\u7528\uff0c\u53c8\u53ef\u4ee5\u5206\u6210\u957f\u671f\u548c\u77ed\u671f\u6027\u522b)   - \u5bf9\u4e8e\u957f\u671f\uff1a\u5e7f\u544a\u4e3b\u6709\u7528   - \u77ed\u671f\uff1a\u63a8\u8350\u7cfb\u7edf\u6709\u7528   - \u6d4f\u89c8\u6570\u636e\uff1a\u65f6\u957f\uff0c\u70b9\u51fb\uff0c\u8d2d\u4e70 \u7b49\u7b49</p> <ul> <li>\u6570\u636e\u5f62\u5f0f</li> <li>input: &gt; \u901a\u5e38\u5c31\u662f\u65e5\u5fd7log<ul> <li>\u901a\u5e38\u5177\u6709\u7a00\u758f\u6027\uff0c\u4f46\u662f\u4e5f\u4e0d\u662f\u5b8c\u5168\u60f3\u8c61\u4e2d\u90a3\u6837\u5b50\u7a00\u758f\uff0c\u516c\u5f0f\u5b9a\u4e49\uff1a \u6d3b\u8dc3\u7528\u6237\u6570\u91cf/\u6d3b\u8dc3\u4ea7\u54c1\u6570</li> <li>\u88ab\u70b9\u8fc71\u6b21\uff0c\u6216\u8005\u88ab\u770b\u8fc71\u6b21\u7684\u5546\u54c1\u624d\u80fd\u6709\u63a8\u8350\u4ef7\u503c</li> </ul> <li>output:  <p>\u641c\u7d22\u7ed3\u679c\u9875\u9762\u63a8\u8350 - \u76f8\u5173\u63a8\u8350\uff0c\u641c\u7d22\u7ed3\u679c\u4ece\u6587\u672c\u76f8\u4f3c\u5ea6\uff0c\u63a8\u8350\u7ed3\u679c\u4ece\u56fe\u7247\u76f8\u4f3c\u5ea6 - \u57fa\u4e8equery\u505a\u60ca\u559c\u6027\u7684\u63a8\u8350\uff0c\u5a74\u513f\u5e8a-&gt;\u5e8a\u5355-&gt;\u8863\u670d</p> <p>\u6ce8\u610f\u70b9 - \u4e1a\u5185\u4e00\u822c\u8ba4\u4e3a\uff1auser\u76f8\u4f3c\u5ea6\u4f5c\u4e3a\u63a8\u8350\u7406\u7531\u53ef\u80fd\u4e0d\u4f1a\u5f97\u5230\u5bf9\u65b9\u7684\u8ba4\u53ef - \u5bf9\u9886\u57df\u548c\u5bf9\u6570\u636e\u7684\u7406\u89e3\u6bd4\u7b97\u6cd5\u8981\u91cd\u8981 - \u7b97\u6cd5\u5f88\u91cd\u8981\uff0c\u4f46\u662f\u4e0d\u662f\u6700\u91cd\u8981\u3002\u5de5\u7a0b\u548c\u7cfb\u7edf\u7684\u5b9e\u73b0\u80fd\u529b\u624d\u662f\u6700\u91cd\u8981\u7684\uff0c\u751a\u81f3\u9ad8\u4e8e\u7b97\u6cd5 - \u8d2d\u4e70\u8d35\u91cd\u7269\u54c1\u7684\u7528\u6237\u8d2d\u4e70\u610f\u56fe\u4e00\u822c\u4f1a\u5f88\u660e\u786e</p>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/","title":"Switch Homebrew to a china mirror","text":"<p>+++ title = \"Homebrew\u4fee\u6539\u56fd\u5185\u6e90\" date = 2020-12-19</p> <p>categories = [\"Tech\"] tags = [\"Homebrew\"] +++</p> <p>\u56e0\u4e3a\u4f17\u6240\u5468\u77e5\u7684\u539f\u56e0\uff0c\u6b63\u5e38\u8bbf\u95eehomebrew\u662f\u5f88\u96be\u7684\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u5b83\u7684\u6e90\uff0c\u8ba9\u5176\u6307\u5411\u56fd\u5185\u3002</p>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/#homebrew4","title":"\u5bf9\u4e8e homebrew\uff0c\u9700\u8981\u66ff\u6362\u7684\u662f4\u4e2a\u6a21\u5757\u7684\u955c\u50cf\uff1a","text":"<ul> <li>Homebrew</li> <li>Homebrew Core</li> <li>Homebrew-bottles</li> <li>Homebrew Cask</li> </ul>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/#homebrew","title":"\u66ff\u6362 Homebrew","text":"<p>git -C \"$(brew --repo)\" remote set-url origin https://mirrors.ustc.edu.cn/brew.git</p>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/#homebrew-core","title":"\u66ff\u6362 Homebrew Core","text":"<p>git -C \"$(brew --repo homebrew/core)\" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git</p>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/#homebrew-cask","title":"\u66ff\u6362 Homebrew Cask","text":"<p>git -C \"$(brew --repo homebrew/cask)\" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git</p>"},{"location":"posts/Switch%20Homebrew%20to%20a%20china%20mirror/#homebrew-bottles","title":"\u66ff\u6362 Homebrew-bottles","text":"<ul> <li>\u5bf9\u4e8e bash \u7528\u6237\uff1a</li> </ul> <p>echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profile source ~/.bash_profile</p> <ul> <li>\u5bf9\u4e8e zsh \u7528\u6237\uff1a</li> </ul> <p>echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' &gt;&gt; ~/.zshrc source ~/.zshrc</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/","title":"What i fear most is losing my curiosity","text":"<p>+++ title = \"\u6700\u6015\u5931\u53bb\u597d\u5947\u5fc3\" date = 2017-08-28</p> <p>categories = [\"Life\"] tags = [\"Essay\"] +++</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/#_1","title":"\u52a8\u7269","text":"<p>\u4ece\u672c\u8d28\u4e0a\u6765\u8bf4\uff0c\u4eba\u662f\u4e00\u79cd\u52a8\u7269\u3002\u6709\u4eba\u8bf4\uff1a\u7537\u4eba\u662f\u9760\u4e0b\u534a\u8eab\u601d\u8003\u7684\u52a8\u7269\uff0c\u800c\u5973\u4eba\u5219\u662f\u9760\u7537\u4eba\u800c\u751f\u5b58\u7684\u52a8\u7269\u3002\u8fd9\u8bdd\u6709\u70b9\u6781\u7aef\uff0c\u4e5f\u8bb8\u53ea\u80fd\u9002\u7528\u518d\u7279\u5b9a\u7684\u573a\u666f\u3001\u7279\u5b9a\u7684\u4eba\u7fa4\u3002\u4f46\u4ece\u59cb\u81f3\u7ec8\uff0c\u65e0\u4e0d\u900f\u9732\u7740\uff1a\u4eba\u662f\u4e00\u79cd\u52a8\u7269\u3002 \u6ca1\u9519\uff0c\u4eba\u5929\u751f\u5c31\u662f\u4e00\u79cd\u52a8\u7269\uff0c\u4e00\u79cd\u51cc\u9a7e\u4e8e\u666e\u901a\u52a8\u7269\u4e4b\u4e0a\u7684\u66f4\u52a0\u9ad8\u7b49\u7684\u52a8\u7269\u3002\u6bd4\u4e00\u822c\u52a8\u7269\u66f4\u52a0\u7684\u6709\u6210\u957f\u7a7a\u95f4\uff0c\u56e0\u4e3a\u4ed6\u4eec\u66f4\u5584\u4e8e\u5b66\u4e60\uff0c\u66f4\u5584\u4e8e\u81ea\u6211\u5b66\u4e60\u3002</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/#_2","title":"\u5b66\u4e60","text":"<p>\u5728\u6211\u770b\u6765\uff0c\u5b66\u4e60\u7684\u672c\u8d28\u662f\u4e3a\u4e86\u9002\u5e94\u8fd9\u4e2a\u793e\u4f1a\uff0c\u9002\u5e94\u8fd9\u4e2a\u73af\u5883\uff0c\u662f\u4e3a\u4e86\u8ba9\u81ea\u5df1\u6d3b\u5f97\u66f4\u52a0\u7684\u6e38\u5203\u6709\u4f59\u3002\u5982\u679c\u4f60\u5df2\u8863\u98df\u65e0\u5fe7\uff0c\u5982\u679c\u4f60\u5df2\u8d85\u8131\u81ea\u7136\uff0c\u5982\u679c\u4f60\u65e2\u65e0\u8fdc\u8651\uff0c\u4e5f\u65e0\u8fd1\u5fe7\uff0c\u5982\u679c\u4f60\u5df2\u65e0\u6b32\u65e0\u6c42\u3002\u90a3\u4f60\u771f\u7684\u53ef\u4ee5\u4e0d\u7528\u5b66\u4e60\u4e86\uff0c\u56e0\u4e3a\u4f60\u5df2\u7ecf\u6210\u4e3a\u4e86\u5927\u5bb6\u3002</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/#_3","title":"\u81ea\u6211\u5b66\u4e60","text":"<p>\u81ea\u6211\u5b66\u4e60\u662f\u5b66\u4e60\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u4e00\u4e2a\u9014\u5f84\u3002\u6240\u4ee5\uff0c\u5176\u672c\u8d28\u5c31\u662f\u5b66\u4e60\u3002\u90a3\u5982\u4f55\u81ea\u6211\u5b66\u4e60\uff1f\u65b9\u6cd5\u5f88\u591a\uff0c\u4ece\u4e66\u672c\u3001\u4e92\u8054\u7f51 \u7b49\u5f88\u591a\u5730\u65b9\u90fd\u53ef\u5f97\u3002\u8fd9\u4e0d\u662f\u4eca\u5929\u8981\u63a2\u8ba8\u7684\u91cd\u70b9\u3002\u4eca\u5929\uff0c\u6211\u8981\u8bf4\u7684\u662f\uff0c\u81ea\u6211\u5b66\u4e60\u7684\u89e6\u53d1\u6761\u4ef6\u5f88\u91cd\u8981\u3002\u4ec0\u4e48\u65f6\u5019\u4f1a\u89e6\u53d1\u81ea\u6211\u5b66\u4e60\uff1f\u600e\u4e48\u89e6\u53d1\u81ea\u6211\u5b66\u4e60\uff1f\u5176\u5b9e\u5c31\u662f3\u4e2a\u5b57\uff1a\u597d\u5947\u5fc3\u3002</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/#_4","title":"\u597d\u5947\u5fc3","text":"<p>\u524d\u4e00\u6bb5\u65f6\u95f4\uff0c\u6211\u7a81\u7136\u89c9\u5f97\u5931\u53bb\u4e86\u597d\u5947\u5fc3\u3002\u9762\u5bf9\u6709\u610f\u601d\u7684\u3001\u6ca1\u610f\u601d\u7684\u3001\u660e\u767d\u7684\u3001\u4e0d\u61c2\u7684\u3001\u611f\u5174\u8da3\u7684\u3001\u4e0d\u611f\u5174\u8da3\u7684 \u90fd\u5df2\u7ecf\u65e0\u611f\u3002\u8fd9\u65f6\u5019\uff0c\u4f60\u662f\u5728\u67af\u71e5\u65e0\u5473\u7684\u6d3b\u7740\uff0c\u5728\u5e73\u6de1\u65e0\u5947\u7684\u6d3b\u7740\u3002\u4e00\u82b1\u4e00\u4e16\u754c\uff0c\u4e00\u53f6\u4e00\u83e9\u63d0\uff0c\u4f60\u4ee5\u4e3a\u5165\u5883\u4e86\u3002\u5176\u5b9e\uff0c\u4f60\u53ea\u662f\u9ebb\u6728\u4e86\uff0c\u6ca1\u6709\u76ee\u6807\u4e86\uff0c\u6ca1\u6709\u52a8\u529b\u4e86\u3002\u4e45\u800c\u4e45\u4e4b\uff0c\u4f60\u5c31\u662f\u5728\u7ec8\u65e5\u60f6\u6050\u7684\u6d3b\u7740\uff0c\u5728\u5fd0\u5fd1\u4e0d\u5b89\u7684\u6d3b\u7740\u3002\u6240\u4ee5\uff0c\u597d\u5947\u5fc3\uff0c\u5f88\u91cd\u8981\u3002\u771f\u7684\u5f88\u91cd\u8981\uff01</p>"},{"location":"posts/What%20i%20fear%20most%20is%20losing%20my%20curiosity/#_5","title":"\u4fdd\u6301\u597d\u5947\u5fc3","text":"<p>\u4e0d\u662f\u8bf4\u5927\u5bb6\u5e94\u8be5\u600e\u6837\u624d\u80fd\u4fdd\u6301\u597d\u5947\u5fc3\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4eba\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6bcf\u4e2a\u4eba\u7684\u65b9\u5f0f\u4e5f\u4e0d\u4e00\u6837\u3002\u6211\u53ea\u662f\u8bf4\u8bf4\u6211\u3002\u5728\u7ecf\u5386\u5230\u8fd9\u79cd\u9636\u6bb5\uff0c\u6211\u5f00\u59cb\u614c\u4e86\u3002\u4e8e\u662f\uff0c\u627e\u670b\u53cb\uff0c\u627e\u540c\u5b66\uff0c\u627e\u540c\u4e8b\u804a\u5929\u3002\u804a\u5f97\u8d8a\u591a\uff0c\u5c31\u88ab\u5f00\u89e3\u5f97\u8d8a\u591a\uff0c\u88ab\u5f00\u89e3\u5f97\u8d8a\u591a\uff0c\u5c31\u611f\u89c9\u81ea\u5df1\u660e\u767d\u5f97\u8d8a\u591a\uff0c\u4f46\u540c\u65f6\uff0c\u4e5f\u611f\u89c9\u81ea\u5df1\u660e\u767d\u5f97\u8d8a\u5c11\u3002\u662f\u7684\uff0c\u5c31\u662f\u8fd9\u6837\u4e00\u79cd\u72b6\u6001\u3002\u611f\u89c9\u90fd\u660e\u767d\uff0c\u53c8\u90fd\u4e0d\u660e\u767d\u3002\u90fd\u4e86\u89e3\uff0c\u53c8\u90fd\u4e0d\u4e86\u89e3\u3002\u90fd\u77e5\u9053\uff0c\u53c8\u90fd\u4e0d\u77e5\u9053\u3002\u4e3a\u4e86\u5c3d\u5feb\u4ece\u8fd9\u79cd\u72b6\u6001\u6446\u8131\u51fa\u6765\u3002\u6211\u9009\u62e9\u4e86\u91cd\u65b0\u62ce\u8d77\u4ee3\u7801\uff0c\u6bd5\u7adf\u81ea\u5df1\u662f\u5e72\u8fd9\u4e2a\u7684\u3002\u8001\u672c\u884c\uff0c\u624b\u827a\u6d3b\u3002\u6309\u8001\u8bdd\u8bb2\uff0c\u8fd9\u662f\u95e8\u517b\u5bb6\u7cca\u53e3\u7684\u624b\u827a\uff0c\u4e0d\u80fd\u4e22\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/","title":"A quick guide to using tornado","text":"<p>+++ title = \"tornado\u6559\u7a0b\" date = 2011-11-05</p> <p>categories = [\"Tutorials\"] tags = [\"Python\", \"Tornado\"] +++</p> <p>\u6700\u8fd1\u8981\u505a\u4e00\u4e2a\u65b0\u7684\u7cfb\u7edf\uff1a\u4e00\u4e2a\u62ab\u7740\u90ae\u4ef6\u7cfb\u7edf\u5916\u8863\u7684\u6d88\u606f\u7cfb\u7edf\u3002\u6027\u80fd\u80af\u5b9a\u662f\u4e00\u65b9\u9762\uff0c\u6240\u4ee5Webpy\u5c31\u4e0d\u6253\u7b97\u7528\u4e86\u3002Django\u672c\u6765\u662f\u6211\u7684\u7b2c\u4e00\u9009\u62e9\uff0c\u4f46\u662f\u89c9\u5f97Django\u53ef\u80fd\u4e5f\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898\u3002\u6211\u8fd8\u662f\u8003\u8651\u5176\u5b83\u7684\u5427\u3002\u9009\u6765\u9009\u53bb\uff0c\u6700\u540e\u9009\u62e9\u4e86Torando\u3002\u56e0\u4e3a\u5b83\uff1a\u7b80\u5355\uff1b\u4f20\u8bf4\u6027\u80fd\u597d\uff1b\u6210\u719f\u6848\u4f8b \uff08 \u77e5\u4e4e, FriendFeed )</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_1","title":"\u7b80\u5355\u5c1d\u8bd5","text":"<ul> <li>\u5b89\u88c5</li> </ul> <pre><code>sudo pip install tornado\n</code></pre> <ul> <li>\u7b2c\u4e00\u4e2ademo</li> </ul> <pre><code>#coding: utf-8\nimport tornado.ioloop\nimport tornado.web\n\nclass Index(tornado.web.RequestHandler):\n    def get(self):\n        self.write('Hello, world ! \\n')\n\nurls = (\n    ('/', Index),\n)\n\ndef start():\n    app = tornado.web.Application(urls)\n    app.listen(4322)\n    tornado.ioloop.IOLoop.instance().start()\n\nif __name__ == '__main__':\n    start()\n</code></pre> <ul> <li>\u542f\u52a8\uff1apython webpy_test.py 0.0.0.0:4322</li> <li>GET \u6d4b\u8bd5\uff1acurl http://localhost:4322</li> </ul> <p>\u7ed3\u679c\u5982\u4e0b\uff1a   Hello, world</p> <p>\u770b\u5230\u4e86\u4e48\uff0c\u548cWebpy\u957f\u5f97\u51e0\u4e4e\u4e00\u6a21\u4e00\u6837\u3002\u6211\u5148\u7b80\u5355\u538b\u6d4b\u4e00\u4e0b\u5b83\u3002\u5982\u679c\u597d\u7684\u8bdd\uff0c\u6211\u89c9\u5f97\u53ef\u4ee5\u8003\u8651\u65b0\u7cfb\u7edf\u7528\u5b83\u6765\u5199\uff0c\u65e7\u7cfb\u7edf\u6216\u8005\u4e5f\u53ef\u4ee5\u5f80\u8fd9\u65b9\u9762\u4e0a\u8f6c\u3002</p> <ul> <li>\u538b\u6d4b\uff1aab -c 10 -n 1000 http://192.168.95.222:4322/</li> </ul> <pre><code>This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking 192.168.95.222 (be patient)\nCompleted 100 requests\nCompleted 200 requests\nCompleted 300 requests\nCompleted 400 requests\nCompleted 500 requests\nCompleted 600 requests\nCompleted 700 requests\nCompleted 800 requests\nCompleted 900 requests\nCompleted 1000 requests\nFinished 1000 requests\n\n\nServer Software:        TornadoServer/2.1.1\nServer Hostname:        192.168.95.222\nServer Port:            4322\n\nDocument Path:          /\nDocument Length:        16 bytes\n\nConcurrency Level:      10\nTime taken for tests:   0.693 seconds\nComplete requests:      1000\nFailed requests:        0\nWrite errors:           0\nTotal transferred:      174000 bytes\nHTML transferred:       16000 bytes\nRequests per second:    1443.30 [#/sec] (mean)\nTime per request:       6.929 [ms] (mean)\nTime per request:       0.693 [ms] (mean, across all concurrent requests)\nTransfer rate:          245.25 [Kbytes/sec] received\n\nConnection Times (ms)\n                min  mean[+/-sd] median   max\nConnect:        1    1   1.0      1      13\nProcessing:     1    6   1.9      5      18\nWaiting:        1    5   1.8      5      18\nTotal:          3    7   1.8      6      19\n\nPercentage of the requests served within a certain time (ms)\n    50%      6\n    66%      7\n    75%      7\n    80%      7\n    90%      8\n    95%     10\n    98%     13\n    99%     17\n    100%     19 (longest request)\n</code></pre> <p>\u6bcf\u79d2\u5c06\u8fd1\u662f1443\uff0c\u63a5\u8fd1webpy\u768410\u500d\u3002</p> <ul> <li>\u538b\u6d4b-100\u5e76\u53d1\uff0c2000\u8bf7\u6c42\uff1aab -c 100 -n 2000 http://192.168.95.222:4322/</li> </ul> <pre><code>This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;\nCopyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking 192.168.95.222 (be patient)\nCompleted 200 requests\nCompleted 400 requests\nCompleted 600 requests\nCompleted 800 requests\nCompleted 1000 requests\nCompleted 1200 requests\nCompleted 1400 requests\nCompleted 1600 requests\nCompleted 1800 requests\nCompleted 2000 requests\nFinished 2000 requests\n\n\nServer Software:        TornadoServer/2.1.1\nServer Hostname:        192.168.95.222\nServer Port:            4322\n\nDocument Path:          /\nDocument Length:        16 bytes\n\nConcurrency Level:      100\nTime taken for tests:   1.075 seconds\nComplete requests:      2000\nFailed requests:        0\nWrite errors:           0\nTotal transferred:      348000 bytes\nHTML transferred:       32000 bytes\nRequests per second:    1860.06 [#/sec] (mean)\nTime per request:       53.762 [ms] (mean)\nTime per request:       0.538 [ms] (mean, across all concurrent requests)\nTransfer rate:          316.06 [Kbytes/sec] received\n\nConnection Times (ms)\n                min  mean[+/-sd] median   max\nConnect:        1    1   1.0      1       8\nProcessing:     4   51  13.0     46      76\nWaiting:        4   51  13.0     46      75\nTotal:          8   53  12.8     48      77\n\nPercentage of the requests served within a certain time (ms)\n    50%     48\n    66%     65\n    75%     65\n    80%     65\n    90%     66\n    95%     70\n    98%     73\n    99%     73\n    100%     77 (longest request)\n</code></pre> <p>\u6bcf\u79d21800\u4e2a\u8bf7\u6c42\uff0c\u54cd\u5e94\u4e3a53.8ms\uff0c\u5f88\u5f3a\u5927\u554a\u3002</p> <p>\u90a3\u5c31\u9009\u5b83\u4e86\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_2","title":"\u4e3b\u8981\u6838\u5fc3","text":""},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#handler","title":"Handler","text":"<p>\u5bf9\u4e8e<code>Tornado</code>\u800c\u8a00\uff0cMVC\u4e2d\u7684C\u5c31\u662f\u5b83\u7684<code>Handler</code>\u3002<code>Torando</code>\u7684Handler\u975e\u5e38\u597d\u5199\uff0c\u53ea\u8981\u7ee7\u627f\u81ea<code>tornado.web.RequestHandler</code>\u5c31\u597d\u4e86\u3002\u4e0b\u9762\u6211\u7edf\u4e00\u7684\u628a<code>Handler</code>\u53eb\u505a<code>Controller</code>\uff0c\u56e0\u4e3a\u4e60\u60ef\u4e86\u8fd9\u79cd\u53eb\u6cd5\u3002\u5bf9\u4e8e<code>Controller</code>\u7684\u4e3b\u8981\u8c03\u7528\u987a\u5e8f\u5982\u4e0b\uff1a</p> <ul> <li><code>__init__</code>\uff1a\u6784\u9020\u65b9\u6cd5\uff0c\u5982\u679c\u9700\u8981\u5728\u5f00\u59cb\u505a\u4e00\u4e9b\u4e8b\u60c5\u7684\u8bdd\uff0c\u4e0d\u63a8\u8350\u5728\u8fd9\u91cc\u3002\u800c\u63a8\u8350\u4f7f\u7528<code>initialize</code></li> <li><code>initialize</code>\uff1a\u8fd9\u91cc\u505a\u4e8b\u60c5\uff0c\u6bd4\u65b9\u8bf4\u7ed9\u8fd9\u4e2aController\u52a0\u5165\u4e00\u4e9b\u6210\u5458\u53d8\u91cf\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>class TestController(tornado.web.RequestHandler):\n\n    def initialize(self): \n        self.uuid = uuid.uuid4().hex\n</code></pre> <ul> <li><code>prepare</code>\uff1a\u8c03\u7528\u5177\u4f53\u7684<code>get/post/...</code>\u65b9\u6cd5\u4e4b\u524d\uff0c\u4f1a\u8c03\u7528\u5b83\u3002\u5728\u8fd9\u91cc\u52a0\u5165\u52a0\u5165\u4e00\u4e9b\u6743\u9650\u63a7\u5236\u3002\u6bd4\u5982\u8bf4\uff0c\u9664\u4e86\u767b\u9646\u9875\u9762\u5916\uff0c\u9700\u8981\u767b\u9646\u6210\u529f\u4e86\u624d\u80fd\u8fdb\u884c\u8bbf\u95ee\u3002</li> </ul> <pre><code>class TestController(tornado.web.RequestHandler):\n\n    def prepare(self):\n        if not self.request.uri.startswith(self.get_login_url()) \\\n            and self.current_user is None:\n            self.redirect(self.get_login_url())\n</code></pre> <ul> <li><code>get/post/put/delete/...</code>\uff1a\u5177\u4f53\u4e1a\u52a1\u7684\u65b9\u6cd5</li> <li><code>get_error_html</code>\uff1a\u5f53\u6709\u5f02\u5e38\u629b\u51fa\u7684\u65f6\u5019\u4f1a\u8c03\u7528\u5b83, \u6bd4\u65b9\u8bf4\uff0c\u6211\u4eec\u8981\u6e32\u67d3\u81ea\u5df1\u7684\u9519\u8bef\u9875\u9762</li> </ul> <pre><code>def get_error_html(self, status_code, **kwargs):\n    return self.render_string(\n        'my_error.html', code=code, message=message, exception=exception\n    )\n</code></pre> <ul> <li><code>finish</code>\uff1a\u8fd9\u4e2a\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3atornado\u6700\u540e\u603b\u4f1a\u8c03\u7528finish\u4e00\u6b21\uff0c\u4e14\u4ec5\u4ec5\u8c03\u7528\u4e00\u6b21\u3002\u8fd9\u4e2a\u662f\u7531\u4e8e\u5b83\u662f\u5f02\u6b65\u6846\u67b6\u7684\u539f\u56e0\u3002</li> </ul> <p>\u9664\u4e86\u4e0a\u9762\u7684\u8c03\u7528\u987a\u5e8f\u4e2d\u7684\u51e0\u4e2a\u65b9\u6cd5\uff0c\u5e38\u7528\u7684\u5c31\u662f\u4e0b\u9762\u7684\u4e86:</p> <ul> <li><code>get_current_user</code>\uff1a\u5f97\u5230\u5f53\u524d\u7528\u6237\uff0c\u8fd9\u4e2a\u9700\u8981\u81ea\u5df1\u91cd\u5199\u3002\u4e00\u822c\u7684\u505a\u6cd5\uff0c\u4ececookie\u4e2d\u627e\u5230\u76f8\u5e94\u7684session\u4fe1\u606f\uff0c\u518d\u901a\u8fc7\u67e5session\u6216\u8005\u67e5db\u627e\u5230\u5177\u4f53\u7684\u7528\u6237</li> </ul> <pre><code>def get_current_user(self):\n    username = self.get_secure_cookie(\"user\")\n    return self.db.get(\"select * from user where username = %s\", username) if username else None\n</code></pre> <ul> <li><code>redirect</code>\uff1a302\u8df3\u8f6c\u5230\u67d0\u4e2a\u5730\u5740\u3002\u6211\u4e00\u822c\u559c\u6b22\u5c01\u88c5\u4e00\u4e0b\uff0c\u5c01\u88c5\u4e3a\uff1a</li> </ul> <pre><code>def redirect_to(self, path, notice = None):\n    self.notice(notice)\n    return self.redirect(path)\n</code></pre> <p>\u8fd9\u91cc\u7684notice\u5176\u5b9e\u7c7b\u4f3c\u4e8erails\u4e2d\u7684flash\u3002\u5229\u7528cookie\u5b9e\u73b0\u7684\u3002\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>def notice(self, value = None):\n    if value is not None:\n        _value = urllib2.quote(value.encode('utf-8'), 'true')\n        self.set_cookie(self.FLASH_COOKIE_KEY, _value)\n    else:\n        v = self.get_cookie(self.FLASH_COOKIE_KEY, None)\n        self.clear_cookie(self.FLASH_COOKIE_KEY)\n        return urllib.unquote_plus(v).decode('utf-8') if v is not None else v\n</code></pre> <ul> <li><code>render</code>\uff1a\u6e32\u67d3\u67d0\u4e2a\u9875\u9762\uff0c\u540c\u6837\u6211\u4e5f\u7ec6\u5316\u5c01\u88c5\u4e00\u4e0b\uff1a</li> </ul> <pre><code>def render_view(self, view_name, notice = None, **kwargs):\n    kwargs.update(filters)\n    _notice = notice or self.notice()\n    return self.render(view_name, notice = _notice, **kwargs)\n</code></pre> <p>\u8fd9\u6837\u6211\u5c31\u53ef\u4ee5\u4f20\u5165\u66f4\u591a\u7684\u9ed8\u8ba4\u6e32\u67d3\u7684\u4e1c\u897f</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#db","title":"DB\u64cd\u4f5c","text":"<p>tornado \u7684db\u64cd\u4f5c\u975e\u5e38\u7b80\u5355\u3002\u7b80\u5355\u5230\u6ca1\u6709\u3002\u4ec5\u4ec5\u53ea\u662f\u5bf9 mysql\u63d0\u4f9b\u4e86\u57fa\u672c\u7684\u5c01\u88c5\u3002</p> <ul> <li>\u6253\u5f00\u8fde\u63a5\uff1a</li> </ul> <pre><code>db = database.Connection(host, database, user=None, password=None, max_idle_time=7 * 3600)\n</code></pre> <ul> <li>\u67e5\u8be2\u591a\u6761\u8bb0\u5f55</li> </ul> <pre><code># \u53ef\u80fdsql\u6ce8\u5165\nfor user in db.query(\"SELECT * FROM user WHERE gender='f'\"): \n    print user.username, user.password\n\n# \u6ca1\u6709sql\u6ce8\u5165\ndb.query(\"SELECT * FROM user WHERE gender = %s\", 'f'): \n</code></pre> <ul> <li>\u67e5\u8be2\u5355\u6761\u8bb0\u5f55\uff1a\u6c38\u8fdc\u53ea\u662f\u8fd4\u56de\u7b2c1\u6761</li> </ul> <pre><code>db.get('SELECT * FROM user WHERE id = 1') # \u53ef\u80fd\u6709sql\u6ce8\u5165    \ndb.get('SELECT * FROM user WHERE id = %s', 1) # \u6ca1\u6709sql\u6ce8\u5165\n</code></pre> <ul> <li>\u5220\u9664/\u4fee\u6539/\u63d2\u5165</li> </ul> <pre><code>db.execute(sql, *parameters)\n</code></pre> <ul> <li>\u6279\u91cf \u7684\u5220\u9664/\u4fee\u6539/\u63d2\u5165</li> </ul> <pre><code>db.executemany(sql, *parameters)\n</code></pre> <p>\u6ce8\u610f\uff1a \u6ca1\u6709transaction\u7684\u5904\u7406\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#templates","title":"Templates","text":"<p>tornado\u7684templates\uff0c\u5c31\u662fMVC\u7684V\uff0c\u5373\uff1aview\u3002\u5bf9\u4e8e\u9875\u9762\u4e0a\u5e38\u7528\u7684tag\uff0c\u57fa\u672c\u548cdjango\u4e00\u6837\u3002\u6700\u5927\u7684\u5dee\u8ddd\u5c31\u662f\u6240\u6709\u7684\u90fd\u662fend\u7ed3\u5c3e\u3002\u4e0d\u50cfdjango\u7684endif\u7b49\u7b49\u3002</p> <p>\u5e38\u7528tag</p> <ul> <li><code>if</code> \u6bd4django\u7684\u597d\uff0cdjango\u6ca1\u6709<code>elif</code></li> </ul> <pre><code>{% if %} {% elif %} {% else %} {% end %}\n</code></pre> <ul> <li><code>block</code> \u548c django\u4e0d\u540c\u70b9\uff1a\u4e0d\u9700\u8981 endblock</li> </ul> <pre><code>{% block %} {% end %} \n</code></pre> <ul> <li><code>extend</code>\u548cdjango\u7684\u4e00\u6837</li> </ul> <pre><code>{% extend %}\n</code></pre> <ul> <li><code>for</code>\u5faa\u73af\u548cdjango\u4e00\u6837</li> </ul> <pre><code>{% for %} {% end %}\n</code></pre> <ul> <li>\u8bbe\u7f6e\u53d8\u91cf\uff1a</li> </ul> <p>\u4e00\u4e2a\u53d8\u91cf name = 'poy', \u8fd9\u4e2a\u5bf9\u4e8e\u4e00\u4e9bnavgation\u7684\u9ad8\u4eae\u5f88\u6709\u5e2e\u52a9\u3002</p> <pre><code>{% set name='poy' %}\n</code></pre> <ul> <li>\u5d4c\u5165python\u4ee3\u7801\uff1adjango\u91cc\u9762\u53ea\u80fd\u662ffilter\uff0c\u4f46\u662fTornado\u662f\u5141\u8bb8\u5728template\u91cc\u9762\u76f4\u63a5\u5199python\u7684\u4ee3\u7801\u7684\uff1a</li> </ul> <pre><code>{{ 'RyanPoy'.lower() }}\n</code></pre> <p>\u5bf9\u4e8epython\u4ee3\u7801\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c01\u88c5\u6210\u65b9\u6cd5\uff0c\u7136\u540e\uff0ctornado\u53ef\u4ee5\u76f4\u63a5\u5728handler render \u4e00\u4e2atemplate\u7684\u7684\u65f6\u5019\u628a\u76f8\u5e94\u7684function\u4ee5key-value\u7684\u65b9\u5f0f\u4f20\u8fc7\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e86\u3002</p> <pre><code>class HelloHandler(WebHandler):\n    return self.render('test.html', hello = lambda name: 'hello, %s' % name)\n</code></pre> <p>\u7136\u540e\u5728<code>test.html</code>\u91cc\u9762\u5199\uff1a</p> <pre><code>{{ hello('pengyi') }}\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#route","title":"Route","text":"<p>tornado\u7684url\u5c31\u662f\u4e0b\u9762\u7684\u5f62\u5f0f\uff1a</p> <pre><code>urls = [\n    (r'/user/show/', UserShow),\n    (r'/user/login/', UserLogin),\n    (r'/group/maillist/', GroupMaillist),\n]\n</code></pre> <p>\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u5c01\u88c5\uff0c\u7528\u6765\u81ea\u52a8\u7684\u8fdb\u884croute\uff0c\u9996\u5148\u8981\u6c42\uff0c\u9879\u76ee\u76ee\u5f55\u5982\u4e0b\uff1a</p> <p></p> <p>\u63a5\u4e0b\u6765\uff0c\u5c31\u662furl\u7684\u81ea\u52a8\u751f\u6210\u4e86\u3002\u6211\u5199\u4e86\u4e00\u4e2aroute.py\u7684\u6587\u4ef6\u3002 route.py</p> <pre><code>#coding: utf-8\nimport os\nimport sys\n\ndef __url_of(module_name):\n    return '/'.join([ v for v in module_name.split('_') if v ])\n\ndef reasoning():\n    from app.controllers.base_controller import BaseController\n    valible_suffix = ['/']\n    controllers_dir = 'app/controllers'\n    controllers_package = '.'.join(controllers_dir.split('/'))\n    controllers_dir = os.path.normpath(os.path.join(os.path.dirname(__file__), '..', controllers_dir))\n    urls = []\n    for _, _, files in os.walk(controllers_dir):\n        for f in files:\n            if f == 'base_controller.py' or not f.endswith('controller.py'):\n                continue\n\n            prefix_name = f[0:-3] # 3 \u4e3a len('.py')\n            model_name = prefix_name[0:-11]  # 11 \u4e3a len('_controller')\n            module_name = controllers_package + '.' + prefix_name\n            module = __import__(module_name, fromlist=['*']) # \u5bfc\u5165\u6240\u6709\u7684\u5185\u5bb9\u5230\u5185\u5b58\u4e2d\n\n            for class_name in dir(module):\n                try:\n                    obj = getattr(module, class_name)\n                    if obj is BaseController or not issubclass(obj, BaseController):\n                        continue\n                except TypeError, _:\n                    continue\n\n                clazz = getattr(module, class_name)\n                controller_file_name = module_name.split('.')[-1]\n                for suffix in valible_suffix:\n                    if controller_file_name != 'index_controller':\n                        url = '/%s/%s%s' % (__url_of(model_name), class_name.lower(), suffix)\n                    else: # \u5982\u679c\u662findex_controller\uff0c\u90a3\u4e48\u6620\u5c04\u53ea\u6709class name\uff0ccontroller name \u4e0d\u8981  \n                        url = '/%s%s' % (class_name.lower(), suffix)    \n                    urls.append((url, clazz))\n\n                if class_name.lower() == 'index':\n                    for suffix in valible_suffix:\n                        if controller_file_name != 'index_controller':\n                            url = '/%s%s' % (__url_of(model_name), suffix)\n                            urls.append((url, clazz))\n    return urls\n\n\ndef special():\n    import app.controllers as controllers\n    mapping = {\n        '/': controllers.user_controller.Login\n    }\n    urls = []\n    for url, clazz in mapping.iteritems():\n        urls.append((url, clazz)) \n    return urls\n\n\ndef all():\n    def merge(all_urls_dict, mappings):\n        for mapping in mappings:\n            url, clazz = mapping[0], mapping[1]\n            all_urls_dict[url] = (url, clazz)\n\n    def merge_of(reasoning, special):\n        all = {}\n        merge(all, reasoning)\n        merge(all, special)\n        urls = all.values()\n        urls.sort()\n        return urls\n\n    return merge_of(reasoning(), special())\n\n\ndef show(url_mappings):\n    for mapping in url_mappings:\n        print mapping\n\n\nif __name__ == '__main__':\n    name = 'all'\n    if len(sys.argv) == 2 and sys.argv[1] in ('all', 'reasoning', 'special'):\n        name = sys.argv[1]\n    urls = eval(name)()\n    show(urls)\n</code></pre> <p>\u5bf9\u4e8econtroller\u7684\u5199\u6cd5\u5982\u4e0b\uff1a</p> <p>company_controller.py</p> <pre><code>#coding: utf-8\n\nfrom app.controllers.base_controller import BaseController\n\nclass Index(BaseController):\n\n    def get(self):\n        pass\n\n    def post(self):\n        pass\n\n\nclass List(BaseController):\n\n    def get(self):\n        pass\n\n    def post(self):\n        pass\n\n\nclass Create(BaseController):\n\n    def get(self):\n        pass\n\n    def post(self):\n        pass\n\nclass Show(BaseController):\n\n    def get(self):\n        pass\n\n    def post(self):\n        pass\n\n\nclass Update(BaseController):\n\n    def get(self):\n        pass\n\n    def post(self):\n        pass\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#django","title":"\u5408\u4f53Django","text":"<p>\u4e4b\u524d\u6709\u63d0\u8fc7\uff0ctornado\u7684db\u975e\u5e38\u7684\u7b80\u5355\uff0c\u53ea\u6709\u4e00\u4e2a\u57fa\u4e8emysql\u7684\u57fa\u7840\u5c01\u88c5\uff0c\u800c\u8fd9\u4e2a\u5c01\u88c5\u751a\u81f3\u8fde\u4e8b\u52a1\u90fd\u6ca1\u6709\u3002\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u91c7\u7528tornado\u7684db\u80fd\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u5199sql\u8bed\u53e5\u3002</p> <p>\u5bf9\u4e8e\u5c0f\u578b\u7684\u7cfb\u7edf\u8fd8\u597d\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u4e2d/\u4e2d\u5927/\u5927\u578b\u4e1a\u52a1\u7cfb\u7edf\uff0csql\u5199\u8d77\u6765\u662f\u6bd4\u8f83\u8d39\u4e8b\u8d39\u65f6\u7684\uff0c\u6210\u672c\u5f88\u9ad8\uff0c\u5c24\u5176\u662f\u4ee5\u540e\u7684\u7ef4\u62a4\u6210\u672c\u3002</p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u7b2c3\u65b9\u7684ORM\u3002\u5728Python\uff0cORM\u6700\u8457\u540d\u7684\u83ab\u8fc7\u4e8e sqlalchemy \u548c sqlobject\u4e86\u3002</p> <p>\u90a3\u6211\u4eec\u5728tornado\u4e2d\u5c31\u7528\u5b83\u4eec\uff1f\u7b54\u6848\u662f\u5426\u5b9a\u7684\u3002\u539f\u56e0\u662f\uff1a\u6211\u4eec\u671f\u671b\u80fd\u591f\u6709\u4e00\u4e2a\u7c7b\u4f3cDJango\u7684Admin\u7ba1\u7406\u754c\u9762\u3002</p> <p>\u597d\u5427\uff0c\u7a0b\u5e8f\u5458\u603b\u662f\u5f88\u61d2\u60f0\u7684\uff0c\u54ea\u6015\u4e00\u4e2a\u5b57\u6bcd\u90fd\u4e0d\u613f\u610f\u591a\u6572\u3002\u7a0b\u5e8f\u5458\u603b\u662f\u5f88\u8d2a\u5fc3\u7684\uff0c\u54ea\u6015\u80fd\u591a\u4e00\u7247\u53f6\u5b50\uff0c\u4e5f\u8981\u4ec5\u4ec5\u7684\u6525\u7740\u624b\u4e2d\u3002</p> <p>\u73b0\u5728\u7684\u5b9e\u9645\u60c5\u51b5\u5c31\u6765\u4e86\uff0c\u6211\u4eec\u80fd\u4e0d\u80fd\u5229\u7528DJango\u63d0\u4f9b\u7684ORM\u548cAdmin\uff0c\u4e3aTornado\u4f7f\u7528\u5462 \uff1f</p> <p>\u7ecf\u8fc7\u4e00\u5929\u7684\u7814\u7a76\uff0c\u7b54\u6848\u662f\u80af\u5b9a\u7684\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5c31\u6765\u5177\u4f53\u7684\u8bb2\u8bb2\u3002</p> <p>\u751f\u6210Django\u9879\u76ee</p> <pre><code>django-admin.py startproject Tornadjango\n</code></pre> <p>\u521b\u5efa\u4e00\u4e2aapp \u6211\u4e60\u60ef\u53ea\u6709\u4e00\u4e2aapp\uff0c\u4e14\u547d\u540d\u4e3aapp</p> <pre><code>cd Tornadjango\npython manage.py startapp app\n</code></pre> <p>\u4fee\u6539app\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u540d \u8fd9\u4e2a\u4e5f\u662f\u6211\u4e60\u60ef\u4e86\u7684\u547d\u540d\u89c4\u5219, \u521b\u5efacontrollers.py, \u5220\u9664views.py\uff0c\u5728\u5de5\u7a0b\u76ee\u5f55\u4e0b\u9762\u521b\u5efaapplication.py\u3002\u6b64\u65f6\uff0c\u76ee\u5f55\u7ed3\u6784\u5e94\u8be5\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#urlpy","title":"\u4fee\u6539 url.py","text":"<pre><code>#coding: utf-8\n\nfrom django.conf.urls.defaults import patterns, include\nfrom django.contrib import admin\nimport django\nimport os\n\nadmin.autodiscover()\n\nMEDIA_ROOT = os.path.join(os.path.dirname(django.__file__), 'contrib', 'admin', 'media')\n\nurlpatterns = patterns('',\n    (r'^admin/media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',{'document_root': MEDIA_ROOT, 'show_indexes': False}),\n    (r'^admin/', include(admin.site.urls)),\n)\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#settingspy","title":"\u4fee\u6539settings.py","text":"<pre><code># Django settings for Tornadjango project.\nimport os\n\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nPROJECT_PATH = os.path.join(os.path.dirname(__file__))\n\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'tornadjango',                      # Or path to database file if using sqlite3.\n        'USER': '',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# On Unix systems, a value of None will cause Django to use the same\n# timezone as the operating system.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'Asia/Shanghai'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'zh-cn'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale\nUSE_L10N = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = ''\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = ''\n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = ''\n\n# URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# URL prefix for admin static files -- CSS, JavaScript and images.\n# Make sure to use a trailing slash.\n# Examples: \"http://foo.com/static/admin/\", \"/static/admin/\".\nADMIN_MEDIA_PREFIX = '/admin/media/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = 'oa8xplu6_lhlegtxpc(f+!tc=2$%&amp;oumz4zx2_1d*vio75z3c7'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n#     'django.template.loaders.eggs.Loader',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n)\n\nROOT_URLCONF = 'urls'\n\nTEMPLATE_DIRS = (\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templates\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable the admin:\n        'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n        'django.contrib.admindocs',\n    # customer app\n    'app',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#appcontrollerpy","title":"\u4fee\u6539app.controller.py","text":"<pre><code>#coding: utf8\n\nimport tornado.web\n\n\nclass HelloController(tornado.web.RequestHandler):\n\n    def get(self):\n        self.write('Hello, world ! \\n')\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#applicationpy","title":"\u4fee\u6539application.py","text":"<pre><code>#coding: utf-8\nimport os\nos.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\n\nimport settings\nimport app.urls\nfrom django.core.handlers.wsgi import WSGIHandler\nfrom tornado import options, wsgi\nimport tornado.httpserver\n\n\noptions.define('admin_port', default=9900, type=int, help='Run admin platform on the given port')\noptions.define('app_port', default=9901, type=int, help='Run app platform on the given port')\n\n\ntornado_env = dict(\n#    template_path       = os.path.join(os.path.dirname(__file__), 'templates'),\n#    static_path         = os.path.join(os.path.dirname(__file__), 'static'),\n    xsrf_cookies        = False,\n    cookie_secret       = \"11oETzKXQAGaYdkL5gEmGeJJFuYh7EQnp2XdTP1o/Vo=\",\n    autoescape          = None,\n    debug               = settings.DEBUG,\n    login_url           = '/',\n)\n\n\nif __name__ == \"__main__\":\n    options.parse_command_line()\n    address, admin_port, app_port = '0.0.0.0', options.options.admin_port, options.options.app_port \n\n    def admin_listen():\n        wsgi_app = wsgi.WSGIContainer(WSGIHandler())\n        tornado_app = tornado.web.Application([\n            ('/admin/(.*)', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n        ])\n        tornado.httpserver.HTTPServer(tornado_app).listen(admin_port)\n        print 'run admin platform on (%s:%s)' % (address, admin_port)\n\n    def app_listen():\n        tornado_app = tornado.web.Application(app.urls.urls)\n        tornado_app.listen(app_port)\n        print 'run app platform on (%s:%s)' % (address, app_port)\n\n    app_listen()\n    admin_listen()\n\n    tornado.ioloop.IOLoop.instance().start()\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#db_1","title":"\u521b\u5efadb","text":"<pre><code>python manager.py syncdb\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_3","title":"\u542f\u52a8","text":"<pre><code>python application.py\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_4","title":"\u6d4f\u89c8\u5668\u8bbf\u95ee","text":"<pre><code>http://localhost:9901/            # tornado app\nhttp://localhost:9900/admin/      # django admin\n</code></pre> <p>\u8fd9\u6837\u6574\u4e2a\u6b65\u9aa4\u5c31\u5b8c\u6210\u4e86\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#django_1","title":"\u52a0\u8f7dDjango\u73af\u5883","text":"<p>django\u5f88\u4f18\u79c0\u7684\uff0c\u53ea\u9700\u8981\u6709\u4e00\u4e2asettings.py\u5c31\u628adjango\u9700\u8981\u7684\u73af\u5883\u90fd\u5305\u542b\u4e86\u3002\u6240\u4ee5\uff0c\u5728application.py\u7684\u4e0a\u9762\u8981\u5199\u4e0a\uff1a</p> <pre><code>    import os\n    os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#django_2","title":"\u542f\u52a8django\u670d\u52a1","text":"<p>django\u662fhttp\u57fa\u4e8ewsgi\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u8981\u7528django\u7684admin\uff0c\u5c31\u5fc5\u987b\u542f\u52a8wsgi\u3002\u6240\u4ee5\uff0c\u5728application.py\u91cc\u9762\u6709\u8fd9\u6837\u7684\u4ee3\u7801\uff1a</p> <pre><code>def admin_listen():\n    wsgi_app = wsgi.WSGIContainer(WSGIHandler())\n    tornado_app = tornado.web.Application([\n        ('/admin/(.*)', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n    ])\n    tornado.httpserver.HTTPServer(tornado_app).listen(admin_port)\n    print 'run admin platform on (%s:%s)' % (address, admin_port)\n\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#urlspy","title":"\u8981\u4fee\u6539\u5de5\u7a0b\u7684urls.py","text":"<p>\u5bf9\u4e8e\u7eaf\u7cb9\u7684django\u73af\u5883\uff0cdjango\u7684admin\u5bf9\u5e94\u7684url\u53ef\u4ee5\u81ea\u52a8\u7684\u627e\u5230\u3002\u4f46\u662f\u7531\u4e8e\u6211\u4eec\u662f\u901a\u8fc7tornado\u7684IOLoop\u4ee3\u7406\u8fc7\u53bb\u7684\uff0c\u5c31\u9700\u8981\u81ea\u5df1\u624b\u52a8\u914d\u7f6e\u3002\u6240\u4ee5\uff0c\u5728urls.py\u91cc\u9762\u6709\u8fd9\u6837\u7684\u4ee3\u7801\uff1a</p> <pre><code>admin.autodiscover()\n\nMEDIA_ROOT = os.path.join(os.path.dirname(django.__file__), 'contrib', 'admin', 'media')\n\nurlpatterns = patterns('',\n    (r'^admin/media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',{'document_root': MEDIA_ROOT, 'show_indexes': False}),\n    (r'^admin/', include(admin.site.urls)),\n)\n</code></pre>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#settingspyadmin_media_prefix","title":"\u8981\u4fee\u6539settings.py\u91cc\u9762\u7684ADMIN_MEDIA_PREFIX","text":"<p>ADMIN_MEDIA_PREFIX \u9700\u8981\u914d\u7f6e\u6210\u4e3aurls.py\u91cc\u9762\u7684urlpatterns\u5bf9\u5e94\u7684\u5730\u5740\uff0c\u5426\u5219\u4f1a\u627e\u4e0d\u5230\u9759\u6001\u8d44\u6e90</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#djangoorm","title":"\u4f7f\u7528Django\u7684orm","text":"<p>\u600e\u4e48\u4f7f\u7528django\u7684orm\u3002\u4e0b\u9762\u6765\u8bf4\u4e00\u8bf4\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#orm","title":"orm\u672c\u8eab","text":"<p>\u76f4\u63a5\u4f7f\u7528django\u7684orm\uff0c\u4e0d\u7ba1\u662fdjango\u7684admin\u8fd8\u662ftornado\u90fd\u662f\u4e00\u6837\u7684\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_5","title":"\u4e8b\u52a1","text":"<p>\u76f4\u63a5\u770bDjango 1.3 \u7684\u4e8b\u52a1\u76f8\u5173\u7684\u6587\u6863</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#commit_on_success","title":"\u5bf9\u4e8ecommit_on_success\u7684\u65b9\u5f0f","text":"<p>\u4e00\u5b9a\u8981\u6ce8\u610f\u4e00\u4e0b\uff1a\u8981\u81ea\u52a8\u63d0\u4ea4\uff0c\u9700\u8981django\u7684middleware\u3002\u4f46\u662fdjango\u7684middelware\u53c8\u53ea\u6709\u5728django\u7684http\u73af\u5883\u4e2d\u624d\u751f\u6548\uff0c\u90a3\u4e48\u5bf9\u4e8etornado\u7684http\u73af\u5883\uff0c\u5982\u4f55\u751f\u6548\u5462\uff1f</p> <p>\u5927\u5bb6\u90fd\u77e5\u9053django\u7684middelware\u662f\u5728\u8fdb\u5165request\u4e4b\u540e\uff0c\u548cresponse\u4e4b\u524d\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u628amiddelware\u7684\u65b9\u6cd5\u62ff\u6765\u7528\u3002\u4e0b\u9762\u662fdjango\u7684traction middelware\u7684\u6e90\u4ee3\u7801\u3002</p> <p>django.middleware.transaction.py</p> <pre><code>class TransactionMiddleware(object):\n    \"\"\"\n    Transaction middleware. If this is enabled, each view function will be run\n    with commit_on_response activated - that way a save() doesn't do a direct\n    commit, the commit is done when a successful response is created. If an\n    exception happens, the database is rolled back.\n    \"\"\"\n    def process_request(self, request):\n        \"\"\"Enters transaction management\"\"\"\n        transaction.enter_transaction_management()\n        transaction.managed(True)\n\n    def process_exception(self, request, exception):\n        \"\"\"Rolls back the database and leaves transaction management\"\"\"\n        if transaction.is_dirty():\n            transaction.rollback()\n        transaction.leave_transaction_management()\n\n    def process_response(self, request, response):\n        \"\"\"Commits and leaves transaction management.\"\"\"\n        if transaction.is_managed():\n            if transaction.is_dirty():\n                transaction.commit()\n            transaction.leave_transaction_management()\n        return response\n</code></pre> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5199\u8fd9\u6837\u4e00\u4e2aBaseController\uff0c\u7528\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p> <p>base_controller.py</p> <pre><code>class BaseController(tornado.web.RequestHandler):\n\n    def initialize(self, application, request, **kwargs):\n        self.has_except = False\n\n    def prepare(self):\n        \"\"\"Enters transaction management\"\"\"\n        transaction.enter_transaction_management()\n        transaction.managed(True)\n\n    def get_error_html(self, status_code, **kwargs):\n        try:\n            self.has_except = True\n            if transaction.is_dirty():\n                transaction.rollback()\n            transaction.leave_transaction_management()\n        except:\n            pass\n        finally:\n            super(BaseController, self).get_error_html(status_code, **kwargs)\n\n    def finish(self, chunk=None):\n        try:\n            return super(BaseController, self).finish(chunk=chunk)\n        finally:\n            if not self.has_except and transaction.is_managed():\n                if transaction.is_dirty():\n                    transaction.commit()\n                transaction.leave_transaction_management()\n            django.db.reset_queries()\n            django.db.close_connection()\n</code></pre> <p>\u8fd9\u6837\u5c31\u8fbe\u5230\u4e86\u81ea\u52a8\u63d0\u4ea4\u6216\u8005\u56de\u6edatransaction\u7684\u76ee\u7684\u3002</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_6","title":"\u5f02\u6b65\u8c03\u7528","text":"<p>Tornado\u662f\u4e00\u4e2a\u5f02\u6b65\u6846\u67b6\uff0c\u5728\u5355\u72ec\u7684\u5b9e\u4f8b\u8dd1\u7684\u65f6\u5019\uff0c\u8981\u6ce8\u610f\u3002\u5bf9\u4e8e\u4e00\u4e9b\u54cd\u5e94\u5f88\u957f\u7684\u64cd\u4f5c\uff0c\u9700\u8981\u8fdb\u884c\u5f02\u6b65\u5904\u7406\u3002</p> <p>\u6bd4\u65b9\u8bf4\uff0c\u6709\u4e00\u4e2a\u7b2c3\u65b9\u7684api\u8c03\u7528\uff0c\u4e00\u822c\u90fd\u4fee\u6539\u4e3a\u5f02\u6b65\u5904\u7406\u3002\u8fd9\u6837\u80fd\u4fdd\u8bc1\u4f60\u7684\u670d\u52a1\u6b63\u5e38\u88ab\u54cd\u5e94\uff0c\u800c\u4e0d\u4f1a\u51fa\u73b0\u963b\u585e\u3002</p> <pre><code>class Download(BaseController):\n\n    @tornado.web.asynchronous\n    def get(self):\n\n        def _(response):\n            self.finish(response.body)\n\n        url = self.get_argument('download_url', '', True)\n        httpclient.AsyncHTTPClient().fetch(url, _)\n</code></pre> <p>\u4e0a\u9762\u662f\u8fd9\u79cd\u5199\u6cd5\u6bd4\u8f83\u9ebb\u70e6\uff0c\u540e\u6765\u5728tornado\u4e2d\u52a0\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u5199\u65b9\uff0c\u53eb\u505agen\uff0c\u770b\u8d77\u6765\u597d\u50cf\u5199\u540c\u6b65\u4ee3\u7801\u4e00\u6837\u3002</p> <pre><code>class Download(BaseController):\n\n    @tornado.web.asynchronous\n    @gen.engine\n    def get(self):\n        url = self.get_argument('download_url', '', True)\n        response = yield gen.Task(client.fetch, url)\n        self.finish(response.body)\n</code></pre> <p>\u6ce8\u610f @tornado.web.asynchronous \u8981\u5728 @gen.engine \u4e4b\u524d\u3002 \u662f\u4e0d\u662f\u7b80\u6d01\u4e86\u5f88\u591a\uff1f\u4f46\u539f\u7406\u662f\u4ec0\u4e48\uff1f</p>"},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#_7","title":"\u57fa\u7840\u77e5\u8bc6","text":""},{"location":"posts/a%20quick%20guide%20to%20using%20tornado/#yieldgenerator","title":"yield\u548cgenerator","text":"<p>\u5bf9\u4e8epython\u4e2d\u7684yield, \u5927\u5bb6\u5e94\u8be5\u90fd\u77e5\u9053\u3002</p> <pre><code># -*- coding:utf-8 -*-\n\ndef foo(n):\n    for i in range(n):\n        yield i\n\nfor x in foo(2):\n    print x\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8f93\u51fa\u7684\u5c31\u662f1\uff0c2\u3002\u6ce8\u610f\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u770b\u5230foo(1)\u5176\u5b9e\u8fd4\u56de\u7684\u5c31\u662f\u4e00\u4e2agenerator\u3002 \u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u65e6\u9047\u5230yield\u7684\u8bed\u53e5\uff0c\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2agenerator\u3002\u770b\u770b\u5b98\u65b9\u7684\u89e3\u91ca\uff1a</p> <p>Any function containing a yield keyword is a generator function; </p> <p>\u4ece\u4e0a\u9762\u7684\u57fa\u672c\u4ee3\u7801\u6765\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\uff1a\u9047\u5230yield i, \u5c31\u8fd4\u56dei\uff0c\u5e76\u4e14\u4ea7\u751f\u51fd\u6570\u7684\u4e34\u65f6\u4e2d\u65ad\uff0c\u63a7\u5236\u6743\u4ea4\u7ed9\u5916\u9762\u7684\u4ee3\u7801\u3002\u7b49\u5916\u9762\u7684\u4ee3\u7801\u6d88\u8017\u4e86\u8fd9\u4e2a\u8fd4\u56de\u503c\u540e\uff0c\u63a7\u5236\u6743\u5728\u4ea4\u56de\u7ed9\u51fd\u6570\uff0c\u4ece\u4e4b\u524d\u7684\u4e34\u65f6\u4e2d\u65ad\u5904\u518d\u63a5\u7740\u6267\u884c\u3002</p> <p>\u5f53\u7136\uff0c\u4e0a\u8ff0\u7684\u7406\u89e3\u5e76\u4e0d\u5b8c\u5168\u6b63\u786e\u3002\u6211\u4eec\u518d\u6765\u770b\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code># -*- coding:utf-8 -*-\ndef foo(n):\n    for i in range(n):\n        yield i\n\ng = foo(2)      # 1\nprint g.next()  # 2\nprint g.next()  # 3\nprint g.next()  # 4\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u8f93\u51fa\u7684\u662f\uff1a</p> <pre><code>0\n1\nTraceback (most recent call last):\n    File \"/Users/ryan/Workspace/myself/Tornadjango/app/tmp.py\", line 10, in &lt;module&gt;\n    print g.next()\nStopIteration\n</code></pre> <p>\u73b0\u5728\u660e\u767d\u4e86\u4e48\uff1f\u56e0\u4e3afoo\u65b9\u6cd5\u91cc\u9762\u6709yield\uff0c\u6240\u4ee5\u8c03\u7528\u5b83\u603b\u662f\u4f1a\u8fd4\u56de\u4e00\u4e2agenerator\u3002\u6240\u4ee5</p> <p>1 \u5f97\u5230\u4e00\u4e2agenerator\uff0c\u4e14\u57281\u7684\u65f6\u5019\uff0cfoo\u51fd\u6570\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u6267\u884c\u3002\u5728\u89e3\u91ca\u5668\u5206\u6790\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u53d1\u73b0foo\u91cc\u9762\u6709yield\uff0c\u5c31\u5df2\u7ecf\u628a\u5b83\u5f53\u6210\u4e00\u4e2agenerator\u4e86\u3002</p> <p>2 \u5f97\u5230generator\u7684\u7b2c\u4e00\u4e2a\u503c 0</p> <p>3 \u5f97\u5230generator\u7684\u7b2c\u4e8c\u4e2a\u503c 1</p> <p>4 \u7531\u4e8egenerator\u5df2\u7ecf\u5b8c\u6bd5\uff0c\u6240\u4ee5\uff0c\u629b\u51faStopIteration\u5f02\u5e38</p> <p>\u518d\u6765\u770b\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code># -*- coding:utf-8 -*-\n\ndef foo(n):\n    for i in range(n):\n        v = yield i\n        print 'v_%s = %s' % (i, v) # 5\n\ng = foo(2)       # 1\nprint g.next()   # 2\nprint g.next()   # 3\nprint g.next()   # 4\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c\u7ed3\u679c\u662f\uff1a</p> <pre><code>0\nv_0 = None\n1\nv_1 = None\nTraceback (most recent call last):\n    File \"/Users/ryan/Workspace/myself/Tornadjango/app/tmp.py\", line 11, in &lt;module&gt;\n    print g.next()\nStopIteration\n</code></pre> <p>\u53d1\u73b0\u4e86\u4e48\uff1f v\u7684\u503c\u662fNone\u54e6\u3002\u5982\u679c\u4f60\u662f\u4e00\u4e2a\u521d\u5b66\u8005\uff0c\u4f60\u80af\u5b9a\u4f1a\u8ba4\u4e3a v \u7684\u503c\u5e94\u8be5\u7b49\u4e8ei\u3002\u4f46\u662f\u5176\u5b9e\u4e0d\u662f\u7684\u3002\u90a3\u4e48v\u4e3a\u4ec0\u4e48\u7b49\u4e8eNone\u5462 \uff1f</p> <p>\u518d\u770b\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code># -*- coding:utf-8 -*-\ndef foo(n):\n    for i in range(n):\n        v = yield i\n        print 'v_%s = %s' % (i, v)\n\ng = foo(2)\nprint g.next()\nprint g.send('a')\n</code></pre> <p>\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>0\nv_0 = a\n1\n</code></pre> <p>\u53ef\u4ee5\u770b\u51fa\u3002g.send('a')\u7684\u65f6\u5019\uff0c\u628a'a'\u7684\u503c\u4ed8\u7ed9\u4e86v\u3002</p> <p>\u90a3\u6211\u4eec\u8fd9\u6837\u5199\u5462\uff1f</p> <pre><code># -*- coding:utf-8 -*-\n\ndef foo(n):\n    for i in range(n):\n        v = yield i\n        print 'v_%s = %s' % (i, v)\n\ng = foo(2)\nprint g.send('a')\n</code></pre> <p>\u51fa\u73b0\u4e86\u5982\u4e0b\u7684\u9519\u8bef\uff1a</p> <pre><code>    Traceback (most recent call last):\n      File \"/Users/ryan/Workspace/myself/Tornadjango/app/tmp.py\", line 9, in &lt;module&gt;\n        print g.send('a')\n    TypeError: can't send non-None value to a just-started generator\n</code></pre> <p>\u6240\u4ee5\u5f97\u51fa\u5982\u4e0b\u7684\u7ed3\u8bba\uff1a</p> <ul> <li> <p>generator.next() \u7b49\u4ef7\u4e8e generator.send(None)</p> </li> <li> <p>\u5bf9\u4e8e\u4e00\u4e2agenerator\uff0c\u4e00\u5b9a\u8981\u5148\u8c03\u7528\u4e00\u4e2anext\uff0c\u6216\u8005send(None)\u3002\u624d\u80fd\u518d\u8c03\u7528send(value)</p> </li> <li> <p>\u8c03\u7528send(value)\u7684\u65f6\u5019\uff0c\u4f1a\u628avalue\u7684\u503c\u8d4b\u7ed9\u91cc\u9762\u7684\u63a5\u6536\u8005\uff0c\u4e14\u662f\u4e0a\u4e00\u6b21next\u7684\u4e2d\u65ad\u4f4d\u7f6e</p> </li> </ul> <p>\u524d\u9762\uff0c\u6211\u4eec\u8bf4\u8fc7tornado\u7684web\u5f02\u6b65\u8c03\u7528\u3002\u4e0b\u9762\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u3002</p> <p>\u5148\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u3002</p> <pre><code># -*- coding:utf-8 -*-\nfrom tornado import ioloop, httpclient\n\ndef deal(response):\n    print 'response.length =', len(response.body)\n    ioloop.IOLoop.instance().stop()\n\n\ndef download(url):\n    http_client = httpclient.AsyncHTTPClient()\n    http_client.fetch(url, deal)\n\n\ndownload(\"http://www.baidu.com/\")    \nioloop.IOLoop.instance().start()\n</code></pre> <p>\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>response.length = 10233\n</code></pre> <p>\u5f88\u660e\u663e\u7684\u53ef\u4ee5\u770b\u51fa\u3002http_client\u7684fetch\u53ea\u662f\u4e00\u4e2a\u5f02\u6b65\u8c03\u7528\u3002\u9700\u8981\u4f20\u9012\u4e00\u4e2adeal\u65b9\u6cd5\uff0c\u4f5c\u4e3acallback\u6765\u53bb\u5904\u7406fetch\u540e\u7684response\u3002</p> <p>\u5982\u679c\u6211\u4eec\u7528tornado\u7684gen.engine\u65b9\u5f0f\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p> <pre><code>from tornado import ioloop, httpclient, gen\nfrom tornado.gen import Task\n\n@gen.engine\ndef download(url):\n    http_client = httpclient.AsyncHTTPClient()\n    response = yield Task(http_client.fetch, url)\n    print 'response.length =', len(response.body) \n    ioloop.IOLoop.instance().stop()\n\ndownload(\"http://www.baidu.com/\")\n\nioloop.IOLoop.instance().start()\n</code></pre> <p>\u8fd9\u6837\u5c31\u597d\u50cf\u4f60\u5728\u5199\u540c\u6b65\u4ee3\u7801\u4e00\u6837\u3002\u800c\u4e0d\u9700\u8981\u60f3\u4e4b\u524d\u90a3\u6837\u5904\u7406\u56de\u8c03\u4e86\u3002\u5982\u679c\u8981\u4f60\u5b9e\u73b0\u4e00\u4e2agen.engine \u548c Task \u4f60\u4f1a\u600e\u4e48\u5b9e\u73b0\u5462\uff1f\u6839\u636e\u6211\u4eec\u4e4b\u524d\u8c08\u7684yield \u548c generator\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5199\u4ee3\u7801\uff1a</p> <pre><code># -*- coding:utf-8 -*-\nfrom tornado import ioloop, httpclient\nimport functools\n\n\nclass MyTask(object):\n\n    def __init__(self, func, *args, **kwargs):\n        self.func = func\n        self.args = args\n        self.kwargs = kwargs\n\n    def callback(self, response):\n        try:\n            self.gen.send(response)\n        except StopIteration:\n            pass\n\n    def run(self, gen):\n        self.gen = gen\n        partail_func = functools.partial(self.func, *self.args, **self.kwargs)\n        partail_func(callback = self.callback)\n\n\ndef myengine(func):\n    def _(*args, **kwargs):\n        task_generator = func(*args, **kwargs)\n        task = task_generator.next()\n        task.run(task_generator)\n    return _\n\n\n@myengine\ndef download(url):\n    http_client = httpclient.AsyncHTTPClient()\n    response = yield MyTask(http_client.fetch, url)\n    print 'response.length =', len(response.body)\n    ioloop.IOLoop.instance().stop()\n\n\ndownload(\"http://www.baidu.com/\")\nioloop.IOLoop.instance().start()\n\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u7ed3\u679c\u662f\uff1a\n```python\nresponse.length = 10233\n</code></pre> <p>\u8fd9\u6837\uff0c\u5c5e\u4e8e\u6211\u4eec\u81ea\u5df1\u7684engine\u548ctask\u5c31\u51fa\u6765\u4e86\u3002</p>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/","title":"A user guild to using webpy","text":"<p>+++ title = \"webpy\u6559\u7a0b\" date = 2011-08-18</p> <p>categories = [\"Tutorials\"] tags = [\"Python\", \"Webpy\"] +++</p> <p>\u6765\u641c\u72d0\u540e\uff0c\u8fd9\u91cc\u505a\u7684\u7cfb\u7edf\u51e0\u4e4e\u90fd\u662f webpy + twsited \u5199\u7684\u3002\u6240\u4ee5\uff0c\u6709\u5fc5\u8981\u597d\u597d\u5b66\u4e60\u4e00\u4e0b\u8fd9\u4e24\u4e2a\u4e1c\u897f\u4e86\u3002\u4ece\u4eca\u5929\u5f00\u59cb\u4ecb\u7ecdwebpy\u3002</p>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/#server","title":"Server","text":"<p>\u5b89\u88c5</p> <pre><code>sudo pip install web.py\n</code></pre> <p>\u7b2c\u4e00\u4e2ademo</p> <pre><code>#coding: utf-8    \nimport web\n\nurls = (\n    '/', 'Index'\n)\n\nclass Index:\n\n    def GET(self):\n        return 'Hello, world ! GET \\n'\n\n    def POST(self):\n        return 'Hello, world ! POST \\n'\n\n\ndef start():\n    app = web.application(urls, globals())\n    app.run()\n\n\nif __name__ == '__main__':\n    start()\n</code></pre> <p>\u542f\u52a8</p> <pre><code>python webpy_test.py 0.0.0.0:4321\n</code></pre> <p>GET \u6d4b\u8bd5</p> <pre><code>&gt;&gt;&gt; curl http://localhost:4321\n&gt;&gt;&gt; Hello, world ! GET\n</code></pre> <p>POST \u6d4b\u8bd5</p> <pre><code>&gt;&gt;&gt; curl http://localhost:4321 -d't=1'\n&gt;&gt;&gt; Hello, world ! POST\n</code></pre> <p>\u603b\u7ed3 1. url \u7b80\u5355\u7684\u5c31\u662f\u5b57\u7b26\u4e32\uff0c\u548cdjango\u5f88\u7c7b\u4f3c 2. \u5bf9\u4e8eController\u800c\u8a00\uff0cget\u8bf7\u6c42\u6267\u884cGET\u65b9\u6cd5\uff0cpost\u8bf7\u6c42\u6267\u884cPOST\u65b9\u6cd5\uff0c\u4f30\u8ba1PUT\u548cDELETE\u7b49\u4e5f\u662f\u4e00\u6837\u7684</p>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/#template","title":"Template","text":"<p>\u516c\u53f8\u76f4\u63a5\u7528\u7684jinja\u3002jinja\u548cdjango template\u7684\u592a\u76f8\u4f3c\u4e86\u3002\u8bf4\u8bf4\u5982\u679c\u5728webpy\u4e2d\u4f7f\u7528jinja\u3002</p> <p>webpy_jinja.py</p> <pre><code>#coding: utf-8\n\nimport web\nfrom web.contrib.template import render_jinja\n\nurls = (\n    '/', 'hello'\n)\n\napp = web.application(urls, globals())\n\nrender = render_jinja(\n    'templates',           # \u6a21\u677f\u4f4d\u7f6e.\n    encoding = 'utf-8',    # \u7f16\u7801.\n)\n\n\nclass Hello:\n\n    def GET(self):\n        return render.hello(value='hello, World! GET')\n\n    def POST(self):\n        return web.seeother('/')\n\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre> <p>hello.html</p> <pre><code>{{value}}\n</code></pre> <p>\u8df3\u8f6c - Hello \u7684 GET \u8bf7\u6c42\u5c31\u662f\u76f4\u63a5\u7684\u670d\u52a1\u5668\u6e32\u67d3\u9875\u9762\uff0c\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef(\u4e00\u822c\u662fbrowser) - Hello \u7684 POST \u5c31\u662f\u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aefhttp code\uff0c\u7136\u540e\u5ba2\u6237\u7aef\u76f4\u63a5\u8fdb\u884c\u8df3\u8f6c\uff0c\u518d\u6b21\u8df3\u8f6c\u5230Hello\u7684GET\u4e0a</p>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/#_1","title":"\u6570\u636e\u5e93\u64cd\u4f5c","text":"<p>\u5f97\u5230\u8fde\u63a5</p> <pre><code>db = web.database(dbn='postgres', db='mydata', user='dbuser', pw='')\n</code></pre> <p>\u7b80\u5355\u67e5\u8be2</p> <pre><code>db.select(\n    'table_name',                   # \u8868\u540d\n    vars  = {'name'='py'},          # \u7528\u6765\u586b\u5145\u67e5\u8be2\u6761\u4ef6, \u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u5bf9\u5e94\u7684\u5c31\u662fwhere\u7684$name\n    where = 'username=$name',       # \u67e5\u8be2\u6761\u4ef6\n    what  = 'id, username',         # \u8868\u793a\u4f60\u8981\u67e5\u8be2\u7684field\u662f\u54ea\u4e9b\uff0c\u9ed8\u8ba4\u4e3a*\u3002\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u8868\u793a\u67e5\u8be2id\u548cusername\u5b57\u6bb5\n    order = 'age DESC',             # \u6392\u5e8f\u65b9\u5f0f\uff0c\u8868\u793a\u6309\u7167\u5e74\u9f84\u7684\u5012\u6392\n    group = 'gender',               # \u8868\u793a\u6309\u7167gender\u5206\u7ec4\n    limit = 10,                     # \u67e5\u8be210\u6761\n    offset = 10,                    # \u8868\u793a\u4ece\u7b2c10\u6761\u5f00\u59cb\n    _test  = True/False             # \u65e5\u5fd7\u6253\u5370\u51fa\u67e5\u8be2\u8bed\u53e5\uff0cTrue\u8868\u793a\u6253\u5370\uff0cFalse\u8868\u793a\u4e0d\u6253\u5370\u3002\u4e00\u822cdebug\u73af\u5883\u8bbe\u7f6e\u4e3aTrue\n)\n</code></pre> <p>\u9ad8\u7ea7\u67e5\u8be2</p> <pre><code>db.query(\"SELECT COUNT(*) AS total_users FROM users\")\n\n# \u6709sql\u6ce8\u5165\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a\u4e0b\u9762\u7684\ndb.query(\"SELECT * FROM user WHERE user.id = %s\" % 10) \n\n# \u6ca1\u6709sql\u6ce8\u5165\ndb.query(\"SELECT * FROM user WHERE user.id = $id\", vars = {'id': 10 }) \n</code></pre> <p>\u66f4\u65b0</p> <pre><code># \u628aid=10\u7684\u8bb0\u5f55\u7684username\u4fee\u6539\u4e3apengyi\ndb.update('table_name', where=\"id = 10\", username = \"pengyi\") \n</code></pre> <p>\u63d2\u5165</p> <pre><code>db.insert('table_name', username=\"Poy\") # \u63d2\u5165\u4e00\u6761\u8bb0\u5f55\uff0c\u8bbe\u7f6eusername=Poy\n</code></pre> <p>\u5220\u9664</p> <pre><code>db.delete('table_name', where=\"id = 10\") # \u5220\u9664id=10\u7684\u8bb0\u5f55\n</code></pre> <p>\u4e8b\u52a1</p> <pre><code>with db.transaction():\n    db.insert('table_name', name='py')\n    db.insert('table_name', name='pengyi')\n</code></pre> <p>\u90e8\u7f72\u5c31\u4e0d\u7528\u8bf4\u592a\u591a\u3002\u76f4\u63a5fastcgi</p>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/#cgi","title":"cgi\u914d\u7f6e","text":"<p>\u5b89\u88c5flug</p> <pre><code>sudo pip install flup\n</code></pre> <p>webpy\u542f\u52a8\u4ee3\u7801\u4e2d\u5199</p> <pre><code>def run_cgi(func, addr):\n    return flups.WSGIServer(func, multiplexed=False, bindAddress=addr).run()\n\ndef start_fcgi():\n    app = web.application(urls, globals())\n    web.wsgi.runwsgi = lambda func, addr = None: flups.WSGIServer(func, multiplexed=False, bindAddress=addr).run()\n    app.run()\n</code></pre>"},{"location":"posts/a%20user%20guild%20to%20using%20webpy/#_2","title":"\u6027\u80fd\u6d4b\u8bd5","text":"<p>webpy\u7684\u6027\u80fd\u771f\u7684\u662f\u4e0d\u6562\u606d\u7ef4\u554a</p> <p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>#coding: utf-8    \nimport web\n\nurls = (\n    '/', 'Index'\n)\n\nclass Index:\n    def GET(self):\n        return 'Hello, world !\\n'\n\ndef start():\n    app = web.application(urls, globals())\n    app.run()\n\nif __name__ == '__main__':\n    start()\n</code></pre> <p>\u5229\u7528apache \u7684ab\u8fdb\u884c\u538b\u529b\u6d4b\u8bd5\uff0c10\u5e76\u53d11000\u6b21\u8bf7\u6c42\uff1a</p> <pre><code>&gt;&gt;&gt; ab -c 10 -n 1000 http://192.168.95.222:4321/\n&gt;&gt;&gt; \n&gt;&gt;&gt; This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;\n&gt;&gt;&gt; Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\n&gt;&gt;&gt; Licensed to The Apache Software Foundation, http://www.apache.org/\n&gt;&gt;&gt; \n&gt;&gt;&gt; Benchmarking 192.168.95.222 (be patient)\n&gt;&gt;&gt; Completed 100 requests\n&gt;&gt;&gt; Completed 200 requests\n&gt;&gt;&gt; Completed 300 requests\n&gt;&gt;&gt; Completed 400 requests\n&gt;&gt;&gt; Completed 500 requests\n&gt;&gt;&gt; Completed 600 requests\n&gt;&gt;&gt; Completed 700 requests\n&gt;&gt;&gt; Completed 800 requests\n&gt;&gt;&gt; Completed 900 requests\n&gt;&gt;&gt; Completed 1000 requests\n&gt;&gt;&gt; Finished 1000 requests\n&gt;&gt;&gt; \n&gt;&gt;&gt; Server Software:        CherryPy/3.1.2\n&gt;&gt;&gt; Server Hostname:        192.168.95.222\n&gt;&gt;&gt; Server Port:            4321\n&gt;&gt;&gt; \n&gt;&gt;&gt; Document Path:          /\n&gt;&gt;&gt; Document Length:        16 bytes\n&gt;&gt;&gt; \n&gt;&gt;&gt; Concurrency Level:      10\n&gt;&gt;&gt; Time taken for tests:   6.269 seconds\n&gt;&gt;&gt; Complete requests:      1000\n&gt;&gt;&gt; Failed requests:        0\n&gt;&gt;&gt; Write errors:           0\n&gt;&gt;&gt; Total transferred:      108000 bytes\n&gt;&gt;&gt; HTML transferred:       16000 bytes\n&gt;&gt;&gt; Requests per second:    159.51 [#/sec] (mean)\n&gt;&gt;&gt; Time per request:       62.691 [ms] (mean)\n&gt;&gt;&gt; Time per request:       6.269 [ms] (mean, across all concurrent requests)\n&gt;&gt;&gt; Transfer rate:          16.82 [Kbytes/sec] received\n&gt;&gt;&gt; \n&gt;&gt;&gt; Connection Times (ms)\n&gt;&gt;&gt;               min  mean[+/-sd] median   max\n&gt;&gt;&gt; Connect:        1    1   0.3      1       5\n&gt;&gt;&gt; Processing:    29   61  14.7     61     373\n&gt;&gt;&gt; Waiting:       29   61  14.7     61     372\n&gt;&gt;&gt; Total:         30   62  14.7     62     374\n&gt;&gt;&gt; \n&gt;&gt;&gt; Percentage of the requests served within a certain time (ms)\n&gt;&gt;&gt;   50%     62\n&gt;&gt;&gt;   66%     64\n&gt;&gt;&gt;   75%     65\n&gt;&gt;&gt;   80%     66\n&gt;&gt;&gt;   90%     68\n&gt;&gt;&gt;   95%     70\n&gt;&gt;&gt;   98%     71\n&gt;&gt;&gt;   99%     73\n&gt;&gt;&gt;  100%    374 (longest request)\n</code></pre> <p>\u5e73\u5747\u6bcf\u79d2\u53ea\u80fd\u5728160s\uff0c\u592a\u4f4e\u4e86\u3002</p> <p>\u518d\u6765\u770b 100\u5e76\u53d1\uff0c2000\u8bf7\u6c42</p> <pre><code>&gt;&gt;&gt; ab -c 100 -n 2000 http://192.168.95.222:4321/\n&gt;&gt;&gt; \n&gt;&gt;&gt; This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;\n&gt;&gt;&gt; Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\n&gt;&gt;&gt; Licensed to The Apache Software Foundation, http://www.apache.org/\n&gt;&gt;&gt; \n&gt;&gt;&gt; Benchmarking 192.168.95.222 (be patient)\n&gt;&gt;&gt; Completed 200 requests\n&gt;&gt;&gt; Completed 400 requests\n&gt;&gt;&gt; Completed 600 requests\n&gt;&gt;&gt; Completed 800 requests\n&gt;&gt;&gt; Completed 1000 requests\n&gt;&gt;&gt; Completed 1200 requests\n&gt;&gt;&gt; Completed 1400 requests\n&gt;&gt;&gt; Completed 1600 requests\n&gt;&gt;&gt; Completed 1800 requests\n&gt;&gt;&gt; Completed 2000 requests\n&gt;&gt;&gt; Finished 2000 requests\n&gt;&gt;&gt; \n&gt;&gt;&gt; \n&gt;&gt;&gt; Server Software:        CherryPy/3.1.2\n&gt;&gt;&gt; Server Hostname:        192.168.95.222\n&gt;&gt;&gt; Server Port:            4321\n&gt;&gt;&gt; \n&gt;&gt;&gt; Document Path:          /\n&gt;&gt;&gt; Document Length:        20 bytes\n&gt;&gt;&gt; \n&gt;&gt;&gt; Concurrency Level:      100\n&gt;&gt;&gt; Time taken for tests:   15.158 seconds\n&gt;&gt;&gt; Complete requests:      2000\n&gt;&gt;&gt; Failed requests:        0\n&gt;&gt;&gt; Write errors:           0\n&gt;&gt;&gt; Total transferred:      224000 bytes\n&gt;&gt;&gt; HTML transferred:       40000 bytes\n&gt;&gt;&gt; Requests per second:    131.94 [#/sec] (mean)\n&gt;&gt;&gt; Time per request:       757.902 [ms] (mean)\n&gt;&gt;&gt; Time per request:       7.579 [ms] (mean, across all concurrent requests)\n&gt;&gt;&gt; Transfer rate:          14.43 [Kbytes/sec] received\n&gt;&gt;&gt; \n&gt;&gt;&gt; Connection Times (ms)\n&gt;&gt;&gt;               min  mean[+/-sd] median   max\n&gt;&gt;&gt; Connect:        1   37 203.5      1    1207\n&gt;&gt;&gt; Processing:    58  707 915.3    640    6597\n&gt;&gt;&gt; Waiting:       57  707 915.3    639    6596\n&gt;&gt;&gt; Total:         61  744 1076.6    641    7802\n&gt;&gt;&gt; \n&gt;&gt;&gt; Percentage of the requests served within a certain time (ms)\n&gt;&gt;&gt;   50%    641\n&gt;&gt;&gt;   66%    647\n&gt;&gt;&gt;   75%    650\n&gt;&gt;&gt;   80%    652\n&gt;&gt;&gt;   90%    667\n&gt;&gt;&gt;   95%   2641\n&gt;&gt;&gt;   98%   7173\n&gt;&gt;&gt;   99%   7674\n&gt;&gt;&gt;  100%   7802 (longest request)\n</code></pre> <p>\u6bcf\u79d2\uff1a131\u4e2a\u8bf7\u6c42\uff0c\u54cd\u5e94\u65f6\u95f4\u662f\uff1a757ms\u5de6\u53f3\u3002\u65e0\u6cd5\u5fcd\u53d7\u4e86\u3002</p>"},{"location":"posts/ab%20testing/","title":"Ab testing","text":"<p>+++ title = \"\u4e5f\u8c08AB\u6d4b\u8bd5\" date = 2020-12-25</p> <p>categories = [\"Tech\"] tags = [\"Testing\"] +++</p>"},{"location":"posts/ab%20testing/#_1","title":"\u5f15\u5b50","text":"<p>\u524d\u4e00\u9635\u5b50\uff0c\u56e2\u961f\u505a\u4e86\u4e00\u5957AB\u6d4b\u8bd5\u7684\u901a\u7528\u89e3\u51b3\u65b9\u6848\u3002\u5728\u8fd9\u91cc\uff0c\u4e0d\u60f3\u804a\u5177\u4f53\u600e\u4e48\u5b9e\u73b0\u7684\u3002\u53cd\u800c\u60f3\u804a\u4e00\u4e0b\u600e\u6837\u624d\u662f\u6b63\u786eAB\u6d4b\u8bd5\u3002\u56e0\u4e3a\u5728\u5185\u90e8\u63a8\u5e7f\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u5927\u5bb6\u5bf9AB\u6d4b\u8fd8\u662f\u4e0d\u660e\u767d\u3002 - \u4e0d\u660e\u767d\u4e3a\u4ec0\u4e48\u8981AB\u6d4b\u8bd5 - \u4e0d\u660e\u767d\u5982\u4f55\u505aAB\u6d4b\u8bd5</p>"},{"location":"posts/ab%20testing/#_2","title":"\u804a\u804a\u73b0\u5b9e","text":"<p>\u73b0\u5b9e\u4e2d\uff0c\u4e0d\u505aAB\u6d4b\u8bd5\uff0c\u800c\u662f<code>\u60f3\u5f53\u7136</code>\u7684\u4f8b\u5b50\u5f88\u591a\u3002\u4f8b\u5982\uff1a 1. \u611f\u5192\u4e86\uff0c\u5403\u4e86\u611f\u5192\u836f\uff0c\u7b2c2\u5929\u611f\u5192\u597d\u4e86\uff0c\u6240\u4ee5\u611f\u5192\u662f\u611f\u5192\u836f\u6cbb\u597d\u7684 2. \u6691\u5047\u671f\u95f4\uff0c\u64ad\u653e\u4ea7\u54c1\u8fdb\u884c\u4e86\u6539\u7248\uff0c\u8fd0\u8425\u4e5f\u4e0a\u4e86\u65b0\u7684\u64ad\u653e\u5185\u5bb9\uff0cDAU\u6da8\u4e86\u3002\u4f46\u539f\u56e0\u8bf4\u4e0d\u6e05\u695a\u4e86\u3002     - \u4ea7\u54c1\u8bf4\uff1a\u662f\u64ad\u653e\u4ea7\u54c1\u6539\u7248\u7684\u539f\u56e0     - \u8fd0\u8425\u8bf4\uff1a\u662f\u56e0\u4e3a\u4e0a\u4e86\u65b0\u5185\u5bb9\u7684\u539f\u56e0     - \u5176\u4ed6\u4eba\u8bf4\uff1a\u662f\u56e0\u4e3a\u5047\u671f\u6765\u4e86\uff0c\u81ea\u7136\u6d41\u91cf\u589e\u957f</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u3002</p> <p>\u5728\u4f8b1\u4e2d\uff1a\u5176\u5b9e\u8fd8\u6709\u4e00\u90e8\u5206\u4eba\u5403\u4e86\u611f\u5192\u836f\u540e\uff0c\u7b2c2\u5929\u611f\u5192\u5e76\u6ca1\u6709\u597d\uff0c\u800c\u662f\u518d\u8fc7\u51e0\u5929\u624d\u597d\u7684\u3002\u4e5f\u6709\u4e00\u90e8\u5206\u4eba\u6ca1\u6709\u5403\u611f\u5192\u836f\uff0c\u7b2c2\u5929\u611f\u5192\u4e5f\u597d\u4e86\u3002\u5f88\u660e\u663e\uff0c\u5403\u4e86\u611f\u5192\u836f\u7b2c2\u5929\u597d\u7684\uff0c\u53ea\u662f\u611f\u5192\u4eba\u7fa4\u7684\u4e00\u90e8\u5206\u3002\u6240\u4ee5\uff0c\u4e0d\u80fd\u4ee5\u504f\u6982\u5168\u3002\u56e0\u6b64\uff0c\u4f8b1\u7684\u7ed3\u8bba\u662f\u7ad9\u4e0d\u4f4f\u7684\u3002</p> <p>\u5728\u4f8b2\u4e2d\uff1aDAU\u4e0a\u6da8\uff0c\u5176\u5b9e\u67093\u4e2a\u6761\u4ef6\u5171\u540c\u4f5c\u7528\u7684\u7ed3\u679c\u3002 - \u4ea7\u54c1\u6539\u7248 - \u65b0\u5185\u5bb9\u4e0a\u7ebf - \u6691\u5047\u671f\u95f4</p> <p>\u4f46\u662f\u518d\u4ed4\u7ec6\u60f3\u60f3\u4e0a\u9762\u7684\u6bcf\u4e00\u4e2a\u6761\u4ef6\uff1a - \u4ea7\u54c1\u6539\u7248\u5c31\u4e00\u5b9a\u662f\u6b63\u5411\u7684\uff1f\u4e5f\u8bb8\u6539\u7248\u540e\u5e76\u6ca1\u6709\u63d0\u5347\u7528\u6237\u4f53\u9a8c\uff0c\u751a\u81f3\u67d0\u4e9b\u5730\u65b9\u53cd\u800c\u662f\u964d\u4f4e\u4e86\u7528\u6237\u4f53\u9a8c\u7684\u3002 - \u65b0\u5185\u5bb9\u4e0a\u7ebf\u5c31\u4e00\u5b9a\u662f\u6b63\u5411\u7684\uff1f\u4e5f\u8bb8\u65b0\u7684\u5185\u5bb9\u5e76\u4e0d\u4e00\u5b9a\u9002\u5408\u8fd9\u6bb5\u65f6\u95f4\u7684\u4eba\u7fa4\u7279\u5f81\uff0c\u4e5f\u8bb8\u53cd\u800c\u4f7f\u5f97\u7528\u6237\u6d41\u5931\u3002 - \u6691\u5047\u671f\u95f4\u4ece\u7406\u8bba\u4e0a\u8bb2\u4f1a\u4f7f\u5f97\u81ea\u7136\u6d41\u91cf\u4e0a\u6da8\u3002\u55ef\uff0c\u662f\u7684\uff01\u8c8c\u4f3c\u53ea\u6709\u8fd9\u4e2a\u80fd\u7ad9\u4f4f\u811a\uff0c\u4f46\u662f\u8fd9\u4e2a\u4e5f\u53ea\u662f\u7ecf\u9a8c\u4e4b\u8c08\u3002</p> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u672c\u8d28\u4e0a\u662f\u81ea\u8ba4\u4e3a\u5f97\u5230\u4e86\u4e00\u4e2a\u56e0\u679c\u7ed3\u8bba\u3002\u4f46\u662f\u8bf7\u6ce8\u610f\uff1a\u6bcf\u5f53\u6211\u4eec\u5f97\u51fa\u4e00\u4e2a\u56e0\u679c\u7ed3\u8bba\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u52a0\u500d\u5c0f\u5fc3\uff0c\u4e00\u5b9a\u8981\u518d\u4e09\u7684\u53cd\u95ee\u81ea\u5df1\uff0c\u8fd9\u4e2a\u56e0\u679c\u662f\u771f\u6b63\u7684\u56e0\u679c\u4e48\uff1f\u6211\u4eec\u662f\u4e0d\u662f\u628a\u4e00\u4e2a\u7ecf\u9a8c\u7ed3\u8bba\u5f53\u6210\u4e86\u4e00\u4e2a\u56e0\u679c\u7ed3\u8bba\uff1f</p> <p>\u5176\u5b9e\u56e0\u679c\u5173\u7cfb\uff0c\u9700\u8981\u7528\u4e00\u5957\u884c\u4e4b\u6709\u6548\u7684\u79d1\u5b66\u65b9\u6cd5\u548c\u79d1\u5b66\u6807\u51c6\u6765\u68c0\u9a8c\u3002\u53ea\u6709\u8fd9\u6837\uff0c\u624d\u80fd\u786e\u5b9a\u5b83\u662f\u5426\u771f\u6b63\u53cd\u6620\u4e86\u4e8b\u7269\u7684\u56e0\u679c\u5173\u7cfb\u3002\u800c\u8fd9\u79cd\u79d1\u5b66\u65b9\u6cd5\u548c\u6807\u51c6\u5c31\u662f<code>\u5bf9\u7167\u5b9e\u9a8c</code></p>"},{"location":"posts/ab%20testing/#_3","title":"\u5bf9\u7167\u5b9e\u9a8c","text":"<p>\u4ec0\u4e48\u662f\u5bf9\u7167\u5b9e\u9a8c\u5462\uff1f\u901a\u4fd7\u6765\u8bf4\uff0c\u5bf9\u7167\u5b9e\u9a8c\u5c31\u662f\u5c06\u5b9e\u9a8c\u5bf9\u8c61\u968f\u673a\u5206\u6210\u4e24\u4e2a\u7ec4\uff0c\u4e00\u4e2a\u5b9e\u9a8c\u7ec4 (treatment group)\uff0c\u4e00\u4e2a\u5bf9\u7167\u7ec4 (control group)\u3002\u5bf9\u5b9e\u9a8c\u7ec4\u4eba\u4e3a\u5730\u4fee\u6539\u67d0\u4e00\u4e2a\u63a7\u5236\u53d8\u91cf\uff0c\u6765\u5b9e\u65bd\u5b9e\u9a8c\uff0c\u800c\u5bf9\u7167\u7ec4\u4ec5\u662f\u7528\u6765\u505a\u5bf9\u6bd4\u3002\u901a\u8fc7\u5b9e\u9a8c\u7ec4\u548c\u5bf9\u7167\u7ec4\u7684\u6bd4\u8f83\uff0c\u4ece\u800c\u9000\u51fa\u63a7\u5236\u53d8\u91cf\u548c\u7ed3\u679c\u4e4b\u95f4\u662f\u5426\u6709\u56e0\u679c\u5173\u7cfb\u3002</p> <p>\u6765\u770b\u4e00\u4e2a<code>\u6b63\u786e\u7684</code>\u5bf9\u7167\u5b9e\u9a8c\u7684\u4f8b\u5b50\uff1a \u300e\u574f\u8840\u75c5\u300f\u5728\u5386\u53f2\u4e0a\u66fe\u662f\u4e25\u91cd\u5a01\u80c1\u4eba\u7c7b\u5065\u5eb7\u7684\u4e00\u79cd\u75be\u75c5\uff0c\u5c24\u5176\u5728\u8fdc\u6d0b\u822a\u884c\u7684\u6c34\u624b\u4e2d\u66f4\u4e3a\u4e25\u91cd\u3002\u572818\u4e16\u7eaa\uff0c\u4e00\u4f4d\u82f1\u56fd\u8239\u957f\u53d1\u73b0\uff0c\u5728\u4e00\u4e9b\u5730\u4e2d\u6d77\u56fd\u5bb6\u7684\u6d77\u519b\u8230\u8247\u4e0a\u670d\u5f79\u7684\u8239\u5458\u6ca1\u6709\u574f\u8840\u75c5\u3002\u4ed6\u6ce8\u610f\u5230\uff0c\u8fd9\u4e9b\u8239\u5458\u7684\u98df\u7269\u914d\u7ed9\u4e2d\u542b\u6709\u67d1\u6a58\u7c7b(citrus)\u6c34\u679c\u3002\u4e8e\u662f\uff0c\u4e3a\u4e86\u5f04\u6e05\u771f\u6b63\u7684\u539f\u56e0\uff0c\u8fd9\u4f4d\u8239\u957f\u5c06\u4ed6\u7684\u8239\u5458\u4eec<code>\u968f\u673a</code>\u5206\u4e3a\u4e24\u7ec4\uff1a\u5176\u4e2d\u4e00\u7ec4\u5728\u65e5\u5e38\u996e\u98df\u4e2d\u52a0\u5165\u9178\u6a59(limes)\uff0c\u800c\u53e6\u5916\u4e00\u7ec4\u7ef4\u6301\u539f\u6765\u7684\u98df\u8c31\u4e0d\u53d8\u3002\u7ed3\u679c\u901a\u8fc7\u5bf9\u6bd4\u53d1\u73b0\uff0c\u5b9a\u671f\u98df\u7528\u9178\u6a59\u7684\u4e00\u7ec4\u8239\u5458\uff0c\u771f\u7684\u9632\u6b62\u4e86\u574f\u8840\u75c5\u7684\u53d1\u751f\u3002\u540e\u6765\uff0c\u5b9a\u671f\u98df\u7528\u67d1\u6a58\u7c7b\u6c34\u679c\u5c31\u53d8\u6210\u4e86\u82f1\u56fd\u6c34\u624b\u5fc5\u987b\u9075\u5faa\u7684\u4e00\u79cd\u89c4\u5b9a\u3002</p> <p>\u4e0a\u8ff0\u7684\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a<code>\u5178\u578b\u4e14\u6210\u529f</code>\u7684\u5bf9\u7167\u5b9e\u9a8c\u3002\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bf4\u5462\uff1f\u56e0\u4e3a\u8239\u957f\u5bf9\u4e8e\u8239\u5458\u8fdb\u884c\u5206\u7ec4\u65f6\u6709\u4e00\u4e2a\u5f88\u5173\u952e\u7684\u7ec6\u8282\uff1a\u662f<code>\u968f\u673a</code>\u5206\u7ec4\u7684\u3002\u9996\u5148\uff0c\u4e24\u4e2a\u7ec4\u7684\u8239\u5458\u90fd\u6765\u81ea\u540c\u4e00\u8258\u8239\uff0c\u4ed6\u4eec\u5e73\u5e38\u7684\u751f\u6d3b\u6761\u4ef6\u5927\u4f53\u76f8\u540c\u3002\u5982\u679c\u4e0d\u662f\u6765\u81ea\u540c\u4e00\u8258\u8239\uff0c\u5c31\u4f1a\u5f15\u5165\u989d\u5916\u7684\u5e72\u6270\u56e0\u7d20\uff0c\u6bd4\u5982\u8239\u5458\u7684\u822a\u7ebf\u4e0d\u540c\uff0c\u51fa\u8eab\u4e0d\u540c\uff0c\u6574\u4f53\u5065\u5eb7\u72b6\u51b5\u53ef\u80fd\u4e5f\u4e0d\u540c\uff0c\u6700\u7ec8\u5bfc\u81f4\u5b9e\u9a8c\u5931\u8d25\u3002\u5176\u6b21\uff0c\u4e24\u4e2a\u7ec4\u662f<code>\u968f\u673a</code>\u5206\u6d3e\u7684\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u300c\u9009\u62e9\u6027\u504f\u5dee\u300d\u3002</p> <p>\u518d\u6765\u770b\u4e00\u4e2a<code>\u9519\u8bef\u7684</code>\u5bf9\u7167\u5b9e\u9a8c\u7684\u4f8b\u5b50\uff1a \u4ea7\u54c1\u6539\u7248\uff0c\u4e3a\u5224\u65ad\u8fd9\u4e2a\u6539\u7248\u662f\u5426\u6b63\u786e\u3002\u5728\u4e0a\u7ebf\u524d\uff0c\u505a\u4e86AB\u6d4b\u8bd5\u3002\u968f\u673a\u7684\u6311\u9009\u4e86\u4e00\u90e8\u5206\u7537\u6027\u7528\u6237\uff0c\u5c06\u5176\u968f\u673a\u5206\u6210\u4e86\u4e24\u7ec4\uff0c\u5206\u522b\u4f7f\u7528\u65b0\u7248\u672c\uff08\u5b9e\u9a8c\u7ec4\uff09\u548c\u8001\u7248\u672c\uff08\u5bf9\u7167\u7ec4\uff09\u3002\u6839\u636e\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u7528\u6237\u7684\u4f7f\u7528\u65f6\u957f\u4f5c\u4e3a\u5224\u65ad\u4f9d\u636e\u3002\u53d1\u73b0\u65b0\u7248\u672c\u7528\u6237\u4f7f\u7528\u65f6\u957f\u660e\u663e\u9ad8\u4e8e\u8001\u7248\u672c\uff0c\u6240\u4ee5\uff0c\u5f97\u51fa\u65b0\u7248\u672c\u4f18\u4e8e\u8001\u7248\u672c\u7684\u7ed3\u8bba\u3002</p> <p>\u4e0a\u8ff0\u4f8b\u5b50\u5c31\u662f\u4e00\u4e2a<code>\u5178\u578b\u4e14\u5931\u8d25</code>\u7684\u5bf9\u7167\u5b9e\u9a8c\u3002\u5b83\u72af\u4e86\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u9519\u8bef\uff1a\u5c31\u662f\u5728\u4e00\u5f00\u59cb\u6311\u9009\u7528\u6237\u7684\u65f6\u5019\uff0c\u90fd\u4e3a\u7537\u6027\u3002\u8fd9\u6837\uff0c\u5b9e\u9a8c\u5bf9\u8c61\u5e76\u4e0d\u968f\u673a\uff0c\u4ece\u800c\u5f97\u51fa\u4e86\u9519\u8bef\u7684\u56e0\u679c\u5173\u7cfb\u3002\u56e0\u4e3a\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u5176\u5b9e\u53ea\u80fd\u8bf4\u660e\uff1a\u5728\u7537\u6027\u7528\u6237\u4e2d\uff0c\u65b0\u7248\u672c\u8981\u4f18\u4e8e\u8001\u7248\u672c\u3002</p> <p>\u6765\u770b\u53e6\u5916\u4e00\u4e2a<code>\u9519\u8bef\u7684</code>\u5bf9\u7167\u5b9e\u9a8c\u7684\u4f8b\u5b50\uff1a \u540c\u6837\u7684\u662f\u4ea7\u54c1\u6539\u7248\uff0c\u4e3a\u5224\u65ad\u8fd9\u4e2a\u6539\u7248\u662f\u5426\u6b63\u786e\u3002\u5728\u4e0a\u7ebf\u524d\uff0c\u505a\u4e86AB\u6d4b\u8bd5\u3002\u628a\u5168\u91cf\u7528\u6237\u5206\u6210\u4e86\u4e24\u7ec4\uff0c\u5b9e\u9a8c\u7ec4\u7528\u6237\u6570\u5360\u6bd410/256\uff0c\u5bf9\u7167\u7ec4\u7528\u6237\u6570\u5360\u6bd4246/256\u3002\u6839\u636e\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u4e24\u7ec4\u7528\u6237\u7684\u4f7f\u7528\u65f6\u957f\u4f5c\u4e3a\u5224\u65ad\u4f9d\u636e\uff0c\u4ece\u800c\u5f97\u51fa\u65b0\u7248\u672c\u662f\u5426\u4f18\u4e8e\u8001\u7248\u672c\u7684\u7ed3\u8bba\u3002</p> <p>\u4e0a\u9762\u662f\u6211\u53f8\u771f\u5b9e\u7684\u6848\u4f8b\uff0c\u800c\u4e14\u57fa\u672c\u4e0a\u6240\u6709\u4ea7\u54c1\u529f\u80fd\u4e0a\u7ebf\u524d\u5168\u90e8\u90fd\u662f\u8fd9\u6837\u7684\u65b9\u5f0f\u6765\u505a\u5bf9\u7167\u5b9e\u9a8c\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5206\u914d\u6bd4\u4f8b\u662f\u4ee5256\u4e3a\u5206\u6bcd\uff1f\u56e0\u4e3a\u4e92\u8054\u7f51\u4ea7\u54c1\u7ecf\u5e38\u4f1a\u4e3a\u8bbe\u5907\uff08\u7ec8\u7aef\uff09\u751f\u6210\u4e00\u4e2a16\u8fdb\u5236\u7684\u8bbe\u5907\u53f7\u3002\u7136\u540e\u8bbe\u5907\u53f7\u7684\u524d\u4e24\u4f4d\u662f\u4ece00\u5230FF\uff0c\u521a\u597d\u662f256\u7684\u8303\u56f4\u3002</p> <p>\u4e3a\u4ec0\u4e48\u662f10/256\uff0c246/256\u7684\u5206\u914d\u6bd4\u4f8b\uff1f\u8bf4\u5b9e\u8bdd\uff0c10 \u548c 246 \u662f\u62cd\u8111\u888b\u60f3\u7684\uff0c\u4f46\u57fa\u672c\u4e0a\u90fd\u9075\u5faa\u4e00\u4e2a\u539f\u5219\uff1a\u5b9e\u9a8c\u7ec4\u5fc5\u987b\u5148\u62ff\u5c11\u91cf\u6765\u6d4b\u8bd5\u3002\u56e0\u4e3a\u8fd9\u6837\u4e0d\u4f1a\u5f71\u54cd\u6574\u4f53\u7684\u6570\u636e\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u72af\u4e86\u76f8\u540c\u7684\u7684\u9519\u8bef\uff1a\u5c31\u662f\u5728\u4e00\u5f00\u59cb\u6311\u9009\u7528\u6237\u7684\u65f6\u5019\uff0c\u4e0d\u968f\u673a\uff0c\u4e00\u90e8\u5206\u5360\u6bd410/256\uff0c\u4e00\u90e8\u5206\u5360\u6bd4246\u3002\u8fd9\u6837\u4e5f\u5f97\u51fa\u4e86\u9519\u8bef\u7684\u56e0\u679c\u5173\u7cfb\u3002</p> <p>\u7531\u4e0a\u53ef\u89c1\uff0c\u6211\u4eec\u8bbe\u8ba1\u5b9e\u9a8c\u6765\u63a2\u7d22\u6216\u9a8c\u8bc1\u56e0\u679c\u5f8b\u7684\u65f6\u5019\uff0c\u9700\u8981\u52a0\u500d\u5c0f\u5fc3\u3002\u56e0\u4e3a\u5b9e\u9a8c\u672c\u8eab\u5c31\u53ef\u80fd\u5b58\u5728\u9677\u9631\u548c\u9009\u62e9\u6027\u504f\u5dee\u3002</p>"},{"location":"posts/ab%20testing/#_4","title":"\u7ed3\u8bba","text":"<p>\u901a\u7bc7\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u4e5f\u5c31\u662f\u4e3a\u4e86\u6765\u89e3\u7b54\u672c\u6587\u5f00\u59cb\u7684\u8fd9\u4e24\u4e2a\u95ee\u9898\u3002\u6700\u540e\u505a\u4e2a\u603b\u7ed3\u5427\u3002</p> <ol> <li>\u4e0d\u660e\u767d\u4e3a\u4ec0\u4e48\u8981AB\u6d4b\u8bd5</li> </ol> <p>\u7b54\uff1a AB\u6d4b\u8bd5\u80fd\u591f\u79d1\u5b66\u7684\u3001\u4e25\u8c28\u7684\u5f97\u5230\u56e0\u679c\u5173\u7cfb\u3002\u8fd9\u6837\u7684\u56e0\u679c\u5173\u7cfb\uff0c\u624d\u662f\u6b63\u786e\u7684\u3001\u5408\u7406\u7684\uff0c\u800c\u4e0d\u662f\u7ecf\u9a8c\u6027\u7684\u3002\u6240\u4ee5\uff0c\u9700\u8981AB\u6d4b\u8bd5\u3002</p> <ol> <li>\u4e0d\u660e\u767d\u5982\u4f55\u505aAB\u6d4b\u8bd5</li> </ol> <p>\u7b54\uff1a AB\u6d4b\u8bd5\u7684\u5173\u952e\u5728\u4e8e<code>\u5bf9\u7167\u5b9e\u9a8c</code>\u3002\u8981\u4fdd\u8bc1<code>\u5bf9\u7167\u5b9e\u9a8c</code>\u7684<code>\u6b63\u786e\u6027</code>\uff0c\u9700\u8981\u4e25\u683c\u9075\u5b88\u4e0b\u9762\u7684\u89c4\u5219\uff1a</p> <ol> <li>\u8981\u5bf9\u8db3\u591f\u968f\u673a\u7684\u6311\u9009\u5b9e\u9a8c\u5bf9\u8c61</li> <li>\u8981\u628a\u5b9e\u9a8c\u5bf9\u8c61\u5206\u6210\u4e24\u7ec4\uff1a<code>\u5b9e\u9a8c\u7ec4</code> \u548c <code>\u5bf9\u7167\u7ec4</code></li> <li>\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\uff0c\u53ea\u80fd\u6539\u53d8\u4e00\u4e2a\u56e0\u7d20\uff0c\u4ece\u800c\u5f97\u51fa\u4e00\u4e2a\u56e0\u7d20\u5e26\u6765\u7684\u7ed3\u679c\u3002\u56e0\u4e3a\u5982\u679c\u6539\u53d8\u4e86\u591a\u4e2a\u56e0\u7d20\uff0c\u7ed3\u679c\u662f\u591a\u4e2a\u56e0\u7d20\u7684\u53e0\u52a0\uff0c\u4e0d\u5177\u5907\u552f\u4e00\u53d8\u91cf\u3002</li> </ol>"},{"location":"posts/agile%20practice%20summary/","title":"Agile practice summary","text":"<p>+++ title = \"\u654f\u6377\u5b9e\u8df5\" date = 2010-04-20</p> <p>categories = [\"Tech\"] tags = [\"Agile\"] +++</p> <p>\u672c\u6587\u4e0d\u662f\u63cf\u8ff0\u654f\u6377\u7684\u6587\u7ae0\uff0c\u4e5f\u4e0d\u662f\u7528\u6765\u8912\u626c\u654f\u6377\u7684\u6587\u7ae0\u3002 \u8bb0\u5f55\u4e86\u8fd9\u4e00\u5e74\u6765\u5728\u654f\u6377\u5b9e\u8df5\u4e2d\u7684\u4e00\u4e9b\u4e1c\u897f\u3002\u8fd9\u4e9b\u4e1c\u897f\u4e0d\u4e00\u5b9a\u662f\u7b26\u5408\u6559\u79d1\u4e66\u7684\uff0c\u4ec5\u4ec5\u662f\u6211\u4eec\u7684\u4e00\u4e9b\u5b9e\u8df5\u3002</p>"},{"location":"posts/agile%20practice%20summary/#_1","title":"\u6c9f\u901a","text":"<p>\u4f5c\u4e3a\u6280\u672f\u4eba\u5458\uff0c\u6211\u4eec\u7684\u4ea4\u4ed8\u8005\u662f\u4ea7\u54c1\u4eba\u5458\uff0c\u4e0e\u4ea7\u54c1\u4eba\u5458\u6c9f\u901a\u5f88\u91cd\u8981\u3002\u5f80\u5f80\u4ea7\u54c1\u4eba\u54c1\u5c31\u662f\u4e00\u4efd\u4ea7\u54c1\u6587\u6863. \u800c\u4e14\u4f1a\u63d0\u524d\u53d1\u7ed9\u6280\u672f, \u90a3\u4e48\u5728\u4ed4\u7ec6\u9605\u8bfb\u4e86\u4ea7\u54c1\u6587\u6863\u540e, \u9700\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u6c9f\u901a\u3002\u5728\u6c9f\u901a\u7684\u8fc7\u7a0b\u4e2d\u8981\u6ce8\u610f\uff1a - \u4e0d\u80fd\u6025\uff0c\u5f88\u591a\u4ea7\u54c1\u4e0d\u61c2\u5f97\u6280\u672f\uff0c\u6240\u4ee5\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u4e0d\u80fd\u591f\u7528\u6280\u672f\u8bed\u8a00\u6765\u63cf\u8ff0\uff0c\u9700\u8981\u60f3\u6e05\u695a\uff0c\u597d\u597d\u7684\u7ec4\u7ec7\u8bed\u8a00\uff0c\u7ec4\u7ec7\u51fa\u4ea7\u54c1\u80fd\u591f\u660e\u767d\u7684\u8bed\u8a00\uff0c\u5e76\u4e14\u52a0\u4ee5\u8bf4\u670d - \u6c9f\u901a\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8bb0\u5f55\u4e0bproduct backlog - product backlog \u9700\u8981\u6392\u597d\u4f18\u5148\u7ea7(\u6309\u7167\u4ef7\u503c\u89c2) - \u4f18\u5148\u7ea7\u522b\u9ad8\u7684, \u5f80\u5f80\u4f1a\u6bd4\u8f83\u7ec6, \u4f18\u5148\u7ea7\u522b\u4f4e\u7684, \u5f80\u5f80\u4f1a\u6bd4\u8f83\u7c97 - \u8fd9\u4e9bbacklog\u662f\u9700\u8981\u4ea7\u54c1\u6700\u7ec8\u70b9\u5934\u786e\u8ba4\u7684</p>"},{"location":"posts/agile%20practice%20summary/#_2","title":"\u5f00\u53d1","text":""},{"location":"posts/agile%20practice%20summary/#pair","title":"pair","text":"<ul> <li>\u7ed3\u5bf9\u8981\u505a\u5230\u5b9a\u65f6\u7684rotate, \u56e0\u4e3a\u6bcf\u4e2a\u4eba\u90fd\u6709\u81ea\u5df1\u7684\u4f18\u70b9\uff0c\u8981\u901a\u8fc7\u548c\u4e0d\u540c\u7684\u4eba\u8fdb\u884cpair\uff0c\u5b66\u4e60\u5230\u4ed6\u4eec\u8eab\u4e0a\u7684\u6709\u70b9\uff0c\u63d0\u5347\u81ea\u5df1</li> <li>\u7ed3\u5bf9\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u5b9a\u4f1a\u51fa\u73b0\u51b2\u7a81\u3002\u600e\u4e48\u89e3\u51b3\uff1f</li> <li>\u9047\u5230\u51b2\u7a81\u4e0d\u8981\u6fc0\u52a8\uff0c\u4e0d\u8981\u6025\u3002\u4ee3\u7801\u662f\u4e0d\u4f1a\u9a97\u4eba\u7684\u3002\u5148\u4ee5\u67d0\u4e00\u4e2a\u4eba\u7684\u601d\u8def\u8fdb\u884c\uff0c\u5982\u679c\u6210\u529f\u4e86\uff0c\u5c31\u8bc1\u660e\u4ed6\u7684\u662f\u5bf9\u7684\u3002</li> <li>\u5982\u679c\u53e6\u4e00\u4e2a\u4eba\u8fd8\u4e0d\u670d\u6c14\uff0c\u53ef\u4ee5\u518d\u7528\u4ed6\u7684\u601d\u8def\u8fdb\u884c\uff0c\u5982\u679c\u4e5f\u6210\u529f\u4e86\uff0c\u90a3\u4e48\u8868\u793a\u4e5f\u662f\u5bf9\u7684\u3002</li> <li>\u5982\u679c\u90fd\u662f\u5bf9\u7684\uff0c\u90a3\u4e48\u91c7\u7528\u8f83\u597d\u7684\u4e00\u79cd\u601d\u8def\u5373\u53ef</li> </ul>"},{"location":"posts/agile%20practice%20summary/#unittest","title":"unittest","text":"<ul> <li>\u4ee5test\u5f00\u59cb\uff0c\u4ee5test\u7ed3\u675f</li> <li>\u5f53\u5b58\u5728\u4e00\u4e2a\u6ca1\u6709\u901a\u8fc7\u7684test\uff0c\u4e0d\u8981\u5199\u4e0b\u4e00\u4e2atest\uff0c\u76f4\u5230\u8fd9\u4e2atest\u901a\u8fc7\u4e3a\u6b62</li> <li>\u5f53\u5b58\u5728\u4e00\u4e2a\u6ca1\u6709\u901a\u8fc7\u7684test\uff0c\u4e0d\u8981\u5199\u4e0b\u4e00\u6bb5\u5b9e\u73b0\uff0c\u76f4\u5230\u8fd9\u4e2atest\u901a\u8fc7\u4e3a\u6b62</li> <li>mock\u662f\u4e00\u4e2a\u597d\u4e1c\u897f\uff0c\u4f46\u662f\u4e0d\u8981\u7ecf\u5e38\u7528\u5230\uff0c\u5982\u679c\u53d1\u73b0test\u5f88\u96be\u5199\uff0c\u6216\u8005\u7ecf\u5e38\u8981\u7528mock\uff0c\u90a3\u4e48\u5f88\u53ef\u80fd\u662f\u8bbe\u8ba1\u51fa\u4e86\u95ee\u9898\u3002\u53ef\u4ee5\u56de\u8fc7\u5934\u6765\u91cd\u65b0\u8003\u8651\u4ee3\u7801\u7684\u7ed3\u6784\u548c\u8bbe\u8ba1</li> <li>Python\u4e2d\u7684Fudge\u662f\u4e00\u4e2a\u7528\u6765\u505amock\u7684\u7b2c3\u65b9\u5f00\u6e90lib\uff0c\u5f88\u597d\u7528</li> <li>\u7b2c\u4e00\u4e2atest\u5f80\u5f80\u662f\u6700\u76f4\u89c2\u7684\uff0c\u80fd\u8868\u660e\u7f16\u7801\u610f\u56fe\u548c\u601d\u8def\u7684\uff0c\u6240\u4ee5\uff0c\u503c\u5f97\u4e0b\u529f\u592b</li> </ul>"},{"location":"posts/agile%20practice%20summary/#code-review","title":"code review","text":"<ul> <li>\u6bcf\u5929\u9700\u8981\u6709\u4eba\u8fdb\u884ccode review</li> </ul>"},{"location":"posts/agile%20practice%20summary/#refactoring","title":"refactoring","text":"<ul> <li>\u53d1\u73b0\u4e86bad smell\uff0c\u5c31\u5e94\u8be5\u53ca\u65f6\u7684 refactoring</li> <li>\"\u4ee5\u540e\u518d\u91cd\u6784\u5427\u3002\"  \u8fd9\u662f\u4e0d\u53ef\u80fd\u7684\u4e8b\u60c5</li> <li>\"\u5148\u8fd9\u6837\uff0c\u5b9e\u73b0\u529f\u80fd\uff0c\u5230\u65f6\u5019\u5728\u6539\u3002\"  \u8fd9\u4e5f\u662f\u4e0d\u53ef\u80fd\u7684\u4e8b\u60c5</li> </ul>"},{"location":"posts/agile%20practice%20summary/#_3","title":"\u4ea4\u4ed8","text":"<ol> <li>\u5c0f\u6b65\u63d0\u4ea4\u4ee3\u7801</li> <li>\u6bcf\u6b21\u63d0\u4ea4\u4ee3\u7801\u5c31\u53ef\u4ee5\u7ed9\u4ea7\u54c1\u4eba\u5458\u770b\u6700\u7ec8\u7684\u6548\u679c</li> <li>\u6bcf\u6b21\u5f53\u6548\u679c\u548c\u4ea7\u54c1\u7684\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\uff0c\u9700\u8981\u9a6c\u4e0a\u6c9f\u901a</li> <li>\u6c9f\u901a\u7ed3\u675f\u540e\uff0c\u9700\u8981\u9a6c\u4e0a\u8fed\u4ee3</li> </ol>"},{"location":"posts/agile%20practice%20summary/#_4","title":"\u51e0\u4e2a\u4f1a\u8bae","text":""},{"location":"posts/agile%20practice%20summary/#sprint-planning-meeting","title":"sprint planning meeting","text":"<ul> <li>\u4e0eTeam\u548c\u4ea7\u54c1\u540c\u65f6\u6c9f\u901a</li> <li>\u62ff\u5230backlog\u540e, \u9488\u5bf9\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u522b\u9ad8\u7684, \u4f1a\u8fdb\u884c\u4efb\u52a1\u7684\u7ec6\u5206, \u7ed9\u51fa\u80fd\u5b8c\u6210\u7684\u65f6\u95f4.  <p>\u6ce8\u610f\u4f1a\u5f71\u54cd\u7cfb\u7edf\u67b6\u6784\u7684\u5730\u65b9 \u548c \u6709\u4f9d\u8d56\u5173\u7cfb, \u524d\u540e\u987a\u5e8f \u7684\u5730\u65b9\u8981\u53ca\u65f6\u53d1\u73b0, \u5e76\u628a\u4f18\u5148\u7ea7\u8c03\u9ad8</p> </li> </ul>"},{"location":"posts/agile%20practice%20summary/#daily-standup-meeting","title":"daily standup meeting","text":"<ul> <li>\u4e00\u51715\u5206\u949f\u5de6\u53f3</li> <li>\u53ea\u5141\u8bb8\u4e00\u4e2a\u4eba\u53d1\u8a00\uff0c\u53d1\u8a00\u8005\u9700\u8981\u62e5\u6709Talk Token\uff0c\u6bd4\u65b9\u4e00\u4e2a\u73a9\u5177\u5c0f\u718a</li> <li>\u6628\u5929\u505a\u4e86\u4ec0\u4e48</li> <li>\u4eca\u5929\u9884\u8ba1\u505a\u4ec0\u4e48</li> <li>\u6628\u5929\u9047\u5230\u4e86\u4ec0\u4e48\u95ee\u9898</li> <li>\u5982\u4f55\u89e3\u51b3\u6628\u5929\u95ee\u9898\u7684</li> <li>\u5982\u679c\u53d1\u751f\u51b2\u7a81\uff0c\u4e00\u5b9a\u8981\u6709\u4e00\u4e2a\u4e3b\u6301\u4eba\u4e2d\u65ad\u51b2\u7a81\uff0c\u8bf7\u4f1a\u4e0b\u89e3\u51b3\u51b2\u7a81</li> </ul>"},{"location":"posts/agile%20practice%20summary/#retrospective-meeting","title":"retrospective meeting","text":"<ul> <li>\u4e2a\u4eba\u8ba4\u4e3a\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u4f1a\u8bae</li> <li>\u603b\u7ed3\u51fa\u9636\u6bb5\u5185\u7684well\uff0cless\uff0cpuzzle</li> <li>\u5217\u51faaction list</li> <li>\u6bcf\u4e2a\u7684action list \u9700\u8981\u627e\u5230\u5bf9\u5e94\u7684actor</li> </ul>"},{"location":"posts/agile%20practice%20summary/#_5","title":"\u7ed3\u8bba","text":"<ol> <li>agile \u63d0\u5347\u4e86\u5f00\u53d1\u6548\u7387</li> <li>agile \u63d0\u5347\u4e86\u4ee3\u7801\u8d28\u91cf</li> <li>agile \u89e3\u51b3\u4e86\u4e00\u4e2a\u841d\u535c\u4e00\u4e2a\u5751\u7684\u95ee\u9898\uff0c\u6700\u5927\u9650\u5ea6\u4e0a\u5141\u8bb8\u4e86\u6210\u5458\u7684\u79bb\u5f00</li> <li>agile \u9700\u8981\u957f\u671f\u7684\u575a\u6301\uff0c\u5c31\u7b97\u662f\u81ea\u5df1\u4e00\u4e2a\u4eba\u5199\u4ee3\u7801\uff0c\u4e5f\u53ef\u4ee5\u7528\u5b83</li> </ol>"},{"location":"posts/fate/","title":"Fate","text":"<p>+++ title = \"\u5584\u00b7\u7f18\" date = 2012-10-13</p> <p>categories = [\"Tech\"] tags = [\"Essay\"] +++</p> <p>\u4e0d\u4fe1\u4e00\u89c1\u949f\u60c5\uff0c\u53ea\u56e0\u4e3a\u6211\u4e0d\u662f\u4e00\u4e2a\u6781\u7aef\u7684\u4eba\u3002</p> <p>\u65e2\u7136\u4e0d\u662f\u4e00\u4e2a\u6781\u7aef\u7684\u4eba\uff0c\u5c31\u4e0d\u4f1a\u6709\u6781\u7aef\u7684\u60f3\u6cd5\uff0c\u4e5f\u4e0d\u4f1a\u6709\u6781\u7aef\u7684\u611f\u53d7\u3002</p> <p>\u6211\u76f8\u4fe1\u7f18\u5206\u3002</p> <p>\u7f18\u5206\u662f\u4e00\u79cd\u5947\u5999\u7684\u4e1c\u897f\uff0c\u4f60\u4e0d\u60f3\u7684\u65f6\u5019\uff0c\u5374\u504f\u504f\u6765\u5230\u4f60\u7684\u8eab\u65c1\u3002</p> <p>\u6211\u76f8\u4fe1\u547d\u8fd0\u3002</p> <p>\u547d\u8fd0\u662f\u4e00\u79cd\u7f25\u7f08\u7684\u4e1c\u897f\uff0c\u4f60\u6c38\u8fdc\u7422\u78e8\u4e0d\u900f\uff0c\u4e0a\u5929\u7684\u5982\u6b64\u5b89\u6392\u7a76\u7adf\u4e3a\u4f55\u3002</p>"},{"location":"posts/fudge%20using%20document/","title":"Fudge using document","text":"<p>+++ title = \"fudge\u4f7f\u7528\u6587\u6863\" date = \"2012-10-20\"</p> <p>categories = [\"Tutorials\"] tags = [\"Python\", \"Fudge\"] menu = \"main\" +++</p> <p>fudge\u662f\u4e00\u4e2apython\u7684mock\u6846\u67b6\uff0c\u6211\u975e\u5e38\u559c\u6b22\u5b83\u3002\u51b3\u5b9a\u628a\u4f7f\u7528\u6587\u6863\u7ffb\u8bd1\u51fa\u6765\u3002</p>"},{"location":"posts/fudge%20using%20document/#fudging-a-web-service","title":"Fudging a Web Service","text":"<p>\u5f53\u6d4b\u8bd5\u4e00\u4e2a\u4f7f\u7528web\u670d\u52a1\u7684\u4ee3\u7801\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u5feb\u901f\u7684\u8bbe\u7f6e\u4e00\u4e2a\u4e0d\u4f9d\u8d56\u4e8e\u771f\u5b9e\u7684\u5728\u4e92\u8054\u7f51\u4e0a\u7684web\u670d\u52a1\u3002\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528mock\u5bf9\u8c61\u7684\u597d\u7684\u65b9\u5f0f\u3002\u5047\u8bbe\u4f60\u53c8\u4e00\u4e2aTwitter\u7684\u673a\u5668\u4eba\uff0c\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a</p> <pre><code>&gt;&gt;&gt; import oauthtwitter\n&gt;&gt;&gt; def post_msg_to_twitter(msg):\n...     api = oauthtwitter.OAuthApi(\n...         '&lt;consumer_key&gt;', '&lt;consumer_secret&gt;',\n...         '&lt;oauth_token&gt;', '&lt;oauth_token_secret&gt;'\n...     )\n...     api.UpdateStatus(msg)\n...     print \"Sent: %s\" % msg\n&gt;&gt;&gt;\n</code></pre> <p>\u56e0\u4e3aoauthtwitter\u662f\u72ec\u7acb\u7ef4\u62a4\u7684\uff0c\u4f60\u7684\u4ee3\u7801\u53ea\u8981\u8c03\u7528\u4e86\u6b63\u786e\u7684\u65b9\u6cd5\uff0c\u5c31\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002</p>"},{"location":"posts/fudge%20using%20document/#a-simple-testcase","title":"A Simple TestCase","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u5047\u7684\u58f0\u660e\u7684\u671f\u671b\u7684class\u6765\u4ee3\u66ffOAuthApi\u7684class\uff0c\u5b83\u8fd9\u6837\u7528\uff1a</p> <pre><code>&gt;&gt;&gt; import fudge\n&gt;&gt;&gt; @fudge.patch('oauthtwitter.OAuthApi')\n... def test(FakeOAuthApi):\n...     (FakeOAuthApi.expects_call()\n...                  .with_args('&lt;consumer_key&gt;', '&lt;consumer_secret&gt;',\n...                             '&lt;oauth_token&gt;', '&lt;oauth_token_secret&gt;')\n...                  .returns_fake()\n...                  .expects('UpdateStatus').with_arg_count(1))\n...\n...     post_msg_to_twitter(\"hey there fellow testing freaks!\")\n&gt;&gt;&gt;\n</code></pre> <p>\u8ba9\u6211\u4eec\u6765\u5206\u89e3\u4e00\u4e0b\uff1a 1. \u6d4b\u8bd5\u9636\u6bb5\uff0cpatch\u88c5\u9970\u5668\u5c06\u7528\u4e00\u4e2a\u5047\u7684\u5bf9\u8c61\u4e34\u65f6\u7684\u6253\u4e00\u4e2a\u8865\u4e01\u3002\u5e76\u4e14\u4f7f\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u53c2\u6570\uff0c\u4f20\u5165\u5230\u6d4b\u8bd5\u65b9\u6cd5\u4e2d\u3002\u8fd9\u5141\u8bb8\u4f60\u6dfb\u52a0\u4f60\u6240\u60f3\u8981\u7684\u4e1c\u897f\u3002 1. \u8fd9\u91cc\u4f60\u770b\u5230\u7684\u8fd9\u4e2afake\u5bf9\u8c61\uff0c\u671f\u671b\u6709\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f7f\u75284\u4e2a\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\u3002\u5b83\u8fd4\u56de\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5b9e\u4f8b(\u4e00\u4e2a\u65b0\u7684fake\u5bf9\u8c61)\uff0c\u5b83\u5e0c\u671b\u4f60\u4f7f\u7528\u4e00\u4e2a\u53c2\u6570\u8c03\u7528fake_oauth.UpdateStatus() 1. \u6700\u540e, post_msg_to_twitter() \u88ab\u8c03\u7528\u3002\u8ba9\u6211\u4eec\u8fd0\u884c\u6d4b\u8bd5\uff01</p> <pre><code>&gt;&gt;&gt; test()\nSent: hey there fellow testing freaks!\n</code></pre> <p>\u5f88\u9ad8\u5174\uff0c\u5b83\u901a\u8fc7\u4e86\u3002</p> <p>Fudge\u8ba9\u4f60\u58f0\u660e\u4e86\u4f60\u60f3\u8981\u7684\u6216\u677e\u6563\u6216\u7d27\u5bc6\u7684\u671f\u671b(expectations)\u3002\u5982\u679c\u4f60\u4e0d\u5173\u5fc3\u786e\u5207\u7684\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u4e0d\u8c03\u7528fudge.Fake.with_args()\u3002\u5982\u679c\u4f60\u4e0d\u5173\u5fc3\u65b9\u6cd5\u662f\u4e0d\u662f\u771f\u7684\u88ab\u8c03\u7528\uff0c\u4f60\u53ef\u4ee5\u7528fudge.Fake.provides()\u6765\u4ee3\u66fffudge.Fake.expects()\u3002\u540c\u6837\u7684\uff0c\u5f53\u4f60\u4e0d\u60f3\u4e3a\u771f\u5b9e\u7684\u53c2\u6570\u503c\u800c\u64cd\u5fc3\uff0c\u53ef\u4ee5\u4f7f\u7528fudge.Fake.with_arg_count()\u3002\u5728\u5176\u5b83\u65b9\u9762\u6709\u68c0\u6d4b\u8005\uff0c\u68c0\u6d4b\u53c2\u6570\u7684\u503c\u3002</p>"},{"location":"posts/fudge%20using%20document/#fake-objects-without-patches-dependency-injection","title":"Fake objects without patches (dependency injection)","text":"<p>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4efb\u4f55\u8865\u4e01\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528fudge.test()\u88c5\u9970\u5668\u3002\u8fd9\u5c06\u6355\u83b7\u4efb\u4f55\u4e00\u4e2a\u88ab\u629b\u51fa\u7684\u975e\u9884\u671f\u7684\u5f02\u5e38\u3002\u8fd9\u662f\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>&gt;&gt;&gt; def send_msg(api):\n...     if False: # a mistake\n...         api.UpdateStatus('hello')\n...\n&gt;&gt;&gt; @fudge.test\n... def test_msg():\n...     FakeOAuthApi = (fudge.Fake('OAuthApi')\n...                          .is_callable()\n...                          .expects('UpdateStatus'))\n...     api = FakeOAuthApi()\n...     send_msg(api)\n...\n&gt;&gt;&gt; test_msg()\nTraceback (most recent call last):\n...\nAssertionError: fake:OAuthApi.UpdateStatus() was not called\n</code></pre>"},{"location":"posts/fudge%20using%20document/#stubs-without-expectations","title":"Stubs Without Expectations","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u4e00\u4e2afake\u5bf9\u8c61\uff0c\u53ef\u4ee5\u88ab\u8c03\u7528\u4f46\u662f\u5b83\u4e0d\u662f\u4e00\u5b9a\u88ab\u8c03\u7528\uff0c\u9664\u4e86\u7528Fake.provides()\u4ee3\u66ffFake.expects()\u5916\uff0c\u4ee3\u7801\u5b8c\u5168\u4e00\u6837\u3002\u8fd9\u662f\u4e00\u4e2a\u8c03\u7528is_logged_in()\u6c38\u8fdc\u8fd4\u56deTrue\u7684\u4f8b\u5b50\uff1a</p> <pre><code>&gt;&gt;&gt; def show_secret_word():\n...     import auth\n...     user = auth.current_user()\n...     if user.is_logged_in():\n...         print \"Bird is the word\"\n...     else:\n...         print \"Access denied\"\n...\n&gt;&gt;&gt; @fudge.patch('auth.current_user')\n... def test_secret_word(current_user):\n...     user = current_user.expects_call().returns_fake()\n...     user = user.provides('is_logged_in').returns(True)\n...     show_secret_word()\n...\n&gt;&gt;&gt; test_secret_word()\nBird is the word\n</code></pre> <p>\u6ce8\u610f\uff0c\u5982\u679cuser.is_logged_in()\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u5f02\u5e38\u88ab\u629b\u51fa\u3002\u56e0\u4e3a\u5b83\u662f'\u63d0\u4f9b'(provided)\uff0c\u4e0d\u662f'\u671f\u671b'(expected)\u3002</p>"},{"location":"posts/fudge%20using%20document/#replacing-a-method","title":"Replacing A Method","text":"<p>\u6709\u65f6\u5019\uff0c\u8fd4\u56de\u4e00\u4e2a\u9759\u6001\u7684\u503c\u4e0d\u662f\u5b8c\u5168\u8db3\u591f\u7684\u3002\u4f60\u771f\u6b63\u9700\u8981\u8fd0\u884c\u4e00\u4e9b\u4ee3\u7801\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528Fake.calls()\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a</p> <pre><code>&gt;&gt;&gt; auth = fudge.Fake()\n&gt;&gt;&gt; def check_user(username):\n...     if username=='bert':\n...         print \"Bird is the word\"\n...     else:\n...         print \"Access denied\"\n...\n&gt;&gt;&gt; auth = auth.provides('show_secret_word_for_user').call(check_user)\n&gt;&gt;&gt; # Now, the check_user function gets called instead:\n&gt;&gt;&gt; auth.show_secret_word_for_user(\"bert\")\nBird is the word\n&gt;&gt;&gt; auth.show_secret_word_for_user(\"ernie\")\nAccess denied\n</code></pre>"},{"location":"posts/fudge%20using%20document/#cascading-objects","title":"Cascading Objects","text":"<p>\u4f60\u53ef\u80fd\u60f3\u8ba9\u4e00\u4e9b\u5bf9\u8c61\u7528\u957f\u7684\u94fe\u5f0f\u7684\u5de5\u4f5c\u3002\u8fd9\u6709\u4e00\u4e2a\u4f7f\u7528fudging SQLAlchemy\u7ea7\u8054\u67e5\u8be2\u7684\u4f8b\u5b50\u3002\u6ce8\u610f Fake.returns_fake() \u6307\u5b9a\u4e8esession.query(User)\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002\u540c\u6837\u6ce8\u610f\u56e0\u4e3aquery()\u8fd4\u56de\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5b83\u8bbe\u7f6e\u8fd4\u56de\u4e00\u4e2afake\u7528\u6237\u5bf9\u8c61\u7684\u5217\u8868\u3002</p> <pre><code>&gt;&gt;&gt; import fudge\n&gt;&gt;&gt; session = fudge.Fake('session')\n&gt;&gt;&gt; query = (session.provides('query')\n...                 .returns_fake()\n...                 .provides('order_by')\n...                 .returns(\n...                     [fudge.Fake('User').has_attr(name='Al', lastname='Capone')]\n...                 )\n... )\n&gt;&gt;&gt; from models import User\n&gt;&gt;&gt; for instance in session.query(User).order_by(User.id):\n...     print instance.name, instance.lastname\n...\nAl Capone\n</code></pre>"},{"location":"posts/fudge%20using%20document/#multiple-return-values","title":"Multiple Return Values","text":"<p>\u6211\u4eec\u8bf4\uff0c\u4f60\u60f3\u6d4b\u8bd5\u9700\u8981\u8c03\u7528\u591a\u6b21\u548c\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u7684\u4ee3\u7801\u3002\u5230\u73b0\u5728\uff0c\u4f60\u4ec5\u4ec5\u770b\u5230Fake.returns()\u65b9\u6cd5\u5c06\u8fd4\u56de\u4e00\u4e2a\u65e0\u7a77\u503c(value infinitely)\u3002\u8981\u6539\u53d8\u5b83\uff0c\u8c03\u7528To change that, \u8c03\u7528Fake.next_call()\u53ef\u4ee5\u6307\u5b9a\u8c03\u7528\u987a\u5e8f\u3002\u8fd9\u662f\u4e00\u4e2a\u8d2d\u7269\u8f66\u573a\u666f\u7684\u4f8b\u5b50:</p> <pre><code>&gt;&gt;&gt; cart = (fudge.Fake('cart')\n...              .provides('add')\n...              .with_args('book')\n...              .returns({'contents': ['book']})\n...              .next_call()\n...              .with_args('dvd')\n...              .returns({'contents': ['book', 'dvd']}))\n&gt;&gt;&gt; cart.add('book')\n{'contents': ['book']}\n&gt;&gt;&gt; cart.add('dvd')\n{'contents': ['book', 'dvd']}\n&gt;&gt;&gt; cart.add('monkey')\nTraceback (most recent call last):\n...\nAssertionError: This attribute of fake:cart can only be called 2 time(s).\n</code></pre>"},{"location":"posts/fudge%20using%20document/#expecting-a-specific-call-order","title":"Expecting A Specific Call Order","text":"<p>\u4f60\u53ef\u80fd\u9700\u8981\u6d4b\u8bd5\u4e00\u4e2a\u5bf9\u8c61\uff0c\u9884\u8ba1\u5b83\u5728\u4e00\u4e2a\u7279\u5b9a\u7684\u987a\u5e8f\u4e2d\u4f5c\u4e3a\u4e00\u4e2a\u65b9\u6cd5\u88ab\u8c03\u7528\u3002\u4ec5\u4ec5\u5728\u8c03\u7528fudge.Fake.expects()\u4e4b\u524d\u5e26\u4f7f\u7528fudge.Fake.remember_order()\uff0c\u5c31\u50cf\u8fd9\u6837:</p> <pre><code>&gt;&gt;&gt; import fudge\n&gt;&gt;&gt; session = (fudge.Fake(\"session\").remember_order()\n...                                 .expects(\"get_count\").returns(0)\n...                                 .expects(\"set_count\").with_args(5)\n...                                 .expects(\"get_count\").returns(5))\n...\n&gt;&gt;&gt; session.get_count()\n0\n&gt;&gt;&gt; session.set_count(5)\n&gt;&gt;&gt; session.get_count()\n5\n&gt;&gt;&gt; fudge.verify()\n</code></pre> <p>\u5982\u679c\u4f60\u6ca1\u6709\u6309\u7167\u987a\u5e8f\u8c03\u7528\uff0c\u8bb2\u8f93\u51fa\u4e00\u4e2a\u63cf\u8ff0\u6027\u7684\u9519\u8bef\u3002</p> <pre><code>&gt;&gt;&gt; session.set_count(5)\nTraceback (most recent call last):\n...\nAssertionError: Call #1 was fake:session.set_count(5); Expected: #1 fake:session.get_count()[0], #2 fake:session.set_count(5), #3 fake:session.get_count()[1], end\n</code></pre>"},{"location":"posts/fudge%20using%20document/#allowing-any-call-or-attribute-a-complete-stub","title":"Allowing any call or attribute (a complete stub)","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5ef6\u8fdf\u63d0\u4f9b\u4efb\u4f55\u8c03\u7528\u6216\u8005\u4efb\u4f55\u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u58f0\u660efudge.Fake.is_a_stub()\u3002\u4efb\u4f55\u88ab\u8bf7\u6c42\u7684\u65b9\u6cd5\u6216\u8005\u5c5e\u6027\u5c06\u6c38\u8fdc\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684fudge.Fake\u5b9e\u4f8b\uff0c\u4f7f\u5176\u66f4\u52a0\u5bb9\u6613\u7684\u5de5\u4f5c\u5728\u590d\u6742\u7684\u5bf9\u8c61\u4e0a\u3002\u8fd9\u6709\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>&gt;&gt;&gt; Server = fudge.Fake('xmlrpclib.Server').is_a_stub()\n&gt;&gt;&gt; pypi = Server('http://pypi.python.org/pypi')\n&gt;&gt;&gt; pypi.list_packages()\nfake:xmlrpclib.Server().list_packages()\n&gt;&gt;&gt; pypi.package_releases()\nfake:xmlrpclib.Server().package_releases()\n</code></pre> <p>Stubs\u50cf\u8fd9\u6837\u65e0\u9650\u7684\u8fdb\u884c\u3002</p> <pre><code>&gt;&gt;&gt; f = fudge.Fake('base').is_a_stub()\n&gt;&gt;&gt; f.one.two.three().four\nfake:base.one.two.three().four\n</code></pre> <p>\u6ce8\u610f\u5f53\u4f7f\u7528fudge.Fake.is_a_stub()\uff0c\u4f60\u4e0d\u80fd\u5ef6\u8fdf\u8bbf\u95ee\u4efb\u4f55\u6709\u76f8\u540c\u540d\u5b57\u7684\u5c5e\u6027\u6216\u8005\u65b9\u6cd5\uff0c\u50cfreturns()\u6216\u8005with_args()\u3002\u4f60\u9700\u8981\u76f4\u63a5\u4f7f\u7528fudge.expects()\u7b49\uff0c\u6765\u58f0\u660e\u4e00\u4e2a\u9884\u671f\u3002</p>"},{"location":"posts/fudge%20using%20document/#working-with-arguments","title":"Working with Arguments","text":"<p>fudge.Fake.with_args() \u65b9\u6cd5\u53ef\u4ee5\u968f\u610f\u7684\u5141\u8bb8\u4f60\u58f0\u660e\u600e\u6837\u4f20\u9012\u53c2\u6570\u5230\u4f60\u7684\u5bf9\u8c61\u7684\u9884\u671f\u3002\u5bf9\u4e8e\u4e00\u4e2a\u9884\u671f\u7684\u786e\u5b9a\u7684\u53c2\u6570\u503c\uff0c\u5b83\u901a\u5e38\u5c31\u8db3\u591f\u4e86\u3002\u4f46\u662f\u6709\u65f6\u5019\u4f60\u9700\u8981\u4e3a\u52a8\u6001\u7684\u53c2\u6570\u503c\u4f7f\u7528fudge.inspector\u65b9\u6cd5\u3002</p> <p>\u8fd9\u6709\u4e00\u4e2a\u77ed\u7684\u4f8b\u5b50\uff1a</p> <pre><code>&gt;&gt;&gt; import fudge\n&gt;&gt;&gt; from fudge.inspector import arg\n&gt;&gt;&gt; image = (fudge.Fake(\"image\")\n...               .expects(\"save\")\n...               .with_args(\"JPEG\", arg.endswith(\".jpg\"), resolution=arg.any())\n... )\n</code></pre> <p>\u8fd9\u4e2a\u58f0\u660e\u5341\u5206\u7684\u7075\u6d3b\uff1b\u5b83\u5141\u8bb8\u4e0b\u9762\u8fd9\u6837\u7684\u8c03\u7528\uff1a</p> <pre><code>&gt;&gt;&gt; image.save(\"JPEG\", \"/tmp/unicorns-and-rainbows.jpg\", resolution=72)\n&gt;&gt;&gt; image.save(\"JPEG\", \"/tmp/me-being-serious.jpg\", resolution=96)\n</code></pre> <p>\u8fd9\u5c31\u662fFudge\uff01\u66f4\u591a\u7684\u7ec6\u8282\u8bf7\u770bfudge\u7684API\uff1a</p> <ul> <li>fudge</li> <li>fudge.inspector</li> <li>fudge.patcher</li> </ul>"},{"location":"posts/gevent%20on%20pypy/","title":"Gevent on pypy","text":"<p>+++ title = \"pypy\u73af\u5883\u7684gevent\u5f00\u53d1\" date = 2014-08-20</p> <p>categories = [\"Tech\"] tags = [\"Python\", \"Gevent\", \"Pypy\"] +++</p>"},{"location":"posts/gevent%20on%20pypy/#install-pypy","title":"install pypy","text":"<ul> <li>wget https://bitbucket.org/squeaky/portable-pypy/downloads/pypy-2.3.1-linux_x86_64-portable.tar.bz2</li> <li>bunzip2 pypy-2.3.1-linux_x86_64-portable.tar.bz2</li> <li>tar -xvf pypy-2.3.1-linux_x86_64-portable.tar</li> <li>mv pypy3-2.3.1-linux_x86_64-portable pypy-2.3.1</li> <li>ln -s pypy-2.3.1/bin/pypy /usr/bin/pypy</li> </ul>"},{"location":"posts/gevent%20on%20pypy/#install-system-enviaronment","title":"install system enviaronment","text":"<ul> <li>yum install --enablerepo=epel libev.x86_64</li> <li>yum install --enablerepo=epel libev-devel.x86_64</li> </ul> <p>must add --enablerepo=epel when install libev on amazon ec2\uff0cbecause there is not libev source in ec2's yum. </p> <p>if the libev can not install. you can make it by yourself.</p>"},{"location":"posts/gevent%20on%20pypy/#install-system-enviaronment-by-yourself","title":"install system enviaronment by yourself","text":"<ul> <li>wget http://dist.schmorp.de/libev/libev-4.15.tar.gz</li> <li>tar -xvf libev-4.15.tar.gz</li> <li>cd libev-4.15</li> <li>./configuration</li> <li>make</li> <li>make install</li> </ul>"},{"location":"posts/gevent%20on%20pypy/#creat-the-pypy-virtual-enviaronment-for-development","title":"creat the pypy virtual enviaronment for development","text":"<ul> <li>cd pypy-2.3.1</li> <li>bin/virtualenv-pypy ~/PypyEnv</li> <li>cd ~/PypyEnv</li> <li>source bin/activate</li> <li>pip install gevent</li> <li>pip install git+git://github.com/schmir/gevent@pypy-hacks</li> <li>pip install cffi</li> <li>pip install git+git://github.com/gevent-on-pypy/pypycore</li> <li>export GEVENT_LOOP=pypycore.loop</li> </ul> <p>If setup.py complains it can not locate ev.h it's possible the library search path isn't complete.  In that case add the directory containing ev.h to the include_dirs variable in pypycore.py (line 215). </p>"},{"location":"posts/gevent%20on%20pypy/#some-anontations","title":"some anontations","text":"<ol> <li>write the gevent code, must write the code in first line.</li> </ol> <pre><code># coding: utf8\n\nimport sys\nimport gevent\n\nif \"__pypy__\" in sys.builtin_module_names:\n\n  def _reuse(self):\n    self._sock._reuse()    \n\n  def _drop(self):\n    self._sock._drop()\n\n  gevent.socket.socket._reuse = _reuse\n  gevent.socket.socket._drop = _drop\n</code></pre> <ol> <li>start the gevent server. must run it:</li> </ol> <pre><code>export GEVENT_LOOP=pypycore.loop\n</code></pre>"},{"location":"posts/growth%20hacking/","title":"Growth hacking","text":"<p>+++ title = \"\u9ed1\u5ba2\u589e\u957f\u7b80\u609f\" date = 2020-12-28</p> <p>categories = [\"Tech\"] tags = [\"Growth hacking\", \"Thought\"] +++</p>"},{"location":"posts/growth%20hacking/#_1","title":"\u5f15\u5b50","text":"<p><code>\u9ed1\u5ba2\u589e\u957f</code>\u8fd9\u4e2a\u8bcd\u5df2\u7ecf\u51fa\u73b0\u5f88\u4e45\u4e86\uff0c\u4e4b\u524d\u53ea\u662f\u542c\u8bf4\u8fc7\uff0c\u4e5f\u4ec5\u4ec5\u53ea\u662f\u542c\u8bf4\u3002\u8fd9\u6bb5\u65f6\u95f4\uff0c\u901a\u8fc7\u4e00\u4e9b\u8d44\u6599\u9605\u8bfb\uff0c\u7b97\u662f\u6709\u4e00\u4e9b\u4e86\u89e3\u4e86\u3002\u7b80\u5355\u8bf4\u4e00\u4e0b\u81ea\u5df1\u7684\u9886\u609f\u5427\u3002</p>"},{"location":"posts/growth%20hacking/#_2","title":"\u4ec0\u4e48\u662f\u9ed1\u5ba2\u589e\u957f","text":"<p><code>\u9ed1\u5ba2\u589e\u957f</code>\u7684\u82f1\u6587\u4e3a<code>Growth Hacking</code>\uff0c\u5b83\u6709\u5f88\u591a\u5176\u4ed6\u7684\u4e2d\u6587\u7ffb\u8bd1\uff0c\u5e38\u89c1\u7684\u6709\uff1a<code>\u9ed1\u5ba2\u589e\u957f</code>\uff0c<code>\u9ed1\u5ba2\u6210\u957f</code>\uff0c<code>\u589e\u957f\u9ed1\u5ba2</code>\uff0c<code>\u6210\u957f\u9ed1\u5ba2</code>\uff0c<code>\u9a87\u5ba2\u589e\u957f</code>\uff0c<code>\u9a87\u5ba2\u6210\u957f</code>\uff0c<code>\u589e\u957f\u9a87\u5ba2</code>\uff0c<code>\u6210\u957f\u9a87\u5ba2</code>\u3002\u4ece\u8fd9\u4e9b\u5b57\u9762\u4e0a\u7684\u610f\u601d\u770b\uff0c\u8c8c\u4f3c\u548c\u8ba1\u7b97\u673a\u9ed1\u5ba2\u6280\u672f\u6709\u5f88\u5927\u7684\u5173\u7cfb\u3002\u4f46\u662f\u4e8b\u5b9e\u786e\u5b8c\u5168\u4e0d\u662f\u90a3\u4e48\u56de\u4e8b\u3002</p> <p><code>\u9ed1\u5ba2\u589e\u957f</code>\u6307\u7684\u662f<code>\u521b\u4e1a\u578b\u56e2\u961f</code>\u5728<code>\u6570\u636e\u5206\u6790</code>\u57fa\u7840\u4e0a\uff0c\u5229\u7528<code>\u4ea7\u54c1\u624b\u6bb5</code>\u6216<code>\u6280\u672f\u624b\u6bb5</code>\u6765\u83b7\u53d6<code>\u81ea\u53d1\u589e\u957f</code>\u7684<code>\u8fd0\u8425\u624b\u6bb5</code>\u3002\u8bf4\u901a\u4fd7\u4e00\u70b9\u5c31\u662f\uff1a\u521d\u521b\u516c\u53f8\u6216\u8005\u5927\u4e2d\u578b\u516c\u53f8\u5185\u90e8\u521b\u4e1a\u578b\u56e2\u961f\uff0c\u4ee5\u6570\u636e\u9a71\u52a8\u8425\u9500\uff0c\u4ee5\u5e02\u573a\u6307\u5bfc\u4ea7\u54c1\uff0c\u901a\u8fc7\u4f4e\u6210\u672c\u7684\u624b\u6bb5\u89e3\u51b3\u4ea7\u54c1\u65e9\u671f\u589e\u957f\u95ee\u9898\u3002</p>"},{"location":"posts/growth%20hacking/#_3","title":"\u8981\u505a\u54ea\u4e9b\u5de5\u4f5c","text":"<p>\u53ef\u4ee5\u770b\u51fa\uff0c\u6240\u8c13 <code>\u9ed1\u5ba2\u589e\u957f</code> \u5e76\u4e0d\u662f\u53ea\u901a\u8fc7\u5b64\u7acb\u7684\u4e00\u4ef6\u4e8b\u60c5\u6765\u505a\u6210\u3002\u5b83\u5176\u5b9e\u662f\u4e00\u5957\u7ec4\u5408\u62f3\u7684\u624b\u6bb5\u3002\u56e0\u6b64\uff0c\u4e5f\u9700\u8981\u591a\u90e8\u95e8\u5408\u4f5c\u3002</p> <p>\u51e0\u4e2a\u91cd\u70b9\u8bcd\u6c47\uff1a<code>\u6570\u636e\u5206\u6790</code>\uff0c<code>\u4ea7\u54c1\u624b\u6bb5</code>\uff0c<code>\u6280\u672f\u624b\u6bb5</code>\uff0c<code>\u8fd0\u8425\u624b\u6bb5</code></p> <p>\u5177\u4f53\u7684\u624b\u6bb5\u662f\u6ca1\u6709\u624b\u6bb5\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u624b\u6bb5\u90fd\u662f\u65e5\u5e38\u7684\u56e2\u961f\u5de5\u4f5c\uff1a</p> <ul> <li>\u4ea7\u54c1\u56e2\u961f</li> <li>\u627e\u51fa\u4ea7\u54c1\u7684\u91cd\u70b9\u548c\u4eae\u70b9\uff0c\u5e76\u6781\u9650\u7684\u6253\u9020\u4e4b\u3002\u7ad9\u5728\u7528\u6237\u7684\u89d2\u5ea6\u601d\u8003\u95ee\u9898\uff0c\u89e3\u51b3\u75db\u70b9\uff0c\u7b80\u5316\u4ea4\u4e92\uff0c\u5b8c\u5584\u4f53\u9a8c\u3002</li> <li>\u6280\u672f\u56e2\u961f</li> <li>1\uff09\u5229\u7528\u6280\u672f\u624b\u6bb5\uff0c\u6ee1\u8db3<code>\u4ea7\u54c1\u56e2\u961f</code>\u7684\u4ea7\u54c1\u6253\u78e8\u3002</li> <li>2\uff09\u901a\u8fc7\u6280\u672f\u4f18\u5316\uff0c\u5c3d\u53ef\u80fd\u89e3\u51b3\u6280\u672f\u5e26\u6765\u7684\u5404\u79cd\u6210\u672c\u3002</li> <li>3\uff09\u5229\u7528\u6570\u636e\u5206\u6790\u7684\u624b\u6bb5\uff0c\u7ed9\u4ea7\u54c1\u548c\u8fd0\u8425\u4ee5\u5404\u79cd\u6570\u636e\u652f\u6491\u548c\u6307\u5bfc\uff0c\u65b9\u4fbf\u5176\u51b3\u7b56</li> <li>\u8fd0\u8425\u56e2\u961f</li> <li>\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u6790\uff0c\u627e\u51fa\u7528\u6237\u7684\u7279\u5f81\uff0c\u505a\u66f4\u597d\u7684\u8fd0\u8425\u7b56\u7565</li> </ul>"},{"location":"posts/growth%20hacking/#_4","title":"\u4e07\u53d8\u4e0d\u79bb\u6570\u636e","text":"<p>\u4efb\u4f55\u624b\u6bb5\u548c\u5de5\u4f5c\u90fd\u662f\u4ee5\u7ed3\u679c\u4e3a\u5bfc\u5411\u7684\u3002\u6240\u4ee5\uff0c\u6307\u5b9a\u76ee\u6807\u5f88\u91cd\u8981\uff0c\u800c\u4e14\u5fc5\u987b\u91cf\u5316\u3002\u65e0\u6cd5\u91cf\u5316\u7684\u76ee\u6807\u4e0d\u53eb\u505a\u76ee\u6807\uff0c\u53eb\u505a\u53e3\u53f7\u3002</p> <p>\u8981\u80fd\u91cf\u5316\u76ee\u6807\u5c31\u5fc5\u987b\u8981\u6709\u6570\u636e\u6307\u5bfc\uff0c\u4e5f\u5c31\u662f<code>\u6280\u672f\u56e2\u961f</code>\u9700\u8981\u652f\u6491\u7684\u3002\u5f53\u7136\uff0c\u5177\u4f53\u8981\u5173\u5fc3\u54ea\u4e9b\u6570\u636e\u4ee5\u53ca\u5176\u7b97\u6cd5\u5e94\u8be5\u7531<code>\u4ea7\u54c1\u56e2\u961f</code>\u548c<code>\u8fd0\u8425\u56e2\u961f</code>\u51b3\u5b9a\u3002\u4e00\u4e2a\u4e0d\u61c2\u5f97\u8981\u770b\u54ea\u4e9b\u6570\u636e\u7684<code>\u4ea7\u54c1</code>\u548c<code>\u8fd0\u8425</code>\u4e0d\u662f<code>\u597d\u4ea7\u54c1</code>\u548c<code>\u597d\u8fd0\u8425</code>\u3002</p> <p>\u6570\u636e\u8981\u7ecf\u5e38\u8fed\u4ee3\u548c\u4fee\u6b63\u3002\u4ea7\u54c1\u4e0d\u540c\u9636\u6bb5\uff0c\u5176\u76ee\u6807\u4e5f\u4e0d\u4e00\u6837\u3002\u4f8b\u5982\u4e00\u5f00\u59cb\u8003\u8651<code>\u62c9\u65b0</code>\uff0c\u63a5\u4e0b\u6765\u8003\u8651<code>\u7559\u5b58</code>\uff0c\u540e\u7eed\u53ef\u80fd\u8003\u8651<code>\u5546\u4e1a</code>\u3002\u6240\u4ee5\uff0c\u6570\u636e\u4e5f\u8981\u8fdb\u884c\u8fed\u4ee3\u548c\u4fee\u6b63\u3002</p>"},{"location":"posts/growth%20hacking/#_5","title":"\u603b\u7ed3","text":"<p>\u53ef\u89c1\uff0c<code>\u9ed1\u5ba2\u589e\u957f</code> \u4e0d\u662f\u8bf4\u589e\u957f\u5c31\u80fd\u589e\u957f\u7684\u3002\u81f3\u5c11\u5148\u8981\u4fdd\u8bc1\u4e0b\u9762\u524d\u63d0\uff1a</p> <ul> <li>1\uff09\u4ea7\u54c1\u7684\u5927\u65b9\u5411\u6b63\u786e</li> <li>2\uff09\u4ea7\u54c1\u7684\u4f53\u68c0\u826f\u597d </li> </ul> <p>\u8fd9\u6837\u624d\u80fd\u6709\u673a\u4f1a\u3002\u5728\u524d\u63d0\u6b63\u786e\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u56f4\u7ed5\u4e0b\u9762\u51e0\u70b9\u6765\u505a\u6587\u7ae0\u3002</p> <ul> <li>1\uff09Acquisition\uff08\u83b7\u53d6\u7528\u6237\uff09</li> <li>2\uff09Activation\uff08\u6fc0\u53d1\u6d3b\u8dc3\uff09</li> <li>3\uff09Retention\uff08\u63d0\u9ad8\u7559\u5b58\uff09</li> <li>4\uff09Revenue\uff08\u589e\u52a0\u6536\u5165\uff09</li> <li>5\uff09Referral\uff08\u4f20\u64ad\u63a8\u8350\uff09</li> </ul> <p>\u6bcf\u4e2a\u70b9\u90fd\u6709\u5f88\u591a\u65b9\u6cd5\u548c\u5de5\u5177\u3002\u8fd9\u91cc\u771f\u6ca1\u6709\u4ec0\u4e48\u63a8\u8350\u7684\uff0c\u611f\u89c9\u5c31\u662f\u7ecf\u9a8c\u7684\u79ef\u7d2f\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/","title":"Hibernate simple tutorials","text":"<p>+++ title = \"Hibernate\u5165\u95e8\u4f7f\u7528\" date = \"2008-07-24\"</p> <p>categories = [\"Tutorials\"] tags = [\"Java\", \"Hibernate\"] +++</p> <p>Hibernate\u5165\u95e8\u4f7f\u7528\u6587\u7ae0, \u4e3b\u8981\u8bb2\u5feb\u901f\u4f7f\u7528\uff0c\u4e0d\u4f1a\u4ecb\u7ecd\u592a\u591a\u7684\u6df1\u5c42\u6b21\u7684\u4e1c\u897f\u3002\u65b9\u4fbf\u81ea\u5df1\uff0c\u65b9\u4fbf\u5927\u5bb6\u3002\u56e0\u672c\u4eba\u61d2\u60f0\uff0c\u8bb0\u4e0d\u4f4fhibernate\u7684\u914d\u7f6e\u9009\u9879\uff0c\u6240\u4ee5\uff0c\u6b64\u6587\u5b9e\u4f8b\u90fd\u662f\u4f7f\u7528myeclipse\u8fdb\u884c\u5feb\u901f\u5f00\u53d1\uff0c\u6570\u636e\u5e93\u90fd\u662fmysql\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#_1","title":"\u521d\u6b21\u4f7f\u7528","text":"<p>\u76f4\u63a5\u4e0a\u9700\u6c42\uff1a\u5b9e\u73b0\u5bf9\u7528\u6237\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\uff0c\u7528\u6237\u5c312\u4e2a\u5c5e\u6027 \u7528\u6237ID\u548c\u7528\u6237\u540d\u3002\u5b9e\u4f53\u6a21\u578b\u5982\u4e0b\uff1a</p> <p></p> <p>\u5efa\u7acb\u5de5\u7a0b:HibernateQuickUse\uff0c\u5e76\u4e14\u5efa\u7acb\u5305\u3002\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo","title":"Pojo","text":"<p>\u6839\u636e\u5b9e\u4f53\uff0c\u521b\u5efa\u7c7bUser\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>@SuppressWarnings(\"serial\")\npublic class User implements java.io.Serializable {\n    private String id;\n    private String name;\n    public User() { }\n    public String getId() { return this.id; }   \n    public void setId(String id) { this.id = id; }  \n    public String getName() { return this.name; }\n    public void setName(String name) {this.name = name;}\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#db","title":"DB","text":"<p>\u6839\u636e\u5b9e\u4f53\uff0c\u521b\u5efa\u6570\u636e\u8868\u3002sql\u5982\u4e0b\uff1a</p> <pre><code>use HibernateQuickUse;\ndrop table if exists User;\ncreate table user (\n    id varchar(32) primary key,\n    name varchar(32)\n);\n</code></pre> <p>\u8fd9\u91cc\u7684id\uff0c\u6211\u6ca1\u6709\u91c7\u7528Integer auto_increment, \u539f\u56e0\u662f\u4e3a\u4e86\u6570\u636e\u5e93\u7684\u6570\u636e\u80fd\u65b9\u4fbf\u7684\u5bfc\u5165\u5230\u53e6\u5916\u4e00\u79cd\u6570\u636e\u5e93\u91cc\u9762\uff0c\u6bd4\u65b9\u8bf4\uff1aoracle\u3002\u5f53\u7136\uff0c\u8fd9\u4e2a\u662f\u4ee5\u727a\u7272\u90e8\u5206\u6548\u7387\u4e3a\u524d\u63d0\u7684\u3002\u56e0\u4e3aid\u662finteger\u7684\uff0c\u80fd\u66f4\u52a0\u5feb\u901f\u67e5\u8be2\u3002\u4e0d\u8fc7\uff0c\u4ece\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u4e3a primary key \u5efa\u7acb index\u6765\u770b\uff0c\u6548\u7387\u4e5f\u4e0d\u4f1a\u76f8\u5dee\u592a\u591a\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#hibernatecfgxml","title":"hibernate.cfg.xml","text":"<p>\u8981\u60f3\u901a\u8fc7hibernate\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u9996\u5148\u8981\u5efa\u7acb\u63cf\u8ff0\u6570\u636e\u5e93\u7684\u6587\u4ef6\uff1ahibernate.cfg.xml\u3002\u653e\u5230src\u4e0b\u9762\u3002\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC  \n            \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"  \n            \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;  \n&lt;hibernate-configuration&gt;  \n    &lt;session-factory&gt; \n        &lt;!-- dialect, \u8fd9\u4e2a\u5bf9\u5e94\u7740hibernate\u751f\u6210\u54ea\u79cd\u6570\u636e\u5e93\u7684sql\u3002--&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;  \n        &lt;property name=\"connection.url\"&gt;jdbc:mysql://localhost:3306/hibernatequickUse&lt;/property&gt;  \n        &lt;property name=\"connection.username\"&gt;root&lt;/property&gt;  \n        &lt;property name=\"connection.password\"&gt;root&lt;/property&gt;  \n        &lt;property name=\"connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;  \n        &lt;!-- show_sql, \u8fd9\u4e2a\u662f\u4e3a\u4e86\u8c03\u8bd5\u65f6\u5019\u8f93\u51fasql\u8bed\u53e5\u5230\u5c4f\u5e55\u7528 --&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;  \n        &lt;mapping resource=\"org/py/hib/quickstart/User.hbm.xml\" /&gt;  \n    &lt;/session-factory&gt;  \n&lt;/hibernate-configuration&gt;\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#userhbmxml","title":"User.hbm.xml","text":"<p>\u5b9e\u4f53-\u6570\u636e\u5e93\u6620\u5c04\u6587\u4ef6 -- \u4e3b\u8981\u662f\u544a\u8bc9hibernate\uff0c\u8fd9\u4e2aUser\u7c7b\uff0c\u5bf9\u5e94\u7740\u54ea\u4e2atable\uff0cUser\u7c7b\u91cc\u9762\u7684\u90a3\u4e2a\u5c5e\u6027\u5bf9\u5e94\u7740table\u91cc\u9762\u7684\u54ea\u4e2a\u5b57\u6bb5\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb \u5b9e\u4f53-\u6570\u636e\u5e93 \u7684xml\u6620\u5c04\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u91c7\u7528Annotations\u6620\u5c04\uff0c\u4f46\u662f\u76ee\u524d\u53ea\u8bf4xml\u6620\u5c04\u65b9\u5f0f\u3002\u5982\u4e0b\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.quickstart.User\" table=\"user\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"id\" length=\"32\"&gt;  \n            &lt;!-- id\u7684\u751f\u6210\u7b56\u7565\u91c7\u7528 uuid\uff0c\u4e5f\u53ef\u4ee5\u662f native\u7b49 --&gt;\n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;\n        &lt;property name=\"name\"  type=\"java.lang.String\" column=\"name\" length=\"32\" /&gt;  \n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#testing","title":"Testing","text":"<p>\u6709\u4e86\u4e0a\u9762\u7684\u51c6\u5907\uff0c\u90a3\u4e48\u6211\u4eec\u5f00\u59cb\u6765\u7528junit\u6d4b\u8bd5. \u6211\u628a\u6d4b\u8bd5\u7528\u529b\u653e\u5230\u4e86test/org.py.hib.quickstart\u4e0b\u9762\u3002\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>import junit.framework.Assert;\nimport junit.framework.TestCase;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.junit.After;\nimport org.junit.Before;\n\npublic class QuickStartTest extends TestCase {\n    SessionFactory factory;\n    String m_name = \"ryanpoy\";\n    String m_name2 = \"ryanpoy2\";\n\n    @Before\n    public void setUp() throws Exception {\n        Configuration conf = new Configuration().configure();\n        factory = conf.buildSessionFactory();\n    }\n\n    public void testSave() throws Exception {\n        System.out.println(\"\\n=== test save ===\");\n        User u = new User();\n        u.setName(m_name); // \u8bbe\u7f6e\u7528\u6237\u540d = m_name\n\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n            session.save(u);\n            tran.commit();\n\n            Assert.assertEquals(u.getId() != null, true);\n        } catch (Exception ex) {\n            tran.rollback();\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testFind() throws Exception {\n        System.out.println(\"=== test find ===\");\n        Session session = null;\n        try {\n            session = factory.openSession();\n            User u = (User) session.createQuery(\" from User\").list().get(0);\n\n            Assert.assertEquals(true, u.getId() != null);\n            Assert.assertEquals(m_name, u.getName());\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testModify() throws Exception {\n        System.out.println(\"\\n=== test modify ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n            User u = (User) session.createQuery(\" from User\").list().get(0);\n            u.setName(m_name2);  // \u4fee\u6539\u7528\u6237\u540d = m_name2.\uff08\u539f\u6765\u7528\u6237\u540d= m_name\uff09\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u4fee\u6539\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after modify ===\");\n        try {\n            session = factory.openSession();\n            User u = (User) session.createQuery(\" from User\").list().get(0);\n\n            Assert.assertEquals(true, u.getId() != null);\n            Assert.assertEquals(m_name2, u.getName());\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testDelete() throws Exception {\n        System.out.println(\"\\n=== test delete ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            User u = (User) session.createQuery(\" from User\").list().get(0);\n            session.delete(u);\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u5220\u9664\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after delete ===\");\n        try {\n            session = factory.openSession();\n            Integer num = (Integer) session.createQuery(\" from User\").list().size();\n\n            Assert.assertEquals(0, num.intValue());\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        factory.close();\n    }\n}\n</code></pre> <p>\u8fd0\u884c\u540e\uff0c\u6211\u4eec\u5f88\u6b23\u6170\u7684\u770b\u5230\u4e00\u8def\u7eff\u706f\uff0c\u5168\u90e8\u901a\u8fc7\u4e86\u3002\u90a3\u4e48\u6d4b\u8bd5\u6ca1\u6709\u95ee\u9898\u3002\u5475\u5475(\u8fd9\u91cc\u7684\u6d4b\u8bd5\u53ef\u80fd\u8fd8\u4e0d\u5b8c\u5584\u3002\u8bf7\u5927\u5bb6\u6307\u51fa\u3002\u524d\u9762\u8bf4\u8fc7\uff0c\u6211\u5bf9\u6d4b\u8bd5\u8fd9\u5757\u4e5f\u4e0d\u719f)\u3002</p> <p>\u770b\u63a7\u5236\u53f0\uff0c\u4f1a\u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>=== test save ===\nHibernate: insert into hibernatequickuse.user (name, id) values (?, ?)\n\n=== test find ===\nHibernate: select user0_.id as id2_, user0_.name as name2_ from hibernatequickuse.user user0_\n\n=== test modify ===\nHibernate: select user0_.id as id4_, user0_.name as name4_ from hibernatequickuse.user user0_\nHibernate: update hibernatequickuse.user set name=? where id=?\n\n=== test find after modify ===\nHibernate: select user0_.id as id4_, user0_.name as name4_ from hibernatequickuse.user user0_\n\n=== test delete ===\nHibernate: select user0_.id as id6_, user0_.name as name6_ from hibernatequickuse.user user0_\nHibernate: delete from hibernatequickuse.user where id=?\n\n=== test find after delete ===\nHibernate: select user0_.id as id6_, user0_.name as name6_ from hibernatequickuse.user user0_\n</code></pre> <p>\u8fd9\u4e9b\uff0c\u5c31\u662fhibernte\u81ea\u52a8\u751f\u6210\u7684\u3002\u4ed4\u7ec6\u770b\u770b\uff0c\u5176\u5b9e\u5c31\u662f\u6807\u51c6sql\u3002\u5475\u5475\u3002\u61c2jdbc\u7684\u90fd\u80fd\u770b\u61c2\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#xml-11","title":"xml\u5173\u7cfb\u6620\u5c04 1:1","text":"<p>1\u5bf91\u7684\u5173\u7cfb\u5728\u73b0\u5b9e\u4e2d\u5f88\u5e38\u89c1\u3002\u6bd4\u65b9\u8bf4\uff1a\u4eba\u548c\u8eab\u4efd\u8bc1\u30021\u4e2a\u8eab\u4efd\u8bc1\u5bf9\u5e94\u7740\u4e00\u4e2a\u8eab\u4efd\u8bc1\uff0c\u4e00\u4e2a\u8eab\u4efd\u8bc1\u5bf9\u5e94\u7740\u4e00\u4e2a\u4eba\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u4ee5\u6b64\u4e3a\u539f\u578b\u3002\u8fdb\u884c\u4ee3\u7801\u7f16\u5199\u3002</p> <p>\u5b9e\u4f53\u6a21\u578b</p> <p></p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_1","title":"DB","text":"<p>\u6839\u636e\u6a21\u578b\uff0c\u521b\u5efa\u6570\u636e\u5e93\uff1a</p> <pre><code>use HibernateQuickUse;\ndrop table if exists Person;\ndrop table if exists Card;\n\ncreate table Card (\n    id varchar(32) primary key,\n    cardDesc varchar(128) not null\n);\n\ncreate table Person (\n    id varchar(32) primary key,\n    name varchar(32) not null,\n    card_id varchar(32) not null,\n    foreign key(card_id) references Card(id)\n);\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_1","title":"Pojo","text":"<p>java\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>Person\u7c7b</p> <pre><code>\n@SuppressWarnings(\"serial\")\npublic class Person implements java.io.Serializable {\n    private String id;\n    private String name;\n    private Card card;\n\n    public Person() { }\n\n    public String getId() { return this.id; }\n    public void setId(String id) { this.id = id; }\n\n    public Card getCard() {return this.card;}\n    public void setCard(Card card) { this.card = card; }\n\n    public String getName() { return this.name; }\n    public void setName(String name) { this.name = name; }\n}\n</code></pre> <p>Card\u7c7b\uff1a</p> <pre><code>@SuppressWarnings(\"serial\")\npublic class Card implements java.io.Serializable\n{\n    private String id;\n\n    private String cardDesc;\n\n    public Card() { }\n\n    public String getId() { return this.id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getCardDesc() { return cardDesc; }\n    public void setCardDesc(String cardDesc) { this.cardDesc = cardDesc; }\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#mapping-xml","title":"Mapping Xml","text":"<p>xml\u6620\u5c04\u6587\u4ef6\u5982\u4e0b\uff1a</p> <p>Person.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.one2one.Person\" table=\"person\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"id\" length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\"&gt;  \n            &lt;column name=\"name\" length=\"32\" /&gt;  \n        &lt;/property&gt;  \n\n        &lt;many-to-one name=\"card\" class=\"org.py.hib.relation.one2one.Card\" unique=\"true\"  \n            cascade=\"all\" column=\"card_id\" /&gt;  \n\n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt;\n</code></pre> <p>\u4eca\u5929\u8bb2\u7684\u662fone-to-one\u914d\u7f6e\u3002\u4f46\u662f\uff0c\u6b64\u5904\u7528\u7684\u662fmany-to-one\uff0c\u8fd9\u4e2a\u662f\u4ec0\u4e48\u539f\u56e0\u5462\uff1f\u5176\u5b9e\uff0cone-to-one\u5c31\u662f\u7279\u6b8a\u7684many-to-one\u3002</p> <p>Card.hbm.xml\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.one2one.Card\" table=\"card\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"id\" length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"cardDesc\" type=\"java.lang.String\" column=\"cardDesc\" length=\"128\" not-null=\"true\"/&gt;  \n\n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt; \n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#testing_1","title":"Testing","text":"<p>\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>One2OneTest.java</p> <pre><code>import junit.framework.Assert;\nimport junit.framework.TestCase;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.junit.After;\nimport org.junit.Before;\n\npublic class One2OneTest extends TestCase {\n    private SessionFactory factory;\n    private String m_name = \"ryanpoy\";\n    private String m_name2 = \"ryanpoy2\";\n    private String m_cardDesc1 = \"desc_1\";\n    private String m_cardDesc2 = \"desc_2\";\n\n    @Before\n    public void setUp() throws Exception {\n        Configuration conf = new Configuration().configure();\n        factory = conf.buildSessionFactory();\n    }\n\n    public void testSave() throws Exception {\n        System.out.println(\"\\n=== test save ===\");\n\n        Card card = new Card();\n        card.setCardDesc(m_cardDesc1);\n\n        Person person = new Person();\n        person.setName(m_name); // \u8bbe\u7f6e\u7528\u6237\u540d = m_name\n        person.setCard(card);\n\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n\n            tran = session.beginTransaction();\n            session.save(person);\n            tran.commit();\n\n            Assert.assertEquals(person.getId() != null, true);\n            Assert.assertEquals(card.getId() != null, true);\n        } catch (Exception ex) {\n            tran.rollback();\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testFind() throws Exception {\n        System.out.println(\"\\n=== test find ===\");\n        Session session = null;\n        try {\n            session = factory.openSession();\n            Person person = (Person) session.createQuery(\"from Person\").list().get(0);\n\n            Assert.assertEquals(true, person.getId() != null);\n            Assert.assertEquals(m_name, person.getName());\n\n            Assert.assertEquals(true, person.getCard().getId() != null);\n            Assert.assertEquals(m_cardDesc1, person.getCard().getCardDesc());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testModify() throws Exception {\n        System.out.println(\"\\n=== test modify ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Person person = (Person) session.createQuery(\"from Person\").list().get(0);\n            person.setName(m_name2); // \u4fee\u6539\u7528\u6237\u540d = m_name2.\uff08\u539f\u6765\u7528\u6237\u540d= m_name\uff09\n            person.getCard().setCardDesc(m_cardDesc2); // \u4fee\u6539cardDesc \u4e3a m_cardDesc2 (\u539f\u6765\u662f\uff1am_cardDesc1)\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        System.out.println(\"\\n=== test find after modify ===\");\n        try {\n            session = factory.openSession();\n            Person person = (Person) session.createQuery(\"from Person\").list().get(0);\n\n            Assert.assertEquals(true, person.getId() != null);\n            Assert.assertEquals(m_name2, person.getName());\n\n            Assert.assertEquals(true, person.getCard().getId() != null);\n            Assert.assertEquals(m_cardDesc2, person.getCard().getCardDesc());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n\n    public void testDelete() throws Exception {\n        System.out.println(\"\\n=== test delete ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Person person = (Person) session.createQuery(\"from Person\").list().get(0);\n            session.delete(person);\n            tran.commit();\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u5220\u9664\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after delete ===\");\n        try {\n            session = factory.openSession();\n\n            Integer num = (Integer) session.createQuery(\"from Person\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n            num = (Integer) session.createQuery(\"from Card\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        factory.close();\n    }\n\n}\n</code></pre> <p>\u8fd0\u884ctest\uff0c\u4e00\u8def\u98da\u7eff\u3002\u5475\u5475\u3002\u9676\u9189\u4e00\u756a\u3002\u4e0d\u8fc7\uff0c\u8fd9\u4e5f\u5c31\u662f\u4e00\u4e2a\u62ff\u4e0d\u51fa\u624b\u7684\u6d4b\u8bd5\u548c\u4e00\u4e2a\u62ff\u4e0d\u51fa\u624b\u7684\u4f8b\u5b50\u3002\u6ca1\u6709\u4efb\u4f55\u5b9e\u9645\u610f\u4e49\u7684\u4f8b\u5b50\u3002\u4ec5\u6b64\u4e00\u4e2ademo\u800c\u5df2\u3002</p> <p>\u57281\uff1a1\u4e2d\uff0c\u5176\u5b9e\u8fd8\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u5373\uff1a\u552f\u4e00\u4e3b\u89c1\u5173\u8054\u3002\u4f46\u662f\uff0c\u6211\u4e00\u76f4\u503e\u5411\u4e8e\u4e0a\u9762\u7684\u8fd9\u79cd\u5f62\u5f0f\uff0c\u6240\u4ee5\uff0c\u552f\u4e00\u4e3b\u89c1\u5173\u8054\u7684\u5c31\u4e0d\u518d\u4ecb\u7ecd\u4e86\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#xml-1n","title":"xml\u5173\u7cfb\u6620\u5c04 1:n","text":"<p>\u56e0\u4e3an:1\u5c31\u662f1:1\uff0c\u4e24\u8005\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u4e0d\u5355\u72ec\u8bf4\u4e86\u3002\u4e0b\u9762\u4e3b\u8981\u8bb2\u4e3b\u8981\u8bb21:n\uff1a</p> <p>\u8fd9\u6b21\u7528\u5230\u7684\u4f8b\u5b50\u662fFather\u548cchild\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\u4e00\u4e2afather\u53ef\u4ee5\u6709n\u4e2achild\uff0c\u4f46\u662f1\u4e2achild\u53ea\u6709\u4e00\u4e2afather\u3002\u8fd9\u91cc\u53ea\u8bf4\u751f\u7236\u3002\u81f3\u4e8e\u5176\u4ed6\u7684\u7ee7\u7236\u3001\u517b\u7236\u3001\u5e72\u7239\u7b49\u7b49\uff0c\u4e0d\u518d\u8303\u56f4\u4e4b\u5185\u3002</p> <p>\u5efa\u7acb\u5b9e\u4f53\u6a21\u578b\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_2","title":"DB","text":"<p>\u6839\u636e\u6a21\u578b\u521b\u5efa\u6570\u636e\u5e93\u3002sql\u811a\u672c\u5982\u4e0b\uff1a</p> <pre><code>use HibernateQuickUse;\ndrop table if exists Child;\ndrop table if exists Father;\n\ncreate table Father (\n    id varchar(32) primary key,\n    name varchar(32) not null\n);\n\ncreate table Child (\n    id varchar(32) primary key,\n    name varchar(128) not null,\n    father_id varchar(32) not null,\n    foreign key(father_id) references Father(id)\n);\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_2","title":"Pojo","text":"<p>\u6839\u636e\u6a21\u578b\u521b\u5efajava\u5bf9\u8c61\u3002</p> <p>Father.java\uff1a</p> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\n@SuppressWarnings(\"serial\")\npublic class Father implements java.io.Serializable\n{\n    private String id;\n    private String name;\n    private Set children = new HashSet(0);\n\n    public String getId() { return this.id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getName() { return this.name; }\n    public void setName(String name) { this.name = name; }\n\n    public Set getChildren() { return children; }\n    public void setChildren(Set children) { this.children = children; }\n}\n</code></pre> <p>Child.java\uff1a</p> <pre><code>\n@SuppressWarnings(\"serial\")\npublic class Child implements java.io.Serializable\n{\n    private String id;\n    private String name;\n    private Father father;\n\n    public String getId() { return this.id; }\n    public void setId(String id) { this.id = id; }\n\n    public Father getFather() { return this.father; }\n    public void setFather(Father father) { this.father = father; }\n\n    public String getName() { return this.name; }\n    public void setName(String name) { this.name = name;}\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#mapping-xml_1","title":"Mapping Xml","text":"<p>\u6620\u5c04\u6587\u4ef6\u5982\u4e0b\uff1a</p> <p>Father.hbm.xml\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.one2many.Father\" table=\"father\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"id\" length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\" length=\"32\" not-null=\"true\"/&gt;  \n\n        &lt;set name=\"children\" table=\"child\" cascade=\"all\" inverse=\"true\"&gt;  \n            &lt;key column=\"father_id\" /&gt;  \n            &lt;one-to-many class=\"org.py.hib.relation.one2many.Child\" /&gt;  \n        &lt;/set&gt;  \n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt; \n</code></pre> <p>\u8fd9\u91cc\u8981\u8bf4\u8bf4 \"set\" \u8fd9\u4e2a\u6807\u7b7e\u91cc\u9762\u7684\u5185\u5bb9\u3002</p> <ol> <li>\"name\"\u662fFather\u91cc\u9762\u7684\u5c5e\u6027\u7684\u540d\u5b57\u3002</li> <li>\"table\"\u8868\u793a\u5b83\u5bf9\u5e94\u7684\u662f\u6570\u636e\u5e93\u4e2d\u7684\u54ea\u4e2a\u8868\u3002</li> <li>cascade=\"all\" \u8868\u793a\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u7ea7\u8054\u64cd\u4f5c\u3002</li> <li>\"inverse\"\u8868\u793a\u5173\u7cfb\u7684\u7ef4\u62a4\u7531\u8c01\u6765\u6267\u884c\u3002     &gt; true\u8868\u793a\u4e0d\u7531\u81ea\u5df1\u6267\u884c\uff0c\u800c\u6709\u5bf9\u5e94\u7684\u53e6\u5916\u4e00\u65b9\u6267\u884c\u3002     &gt; false\u5219\u76f8\u53cd\uff0c\u8868\u793a\u7531\u81ea\u5df1\u7ef4\u62a4\u5173\u7cfb\u3002     &gt; \u8fd9\u91cc\u8bbe\u7f6e\u6210 true \u662f\u7531\u539f\u56e0\u7684\u3002\u5982\u679c\u8bf4\u628a\u5b83\u8bbe\u7f6e\u6210\u4e3afalse\uff0c\u90a3\u4e48\u5c31\u7531\u4ed6\u6765\u7ef4\u62a4\u5173\u7cfb\u4e86\u3002</li> </ol> <p>\u8fd9\u91cc\u5f97\u8bf4\u4e00\u4e0binverse\u5c5e\u6027\u7684\u95ee\u9898\u3002\u5728one-to-many\u4e2d\uff0c\u5982\u679c\u5173\u7cfb\u7531one\u6765\u7ef4\u62a4\uff0c\u90a3\u4e48\u4f1a\u5f88\u9ebb\u70e6\uff0c\u6027\u80fd\u4e5f\u4f1a\u5f88\u4f4e\u3002\u6bcf\u6b21\u5bf9many\u4e00\u65b9\u7684\u4e00\u6761\u8bb0\u5f55\u8fdb\u884c\u589e\u3001\u5220\u3001\u6539 \u65f6\u90fd\u4f1a\u591a\u4e00\u6b21update\u64cd\u4f5c\u3002\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a\u5173\u7cfb\u7684\u7ef4\u62a4\u8bbe\u7f6e\u5728\u4e86one\u8fd9\u4e00\u65b9\uff0c\u6240\u4ee5\u5bf9many\u7684\u6bcf\u4e00\u6b21\u64cd\u4f5c\uff0cone\u8fd9\u4e00\u65b9\u90fd\u8981\u7ef4\u62a4\u4e00\u6b21\u53cc\u65b9\u7684\u5173\u7cfb\u3002</p> <p>\u8fd9\u4e2a\u5c31\u597d\u50cf\u7687\u5e1d\u548c\u8001\u767e\u59d3\u7684\u5173\u7cfb\u3002\u8bd5\u95ee\uff0c\u662f\u6765\u4e00\u4e2a\u8001\u767e\u59d3\uff0c\u7687\u5e1d\u5c31\u5ba3\u5e03\u4ed6\u662f\u6211\u7684\u5b50\u6c11\uff0c\u8fd8\u662f\u7531\u8001\u767e\u59d3\u76f4\u63a5\u9009\u62e9\u505a\u90a3\u4e2a\u7687\u5e1d\u7684\u5b50\u6c11\u66f4\u52a0\u6709\u6548\u7387\u5462\uff1f\u5475\u5475\u3002\u4e0d\u77e5\u9053\u8fd9\u4e2a\u4f8b\u5b50\u5927\u5bb6\u6709\u6ca1\u6709\u660e\u767d\u3002\u5173\u4e8einverse\u7684\u66f4\u5177\u4f53\u7684\u8bf4\u660e\uff0c\u5728javaeye\u4e0a\u641c\u4e00\u4e0b\uff0c\u5c31\u4f1a\u53d1\u73b0\u6709\u5f88\u591a\u3002\u8fd9\u91cc\u63a8\u8350\u4e00\u7bc7\uff0c\u6211\u8ba4\u4e3a\u8bb2\u5f97\u5f88\u660e\u767d\u7684\uff1a inverse </p> <p>\"key\" \u4e2d\u7684 \"column\" \u8868\u793a\u5728table(\u8fd9\u91cc\u7684table\u662fchild)\u4e2d, \u8ddfFather\u5173\u8054\u7684\u5b57\u6bb5\u540d\u79f0\u3002\u8fd9\u91cc\u662f\"father_id\"\u3002\u53ef\u4ee5\u770b\u770b\u5f00\u59cb\u7684sql\u811a\u672c\u3002</p> <p>one-to-many \u8868\u793afather\u548cchildren\u7684\u5173\u7cfb\u3002class\u5219\u8868\u793a\u662f\u540c\u54ea\u4e2a\u7c7b\u662f\u8fd9\u79cd\u5173\u7cfb\u3002</p> <p>Child.hbm.xml\uff1a</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.one2many.Child\" table=\"child\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"id\" length=\"32\" &gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\" length=\"128\" not-null=\"true\"/&gt;  \n\n        &lt;many-to-one name=\"father\" class=\"org.py.hib.relation.one2many.Father\" column=\"father_id\" /&gt;  \n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt; \n</code></pre> <p>\u8fd9\u4e2a\u91cc\u9762\u4e3b\u8981\u5c31\u662f\u591a\u4e86\u4e00\u4e2amany-to-one\uff0c\u8868\u793achild \u548c father \u7684\u5173\u7cfb\u662f\"many-to-one\"</p>"},{"location":"posts/hibernate%20simple%20tutorials/#testing_2","title":"Testing","text":"<p>\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>One2ManyTest.java</p> <pre><code>import java.util.Set;\n\nimport junit.framework.Assert;\nimport junit.framework.TestCase;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.junit.After;\nimport org.junit.Before;\n\npublic class One2ManyTest extends TestCase {\n    private SessionFactory factory;\n    private static final String[] childname = new String[]{\"child_1\", \"child_2\", \"child_3\"};\n    private static final String[] newchildname = new String[]{\"new_child_1\", \"new_child_2\", \"new_child_3\"};\n\n    @Before\n    public void setUp() throws Exception {\n        Configuration conf = new Configuration().configure();\n        factory = conf.buildSessionFactory();\n    }\n\n\n    public void testSave() throws Exception {\n        System.out.println(\"\\n=== test save ===\");\n\n        Father father = new Father();\n        father.setName(\"Father_1\");\n\n        Child child1 = new Child();\n        child1.setName(childname[0]);\n\n        Child child2 = new Child();\n        child2.setName(childname[1]);\n\n        Child child3 = new Child();\n        child3.setName(childname[2]);\n\n        father.getChildren().add(child1);\n        father.getChildren().add(child2);\n        father.getChildren().add(child3);\n\n        child1.setFather(father);\n        child2.setFather(father);\n        child3.setFather(father);\n\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n            session.save(father);\n\n            tran.commit();\n\n            Assert.assertNotNull(father.getId());\n\n            Assert.assertNotNull(child1.getId());\n            Assert.assertNotNull(child2.getId());\n            Assert.assertNotNull(child3.getId());\n\n        } catch (Exception ex) {\n            tran.rollback();\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    private boolean isChildrenName(String name) {\n        for (String n : childname) {\n            if (n.equals(name))\n                return true;\n        }\n\n        return false;\n    }\n\n    private boolean isNewChildrenName(String name) {\n        for (String n : newchildname) {\n            if (n.equals(name))\n                return true;\n        }\n\n        return false;\n    }\n\n    public void testFind() throws Exception {\n        System.out.println(\"\\n=== test find ===\");\n        Session session = null;\n        try {\n            session = factory.openSession();\n            Father father = (Father) session.createQuery(\"from Father\").list().get(0);\n\n            Assert.assertNotNull(father.getId());\n            Assert.assertEquals(\"Father_1\", father.getName());\n\n            Set children = father.getChildren();\n            for (Child child : children) {\n                Assert.assertEquals(child.getFather(), father);\n\n                Assert.assertNotNull(child.getId());\n\n                Assert.assertTrue(isChildrenName(child.getName()));\n            }\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testModify() throws Exception {\n        System.out.println(\"\\n=== test modify ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Father father = (Father) session.createQuery(\"from Father\").list().get(0);\n            father.setName(\"Father_2\"); // \u4fee\u6539\u7528\u6237\u540d = m_name2.\uff08\u539f\u6765\u7528\u6237\u540d= m_name\uff09\n\n            Set children = father.getChildren();\n            int i = 0;\n            for (Child child : children) {\n                child.setName(newchildname[i++]);\n            }\n\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u4fee\u6539\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after modify ===\");\n        try {\n            session = factory.openSession();\n            Father father = (Father) session.createQuery(\"from Father\").list().get(0);\n\n            Assert.assertNotNull(father.getId());\n            Assert.assertEquals(\"Father_2\", father.getName());\n\n            Set children = father.getChildren();\n\n            for (Child child : children) {\n                Assert.assertEquals(child.getFather(), father);\n\n                Assert.assertNotNull(child.getId());\n\n                Assert.assertTrue(isNewChildrenName(child.getName()));\n            }\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testDelete() throws Exception {\n        System.out.println(\"\\n=== test delete ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Father father = (Father) session.createQuery(\"from Father\").list().get(0);\n            session.delete(father);\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u5220\u9664\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after delete ===\");\n        try {\n            session = factory.openSession();\n\n            Integer num = (Integer) session.createQuery(\"from Father\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n            num = (Integer) session.createQuery(\"from Child\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        factory.close();\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u4e0d\u5f97\u4e0d\u518d\u91cd\u7533\u4ee5\u4e0b one-to-many \u4e2d inverse \u5173\u7cfb\u7684\u7ef4\u62a4\u95ee\u9898\u3002 \u5728one-to-many\u4e2d\uff0c\u628ainverse\u653e\u5230many\u4e2d\u6765\u7ef4\u62a4\u662f\u4e00\u4e2a\u597d\u7684\u4e60\u60ef\u3002\u5927\u5bb6\u53ef\u4ee5\u628a\u4e0a\u9762\u7684inverse\u6539\u6210false\uff0c\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48\u60c5\u51b5\u3002</p> <p>\u5728inverse=true\u7684\u65f6\u5019\uff0c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>=== test save ===\nHibernate: insert into father (name, id) values (?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\n\n=== test find ===\nHibernate: select father0_.id as id13_, father0_.name as name13_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id14_0_, children0_.name as name14_0_, children0_.father_id as father3_14_0_ from child children0_ where children0_.father_id=?\n\n=== test modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\nHibernate: update father set name=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\n\n=== test find after modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\n\n=== test delete ===\nHibernate: select father0_.id as id33_, father0_.name as name33_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id34_0_, children0_.name as name34_0_, children0_.father_id as father3_34_0_ from child children0_ where children0_.father_id=?\nHibernate: delete from child where id=?\nHibernate: delete from child where id=?\nHibernate: delete from child where id=?\nHibernate: delete from father where id=?\n\n=== test find after delete ===\nHibernate: select father0_.id as id33_, father0_.name as name33_ from father father0_\nHibernate: select child0_.id as id34_, child0_.name as name34_, child0_.father_id as father3_34_ from child child0_\n</code></pre> <p>\u800c\u6539\u6210inverse=false\u540e\uff0ctestDelete()\u662f\u6ca1\u6cd5\u901a\u8fc7\u7684\u3002\u8f93\u51fa\u5982\u4e0b\uff1a</p> <pre><code>log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).\nlog4j:WARN Please initialize the log4j system properly.\n\n=== test save ===\nHibernate: insert into father (name, id) values (?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: update child set father_id=? where id=?\nHibernate: update child set father_id=? where id=?\nHibernate: update child set father_id=? where id=?\n\n=== test find ===\nHibernate: select father0_.id as id13_, father0_.name as name13_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id14_0_, children0_.name as name14_0_, children0_.father_id as father3_14_0_ from child children0_ where children0_.father_id=?\n\n=== test modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\nHibernate: update father set name=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\n\n=== test find after modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\n\n=== test delete ===\nHibernate: select father0_.id as id33_, father0_.name as name33_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id34_0_, children0_.name as name34_0_, children0_.father_id as father3_34_0_ from child children0_ where children0_.father_id=?\nHibernate: update child set father_id=null where father_id=?\n</code></pre> <p>\u4ea7\u751f\u4e86\u9519\u8bef\uff0c\u539f\u56e0\u662f\uff1a\u8fdd\u53cd\u4e86\u975e\u7a7a\u7ea6\u675f\u3002</p> <p>\u5f97\u4fee\u6539sql\u811a\u672c\uff0c\u628aChild\u7684\u5efa\u8868\u811a\u672c\u4e2d\u7684\uff1a</p> <pre><code>father_id varchar(32) not null, \n</code></pre> <p>\u4fee\u6539\u6210\u4e3a\uff1a</p> <pre><code>father_id varchar(32),\n</code></pre> <p>\u624d\u80fd\u901a\u8fc7\u3002\u8fd9\u4e2a\u65f6\u5019\u8f93\u51fa\u7684\u7ed3\u679c\u662f\uff1a</p> <pre><code>log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).\nlog4j:WARN Please initialize the log4j system properly.\n\n=== test save ===\nHibernate: insert into father (name, id) values (?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: insert into child (name, father_id, id) values (?, ?, ?)\nHibernate: update child set father_id=? where id=?\nHibernate: update child set father_id=? where id=?\nHibernate: update child set father_id=? where id=?\n\n=== test find ===\nHibernate: select father0_.id as id13_, father0_.name as name13_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id14_0_, children0_.name as name14_0_, children0_.father_id as father3_14_0_ from child children0_ where children0_.father_id=?\n\n=== test modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\nHibernate: update father set name=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\nHibernate: update child set name=?, father_id=? where id=?\n\n=== test find after modify ===\nHibernate: select father0_.id as id23_, father0_.name as name23_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id24_0_, children0_.name as name24_0_, children0_.father_id as father3_24_0_ from child children0_ where children0_.father_id=?\n\n=== test delete ===\nHibernate: select father0_.id as id33_, father0_.name as name33_ from father father0_\nHibernate: select children0_.father_id as father3_1_, children0_.id as id1_, children0_.id as id34_0_, children0_.name as name34_0_, children0_.father_id as father3_34_0_ from child children0_ where children0_.father_id=?\nHibernate: update child set father_id=null where father_id=?\nHibernate: delete from child where id=?\nHibernate: delete from child where id=?\nHibernate: delete from child where id=?\nHibernate: delete from father where id=?\n\n=== test find after delete ===\nHibernate: select father0_.id as id33_, father0_.name as name33_ from father father0_\nHibernate: select child0_.id as id34_, child0_.name as name34_, child0_.father_id as father3_34_ from child child0_\n</code></pre> <p>\u6240\u4ee5\uff0cinverse\u7684\u8bbe\u7f6e\u662f\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u4e8b\u60c5\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#xml-nn","title":"xml\u5173\u7cfb\u6620\u5c04 n:n","text":"<p>\u6211\u4eec\u4ee5\u8001\u5e08\u548c\u5b66\u751f\u4e3a\u4f8b\uff0c\u4e00\u4e2a\u8001\u5e08\u53ef\u4ee5\u4ea4\u5f88\u591a\u5b66\u751f\uff0c\u540c\u6837\u4e00\u4e2a\u5b66\u751f\u53ef\u4ee5\u62e5\u6709\u591a\u4e2a\u8001\u5e08\uff0c\u6240\u4ee5\uff0c\u4ed6\u4eec\u4e4b\u95f4\u7684\u5173\u7cfb\u5c31\u662fn\uff1an\u7684\u3002</p> <p>\u5b9e\u4f53\u6a21\u578b\uff1a </p> <p>\u4ece\u5b9e\u4f53\u6a21\u578b\u6765\u770b\u3002\u67092\u4e2a\u5bf9\u8c61\uff0c\u4f46\u662f\u4e3a\u4e86\u5728\u6570\u636e\u5e93\u4e2d\u8868\u793a\u51fa2\u8005\u7684n:n\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u8fd8\u5f97\u5f15\u5165\u4e00\u5f20\u8868\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_3","title":"DB","text":"<p>sql\u811a\u672c\u5982\u4e0b\uff1a</p> <pre><code>use HibernateQuickUse;\ndrop table if exists teacher_student_relation;\ndrop table if exists Teacher;\ndrop table if exists Student;\n\ncreate table Teacher (\n    tid varchar(32) primary key,\n    name varchar(32) not null\n);\n\ncreate table Student (\n    sid varchar(32) primary key,\n    name varchar(128) not null\n);\n\ncreate table teacher_student_relation (\n    id integer auto_increment primary key,\n    teacher_id varchar(32) not null,\n    student_id varchar(32) not null,\n    foreign key(teacher_id) references Teacher(tid),\n    foreign key(student_id) references Student(sid)\n);\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_3","title":"Pojo","text":"<p>\u901a\u8fc7\u6a21\u578b\uff0c\u521b\u5efajava\u7c7b\u5982\u4e0b\uff1a</p> <p>Student.java</p> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\n@SuppressWarnings(\"serial\")\npublic class Student implements java.io.Serializable {\n    private String id;\n    private String name;\n    private Set teachers = new HashSet(0);\n\n    public Student() {}\n\n    public String getId() {return this.id;}\n    public void setId(String id) {this.id = id;}\n\n    public String getName() {return this.name;}\n    public void setName(String name) {this.name = name;}\n\n    public Set getTeachers() {return teachers;}\n    public void setTeachers(Set teachers) {this.teachers = teachers;}\n}\n</code></pre> <p>Teacher.java:</p> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\n@SuppressWarnings(\"serial\")\npublic class Teacher implements java.io.Serializable {\n    private String id;\n    private String name;\n    private Set students = new HashSet(0);\n\n    public Teacher() {}\n\n    public String getId() { return this.id;}\n    public void setId(String id) { this.id = id;}\n\n    public String getName() { return this.name;}\n    public void setName(String name) { this.name = name;}\n\n    public Set getStudents() { return students;}\n    public void setStudents(Set students) { this.students = students;}\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#mapping-xml_2","title":"Mapping Xml","text":"<p>xml\u6620\u5c04\u6587\u4ef6\u5982\u4e0b</p> <p>Student.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.many2many.Student\"  \n        table=\"student\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"sid\" length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\"  \n            length=\"128\" not-null=\"true\" /&gt;  \n\n        &lt;set name=\"teachers\" table=\"teacher_student_relation\" cascade=\"save-update\" inverse=\"false\"&gt;  \n            &lt;key column=\"student_id\" not-null=\"true\" /&gt;  \n\n            &lt;many-to-many column=\"teacher_id\"  \n                class=\"org.py.hib.relation.many2many.Teacher\"   \n                /&gt;  \n        &lt;/set&gt;  \n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt;\n</code></pre> <p>\u6ce8\u610f 1. set\u4e2d\u7684 table \u6307\u5411\u7684\u662f\u6570\u636e\u5e93\u4e2d\u7684\u5173\u8054\u8868\u3002 1. cascade \u7528\u7684\u662fsave-update , \u4e14inverse\u7528\u7684\u662ffalse\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u5f53\u8fdb\u884c\u4fee\u6539\u548c\u4fdd\u5b58\u548c\u5220\u9664\u65f6\uff0c\u5173\u8054\u8868\u4e2d\u7684\u8bb0\u5f55\u4e5f\u4f1a\u5220\u6389. 1. \u5982\u679ccascade \u7528\u7684\u662f all \u90a3\u4e48\u8fde\u540cstudent\u8868\u4e2d\u7684\u8bb0\u5f55\u4e5f\u4f1a\u88ab\u5220\u9664\u6389\u3002 1. key\u4e2d\u7684column\u6307\u7684\u662f\uff1a \u5173\u8054\u8868\u4e2d\u4e0eStudent\u53d1\u751f\u5173\u7cfb\u7684\u5b57\u6bb5\u3002 1. \u800cmany-to-many\u4e2d\u7684column\u6307\u7684\u662f\uff1a\u5173\u8054\u8868\u4e2d\uff0c\u4e0eclass(\u8fd9\u91cc\u662f\uff1aorg.py.hib.relation.many2many.Teacher)\u53d1\u751f\u5173\u7cfb\u7684\u5b57\u6bb5\u3002</p> <p>Teacher.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.many2many.Teacher\"  \n        table=\"teacher\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"tid\"  \n            length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\"  \n            length=\"32\" not-null=\"true\" /&gt;  \n\n        &lt;set name=\"students\" table=\"teacher_student_relation\" cascade=\"save-update\"  \n            inverse=\"false\"&gt;  \n            &lt;key column=\"teacher_id\" not-null=\"true\" /&gt;  \n            &lt;many-to-many class=\"org.py.hib.relation.many2many.Student\"  \n                column=\"student_id\" /&gt;  \n        &lt;/set&gt;  \n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt;\n</code></pre> <p>\u6ce8\u610f\uff1a \u8fd9\u91cc\u7684inverse\u4e5f\u91c7\u7528\u4e86false\uff0c\u8fd9\u6837\u5b50\u7684\u8bdd\uff0cTeacher\u548cStudent\u90fd\u7ef4\u62a4\u5173\u7cfb\u8868\u4e2d\u7684\u5173\u7cfb\u3002</p> <p>\u6d4b\u8bd5\u7c7b\uff0cMany2ManyTest.java</p> <pre><code>import java.util.Iterator;\nimport java.util.List;\nimport java.util.Set;\n\nimport junit.framework.Assert;\nimport junit.framework.TestCase;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.junit.After;\nimport org.junit.Before;\n\npublic class Many2ManyTest extends TestCase {\n    private SessionFactory factory;\n\n    @Before\n    public void setUp() throws Exception {\n        Configuration conf = new Configuration().configure();\n        factory = conf.buildSessionFactory();\n    }\n\n    public void testSave() throws Exception {\n        System.out.println(\"\\n=== test save ===\");\n\n        Teacher teacher1 = new Teacher();\n        teacher1.setName(\"teacher_1\");\n\n        Teacher teacher2 = new Teacher();\n        teacher2.setName(\"teacher_2\");\n\n        Student stu1 = new Student();\n        stu1.setName(\"student_1\");\n\n        Student stu2 = new Student();\n        stu2.setName(\"student_2\");\n\n        stu1.getTeachers().add(teacher1);\n        stu1.getTeachers().add(teacher2);\n\n        stu2.getTeachers().add(teacher2);\n        teacher1.getStudents().add(stu2);\n\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            session.save(stu1);\n            session.save(stu2);\n            tran.commit();\n\n            Assert.assertNotNull(teacher1.getId());\n            Assert.assertNotNull(teacher2.getId());\n\n            Assert.assertNotNull(stu1.getId());\n            Assert.assertNotNull(stu2.getId());\n\n        } catch (Exception ex) {\n            tran.rollback();\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    public void testFindFromTeacher() throws Exception {\n        System.out.println(\"\\n=== test find from Teacher ===\");\n        Session session = null;\n        try {\n            session = factory.openSession();\n            Iterator iter = session.createQuery(\"from Teacher\").iterate();\n            while (iter.hasNext()) {\n                Teacher teacher = iter.next();\n                Assert.assertNotNull(teacher.getId());\n                String teacherName = teacher.getName();\n                if (\"teacher_1\".equals(teacherName)) {\n                    Set stus = teacher.getStudents();\n                    Assert.assertEquals(stus.size(), 2);\n                    for (Student stu : stus) {\n                        String stuName = stu.getName();\n                        Assert.assertNotNull(stu.getId());\n                        Assert.assertTrue(stuName.equals(\"student_1\") || stuName.equals(\"student_2\"));\n                    }\n                } else if (\"teacher_2\".equals(teacherName)) {\n                    Set stus = teacher.getStudents();\n                    Assert.assertEquals(stus.size(), 2);\n\n                    for (Student stu : stus) {\n                        String stuName = stu.getName();\n                        Assert.assertNotNull(stu.getId());\n                        Assert.assertTrue(stuName.equals(\"student_1\") || stuName.equals(\"student_2\"));\n                    }\n                } else {\n                    throw new Exception(\"teacher name error exception.\");\n                }\n            }\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    public void testFindFromStudent() throws Exception {\n        System.out.println(\"\\n=== test find from Student ===\");\n        Session session = null;\n        try {\n            session = factory.openSession();\n            Iterator iter = session.createQuery(\"from Student\").iterate();\n            while (iter.hasNext()) {\n                Student stu = iter.next();\n                Assert.assertNotNull(stu.getId());\n                String stuName = stu.getName();\n                if (\"student_1\".equals(stuName)) {\n                    Set teachers = stu.getTeachers();\n                    Assert.assertEquals(teachers.size(), 2);\n                    for (Teacher teacher : teachers) {\n                        String tName = teacher.getName();\n                        Assert.assertNotNull(teacher.getId());\n                        Assert.assertTrue(tName.equals(\"teacher_1\") || tName.equals(\"teacher_2\"));\n                    }\n                } else if (\"student_2\".equals(stuName)) {\n                    Set teachers = stu.getTeachers();\n                    Assert.assertEquals(teachers.size(), 2);\n                    for (Teacher teacher : teachers) {\n                        String tName = teacher.getName();\n                        Assert.assertNotNull(teacher.getId());\n                        Assert.assertTrue(tName.equals(\"teacher_1\") || tName.equals(\"teacher_2\"));\n                    }\n                } else {\n                    throw new Exception(\"student name error exception.\");\n                }\n            }\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testModify() throws Exception {\n        System.out.println(\"\\n=== test modify ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Teacher t1 = (Teacher) session.createQuery(\"from Teacher t where t.name='teacher_1'\").list().get(0);\n            t1.setName(\"new_teacher_1\"); // \u4fee\u6539\u7528\u6237\u540d = m_name2.\uff08\u539f\u6765\u7528\u6237\u540d= m_name\uff09\n\n            Set stus = t1.getStudents();\n            for (Student stu : stus) {\n                if (stu.getName().equals(\"student_1\")) {\n                    stus.remove(stu);\n                    break;\n                }\n            }\n\n            tran.commit();\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u4fee\u6539\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find from Teacher after modify===\");\n        try {\n            session = factory.openSession();\n            Iterator iter = session.createQuery(\"from Teacher\").iterate();\n            while (iter.hasNext()) {\n                Teacher teacher = iter.next();\n                Assert.assertNotNull(teacher.getId());\n                String teacherName = teacher.getName();\n                if (\"new_teacher_1\".equals(teacherName)) {\n                    Set stus = teacher.getStudents();\n                    Assert.assertEquals(stus.size(), 1);\n                    for (Student stu : stus) {\n                        String stuName = stu.getName();\n                        Assert.assertNotNull(stu.getId());\n                        Assert.assertTrue(stuName.equals(\"student_2\"));\n                    }\n                } else if (\"teacher_2\".equals(teacherName)) {\n                    Set stus = teacher.getStudents();\n                    Assert.assertEquals(stus.size(), 2);\n\n                    for (Student stu : stus) {\n                        String stuName = stu.getName();\n                        Assert.assertNotNull(stu.getId());\n                        Assert.assertTrue(stuName.equals(\"student_1\") || stuName.equals(\"student_2\"));\n                    }\n                } else {\n                    throw new Exception(\"teacher name error exception.\");\n                }\n            }\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    public void testDelete() throws Exception {\n        System.out.println(\"\\n=== test delete ===\");\n        Session session = null;\n        Transaction tran = null;\n        try {\n            session = factory.openSession();\n            tran = session.beginTransaction();\n\n            Iterator iter = session.createQuery(\"from Teacher\").iterate();\n            while (iter.hasNext())\n                session.delete(iter.next());\n\n            tran.commit();\n\n            Integer count = (Integer) session.createQuery(\"select count(*) from Teacher\").list().get(0);\n            Assert.assertEquals(0, count.intValue());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n\n        /*\n         * \u5220\u9664\u540e\u518d\u67e5\u8be2\n         */\n        System.out.println(\"\\n=== test find after delete ===\");\n        try {\n            session = factory.openSession();\n\n            Integer num = (Integer) session.createQuery(\"from Teacher\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n            num = (Integer) session.createQuery(\"from Student\").list().size();\n            Assert.assertEquals(0, num.intValue());\n\n        } catch (Exception ex) {\n            throw ex;\n        } finally {\n            if (session != null) {\n                try {\n                    session.close();\n                } catch (Exception ex) {\n                    // nothing to do\n                } finally {\n                    if (session != null)\n                        session = null;\n                }\n            }\n        }\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        factory.close();\n    }\n\n}\n</code></pre> <p>\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0cmany-to-many\u4e2d\uff0c\u9700\u8981\u5f15\u5165\u7b2c3\u5f20\u8868\u6765\u8868\u793a\u5173\u7cfb\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#xml-case","title":"xml\u5173\u7cfb\u6620\u5c04 - \u590d\u6742\u7684case","text":"<p>\u9700\u6c42\uff1a\u4e08\u592b\u67091\u4e2a\u59bb\u5b50\uff0c\u8fd9\u6837\u662f1\u592b1\u59bb\u3002\u4f46\u662f\uff0c\u4e08\u592b\u82b1\u5fc3\uff0c\u540c\u65f6\u6709\u591a\u4e2a\u60c5\u5987\u3002</p> <p>\u4f8b\u5b50\u5f52\u4f8b\u5b50\uff0c\u5927\u5bb6\u4e0d\u8981\u505a\u8fd9\u6837\u7684\u4e08\u592b\u3002\u53ea\u662f\u4e3a\u4e86\u66f4\u52a0\u6df1\u5165\u8bb0\u5fc6\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_4","title":"DB","text":"<p>\u5148\u770bsql\uff1a</p> <pre><code>use HibernateQuickUse;\n\ndrop table if exists Paramour;\ndrop table if exists Husband;\ndrop table if exists Wife;\n\ncreate table Wife (\n    wid varchar(32) primary key,\n    name varchar(128) not null\n);\n\n\ncreate table Husband (\n    hid varchar(32) primary key,\n    name varchar(32) not null,\n    wife_id varchar(32) not null,\n    foreign key(wife_id) references Wife(wid)\n);\n\ncreate table Paramour (\n    pid varchar(32)  primary key,\n    name varchar(128) not null,\n    husband_id varchar(32) not null,\n    foreign key(husband_id) references Husband(hid)\n);\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_4","title":"Pojo","text":"<p>\u7136\u540e\u770bjava\u6587\u4ef6\u3002</p> <p>Husband.java</p> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\n@SuppressWarnings(\"serial\")\npublic class Husband implements java.io.Serializable {\n    private String id;\n    private String name;\n    private Wife wife;\n    private Set paramours = new HashSet();\n\n    public Husband(){}\n\n    public String getId() { return id;}\n    public void setId(String id) { this.id = id;}\n\n    public String getName() { return name;}\n    public void setName(String name) { this.name = name;}\n\n    public Wife getWife() { return wife;}\n    public void setWife(Wife wife) { this.wife = wife;}\n\n    public Set getParamours() { return paramours;}\n    public void setParamours(Set paramours) { this.paramours = paramours;}\n}\n</code></pre> <p>Wife.java</p> <pre><code>@SuppressWarnings(\"serial\")\npublic class Wife implements java.io.Serializable {\n    private String id;\n    private String name;\n\n    public Wife() { }\n\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getName() { return this.name; }\n    public void setName(String name) { this.name = name; }\n}\n</code></pre> <p>Paramour.java</p> <pre><code>@SuppressWarnings(\"serial\")\npublic class Paramour implements java.io.Serializable {\n    private String id;\n    private String name;\n    private Husband husband;\n\n    public Paramour(){ }\n\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public Husband getHusband() { return this.husband; }\n    public void setHusband(Husband husband) { this.husband = husband; }\n\n    public String getName() { return this.name; }\n    public void setName(String name) { this.name = name; }\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#mapping-xml_3","title":"Mapping Xml","text":"<p>\u63a5\u4e0b\u6765\u518d\u770bxml\u6620\u5c04\u6587\u4ef6\u3002</p> <p>Husband.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.complex.Husband\" table=\"husband\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"hid\"  \n            length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\"  \n            length=\"32\" not-null=\"true\" /&gt;  \n\n        &lt;many-to-one name=\"wife\" class=\"org.py.hib.relation.complex.Wife\" cascade=\"all\" column=\"wife_id\" /&gt;  \n\n        &lt;set name=\"paramours\" cascade=\"all\" inverse=\"true\" &gt;  \n            &lt;key column=\"husband_id\" /&gt;  \n            &lt;one-to-many class=\"org.py.hib.relation.complex.Paramour\" /&gt;  \n        &lt;/set&gt;  \n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt; \n</code></pre> <p>Wife.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;  \n\n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.complex.Wife\" table=\"wife\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"wid\" length=\"32\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\"  length=\"128\" not-null=\"true\" /&gt;  \n\n    &lt;/class&gt;  \n&lt;/hibernate-mapping&gt; \n</code></pre> <p>Paramour.hbm.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;  \n&lt;!DOCTYPE hibernate-mapping PUBLIC \"-//Hibernate/Hibernate Mapping DTD 3.0//EN\"  \n    \"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;   \n&lt;hibernate-mapping&gt;  \n    &lt;class name=\"org.py.hib.relation.complex.Paramour\" table=\"paramour\"&gt;  \n        &lt;id name=\"id\" type=\"java.lang.String\" column=\"pid\"&gt;  \n            &lt;generator class=\"uuid\" /&gt;  \n        &lt;/id&gt;  \n\n        &lt;property name=\"name\" type=\"java.lang.String\" column=\"name\" not-null=\"true\" /&gt;  \n\n        &lt;many-to-one name=\"husband\" class=\"org.py.hib.relation.complex.Husband\" column=\"husband_id\" /&gt;  \n\n    &lt;/class&gt;  \n\n&lt;/hibernate-mapping&gt; \n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#testing_3","title":"Testing","text":"<p>\u8fd9\u91cc\u53ea\u6d4b\u8bd5\u4e86save\u3002\u5176\u4ed6\u7684\u6d4b\u8bd5\u5927\u5bb6\u611f\u5174\u8da3\u7684\u53ef\u4ee5\u8865\u5145\u3002 ComplexTest.java</p> <pre><code>import junit.framework.Assert;\nimport junit.framework.TestCase;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.junit.After;\nimport org.junit.Before;\n\n/**\n * \u8fd9\u4e2a\u6d4b\u8bd5\u5ffd\u7565\u4e86hibernate\u7684\u5f02\u5e38\n **/\npublic class ComplexTest extends TestCase {\n    private SessionFactory factory;\n\n    @Before\n    public void setUp() throws Exception {\n        Configuration conf = new Configuration().configure();\n        factory = conf.buildSessionFactory();\n    }\n\n    public void testSave() {\n        Session session = factory.openSession();\n        Transaction tran = session.beginTransaction();\n\n        Husband hus = new Husband();\n        hus.setName(\"husband\");\n\n        Wife wife = new Wife();\n        wife.setName(\"wife\");\n\n        Paramour p1 = new Paramour();\n        p1.setName(\"paramour_1\");\n\n        Paramour p2 = new Paramour();\n        p2.setName(\"paramour_2\");\n\n        Paramour p3 = new Paramour();\n        p3.setName(\"paramour_3\");\n\n        hus.setWife(wife);\n\n        hus.getParamours().add(p1);\n        hus.getParamours().add(p2);\n        hus.getParamours().add(p3);\n\n        p1.setHusband(hus);\n        p2.setHusband(hus);\n        p3.setHusband(hus);\n\n        session.save(hus);\n\n        tran.commit();\n\n        Assert.assertNotNull(hus.getId());\n        Assert.assertNotNull(wife.getId());\n\n        Assert.assertNotNull(p1.getId());\n        Assert.assertNotNull(p2.getId());\n        Assert.assertNotNull(p3.getId());\n\n        session.close();\n    }\n\n    @After\n    public void tearDown() {\n        factory.close();\n    }\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#annotation-11","title":"annotation\u5173\u7cfb\u6620\u5c04 1:1","text":"<p>\u8bb2\u5b8c\u4e86xml\u7684\u5173\u7cfb\u6620\u5c04\uff0c\u4e0b\u9762\u8bb2\u4e00\u4e0bannatation\u7684\u5173\u7cfb\u6620\u5c04 \u8fd9\u8bb2OneToOne\u7684\u7528\u6cd5\u3002\u800c\u4e14\u662f\u57fa\u4e8e\u4e3b\u5916\u952e\u7684\u5173\u8054\u3002\u56e0\u4e3a\u8fd9\u4e2a\u662f\u5b9e\u9645\u5f00\u53d1\u4e2d\u6700\u6700\u5e38\u89c1\u7684\u3002</p> <p>\u8fd9\u91cc\u5148\u8bf4\u660e\u4e00\u4e0b\uff0c\u6211\u7684java\u7c7b\u7684\u547d\u540d\u90fd\u4ee5Test\u5f00\u5934\u3002\u800c\u5bf9\u5e94\u7684\u5bf9\u8c61\u540d\u5374\u6ca1\u6709\u7528test\u5f00\u5934\u3002\u8fd9\u91cc\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u8bf4\u660e\u6ce8\u89c6\u4e2d\u7684value\u5230\u5e95\u662f\u7c7b\u540d\u8fd8\u662f\u5bf9\u8c61\u540d\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_5","title":"Pojo","text":"<p>\u5148\u770bjava\u4ee3\u7801\uff1a</p> <p>TestUser.java</p> <pre><code>import javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToOne;\n\n@Entity\npublic class TestUser\n{\n    String   id;\n    String   username;\n    TestCard card;\n\n    @Id\n    public String getId() {return id; }\n    public void setId(String id) {this.id = id; }\n\n    public String getUsername() {return username; }\n    public void setUsername(String username) {this.username = username; }\n\n    @OneToOne\n    public TestCard getCard() {return card; }\n    public void setCard(TestCard card) {this.card = card; }\n}\n</code></pre> <p>TestCard\uff1a</p> <pre><code>import javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class TestCard\n{\n    String id;\n    String cardNumber;\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getCardNumber() { return cardNumber; }\n    public void setCardNumber(String cardNumber) { this.cardNumber = cardNumber; }\n}\n</code></pre> <p>\u8fd9\u6837\u5b50\u5c31\u662fOneToOne\u4e86\u3002\u8fd9\u4e2a\u662f\u5355\u5411\u7684\u5173\u7cfb\uff0c\u5373\uff1a\u7531TestCard\u63a7\u5236TestUser\u3002\u770bsql\u8bed\u53e5\u5c31\u77e5\u9053\u4e86\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_5","title":"DB","text":"<p>hibernate\u81ea\u52a8\u751f\u6210\u7684sql\u4e3a\uff1a</p> <pre><code>drop table test_card cascade constraints;\n\ndrop table test_user cascade constraints;\n\ncreate table test_card (\n    id varchar2(255 char) not null,\n    card_number varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_user (\n    id varchar2(255 char) not null,\n    username varchar2(255 char),\n    card_id varchar2(255 char),\n    primary key (id)\n);\n\nalter table test_user add constraint FKB9A96B58A237D846 foreign key (card_id) references test_card;\n</code></pre> <p>\u4e2a\u4eba\u8ba4\u4e3a\uff0c\u5e94\u8be5\u8fd9\u6837\u5b50\u7406\u89e3OneToOne\u3002</p> <ol> <li>\u9996\u5148\uff0c\u4ed6\u662f\u7528\u6765\u58f0\u660e\u5728\u65b9\u6cd5\u4e0a\u7684\u3002\uff08\u8fd9\u53e5\u597d\u4f3c\u5e9f\u8bdd\uff09</li> <li>\u7136\u540e\uff0c\u4ed6\u5176\u5b9e\u662f\u7528\u6765annation\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u7684\u3002\u5373\uff1a\u63cf\u8ff0TestCard\u7684\u3002     &gt; \u4e5f\u5c31\u662f\u8bf4\uff1aTestCard \u4e3a\u63a7\u5236\u65b9\u3002TestUser\u4e3a\u88ab\u63a7\u65b9\u3002\u90a3\u4e48\u5bf9\u5e94\u7684\u8868\u4e2d\uff0ctest_user\u8868\u6709\u4e00\u4e2a\u5916\u952e\u5b57\u6bb5\u5bf9\u5e94\u7740test_card\u8868\u4e2d\u7684\u4e00\u4e2a\u4e3b\u952e\u3002</li> </ol> <p>\u8fd9\u6837\uff0c\u5c31\u597d\u7406\u89e3\u4e86\u3002</p> <p>\u4e0a\u9762\u7684\u4e3a\u5355\u5411\u5173\u8054\u3002\u90a3\u4e48\uff0c\u53cc\u5411\u5173\u8054\u5462\uff1f\u4fee\u6539TestCard\u5982\u4e0b\uff1a</p> <pre><code>import javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToOne;\n\n@Entity\npublic class TestCard {\n    String   id;\n    String   cardNumber;\n    TestUser user;\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    @OneToOne\n    public TestUser getUser() { return user; }\n    public void setUser(TestUser user) { this.user = user; }\n\n\n    public String getCardNumber() { return cardNumber; }\n    public void setCardNumber(String cardNumber) { this.cardNumber = cardNumber; }\n}\n</code></pre> <p>\u8fd9\u6837\uff0c\u4ea7\u751f\u7684sql\u4e3a\uff1a</p> <pre><code>drop table test_card cascade constraints;\ndrop table test_user cascade constraints;\n\ncreate table test_card (\n    id varchar2(255 char) not null,\n    card_number varchar2(255 char),\n    user_id varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_user (\n    id varchar2(255 char) not null,\n    username varchar2(255 char),\n    card_id varchar2(255 char),\n    primary key (id)\n);\n\nalter table test_card add constraint FKB9A0FA9D7876DA66 foreign key (user_id) references test_user;\n\nalter table test_user add constraint FKB9A96B58A237D846 foreign key (card_id) references test_card;\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u6211\u53cc\u65b9\u90fd\u58f0\u660e\u4e86OneToOne\u65f6\u5019\uff0c\u4e5f\u5c31\u8fbe\u5230\u4e86\u53cc\u5411\u7684One2One\u6548\u679c\u3002\u4f46\u662f\u5f88\u9057\u61be\u3002Hibernate\u4e0d\u77e5\u9053\u4f60\u7531\u54ea\u8fb9\u63a7\u5236\u54ea\u8fb9\uff0c\u6216\u8005\u8bf4\u7531\u54ea\u8fb9\u6765\u7ef4\u62a4\u5173\u7cfb\u3002\u6240\u4ee5\uff0c\u4ed6\u751f\u6210\u7684sql\u8bed\u53e5\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u90fd\u6709test_card\u548ctest_user\u662f\u76f8\u4e92\u5173\u8054\u7684\uff0c\u5373\uff1a\u90fd\u6709FK\u5173\u8054\u4e0a\u5806\u653e\u7684PK\u3002\u5f88\u660e\u663e\uff0c\u8fd9\u4e2a\u4e0d\u662f\u6211\u4eec\u8981\u7684\u6548\u679c\u3002</p> <p>\u6211\u4eec\u9700\u8981\u7684\u662f\uff0cpojo\u4e2d\u80fd\u53cc\u5411one2one\uff0c\u4f46\u662fdb\u4e2d\u4e0d\u9700\u8981\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u4e00\u4e0b\u3002</p> <p>\u4fee\u6539TestCard.java\u4ee3\u7801\uff1a</p> <pre><code>import javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToOne;\n\n@Entity\npublic class TestCard {\n    String   id;\n    String   cardNumber;\n    TestUser user;\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    @OneToOne(mappedBy=\"card\")\n    public TestUser getUser() { return user; }\n    public void setUser(TestUser user) { this.user = user; }\n\n    public String getCardNumber() { return cardNumber; }\n    public void setCardNumber(String cardNumber) { this.cardNumber = cardNumber; }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a OneToOne\u4e2d\u7684mappedBy\u5c31\u6307\u51fa\u4e86\u6b64\u5904\u8fd4\u56de\u7684TestUser\u5bf9\u5e94\u7684test_user\u8868\u4e2d\u6709\u4e00\u4e2a\u6307\u5411TestUser\u7684\u5c5e\u6027\"card\"\u7684\u5916\u952e\u3002\u53ef\u4ee5\u770bsql\u3002</p> <pre><code>drop table test_card cascade constraints;\n\ndrop table test_user cascade constraints;\n\ncreate table test_card (\n    id varchar2(255 char) not null,\n    card_number varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_user (\n    id varchar2(255 char) not null,\n    username varchar2(255 char),\n    card_id varchar2(255 char),\n    primary key (id)\n);\n\nalter table test_user add constraint FKB9A96B58A237D846 foreign key (card_id) references test_card;\n</code></pre> <p>\u800c\u8fd9\u5f97\"mappedBy=card\"\u4e2d\u7684card\u662fTestUser\u4e2d\u7684TestCard\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u540d\u3002\u8fd9\u4e5f\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u8981\u7528Test\u4fee\u9970\u7c7b\u540d\uff0c\u800c\u5bf9\u8c61\u540d\u5374\u4e0d\u7528\u7684\u7406\u7531\u3002</p> <p>\u6216\u8005\uff0c\u8fd8\u53ef\u4ee5\u8fd9\u6837\u5b50\u6765\u7406\u89e3OneToOne\u3002</p> <p>1.\u5355\u5411OneToOne\u4e2d\u3002\u58f0\u660e\u4e86OneToOne\u8fd9\u4e2aAnnotation\u7684\u65b9\u6cd5\uff0c\u4ed6\u7684\u8fd4\u56de\u503c\u5373\uff1a\u7ef4\u62a4\u65b9\u3002(\u4e3b\u952e\u65b9) 1.\u53cc\u5411OneToOne\u4e2d\u3002\u5728OneToOne\u4e2d\u58f0\u660e\u4e86mappedBy=\"xx\"\u7684\uff0c\u4ed6\u7684\u8fd4\u56de\u503c\u5373\uff1a\u88ab\u7ef4\u62a4\u65b9\u3002(\u5916\u952e\u65b9)</p>"},{"location":"posts/hibernate%20simple%20tutorials/#annotation-1n","title":"annotation\u7684\u5173\u7cfb\u6620\u5c04 1:n","text":"<p>\u8fd9\u6b21\u8bf4\u8bf4OneToMany\u548cManyToOne</p> <p>\u6211\u4eec\u7684\u573a\u666f\u662f 1\u4e2a\u7236\u4eb2n\u591a\u4e2a\u5b69\u5b50</p>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_6","title":"Pojo","text":"<p>\u5148\u6765\u770b\u770b\u8fd9\u4e2d\u505a\u6cd5\uff1a</p> <p>TestFather.java</p> <pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class TestFather{\n    String          id;\n    String          name;\n    List children = new ArrayList();\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n\n    @OneToMany\n    public List getChildren() { return children; }\n    public void setChildren(List children) { this.children = children; }\n}\n</code></pre> <p>TestChild.java</p> <pre><code>import javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class TestChild {\n    String     id;\n    String     name;\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n}\n</code></pre>"},{"location":"posts/hibernate%20simple%20tutorials/#db_6","title":"DB","text":"<p>\u8fd9\u6837\u5b50\uff0c\u597d\u50cf\u5c31\u53ef\u4ee5\u4e86\u3002\u90a3\u4e48\u662f\u7684\u4e48\uff1f\u6211\u4eec\u6765\u770b\u770bhib\u4ea7\u751f\u7684sql</p> <pre><code>drop table test_child cascade constraints;\ndrop table test_father cascade constraints;\ndrop table test_father_children cascade constraints;\n\ncreate table test_child (\n    id varchar2(255 char) not null,\n    name varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_father (\n    id varchar2(255 char) not null,\n    name varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_father_children (\n    null_id varchar2(255 char) not null,\n    children_id varchar2(255 char) not null,\n    unique (children_id)\n);\n\nalter table test_father_children \n    add constraint FK2E6E87D5901B7DBB \n    foreign key (null_id) \n    references test_father;\n\nalter table test_father_children \n    add constraint FK2E6E87D58CD0E56B \n    foreign key (children_id) \n    references test_child;\n\nalter table test_user \n    add constraint FKB9A96B58A237D846 \n    foreign key (card_id) \n    references test_card;\n</code></pre> <p>oh\uff01 My God \uff01\u5b83\u5c45\u7136\u53c8\u5e2e\u6211\u4eec\u591a\u521b\u5efa\u4e86\u4e00\u4e2atable\u3002\u4f5c\u4e3a\u5173\u8054\u3002\u592a\u7b28\u4e86\u3002</p> <p>\u5f88\u660e\u663e\uff0c\u8fd9\u4e0d\u662f\u6211\u4eec\u6240\u9700\u8981\u7684\u3002</p> <p>\u90a3\u6211\u4eec\u8be5\u5982\u4f55\u5462\uff1f\u8fd9\u5c31\u9700\u8981ManyToMany\u4e86\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#annotation-nn","title":"annotation\u7684\u5173\u7cfb\u6620\u5c04 n:n","text":"<p>\u573a\u666f\uff1aProduct\u548cCustomer\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#pojo_7","title":"Pojo","text":"<p>\u5148\u770bTestProduct.java</p> <pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class TestProduct\n{\n    private String             id;\n    private String             name;\n    private float              price;\n    private List customers = new ArrayList();\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n\n    public float getPrice() { return price; }\n    public void setPrice(float price) { this.price = price; }\n\n    @ManyToMany\n    public List getCustomers() { return customers; }\n    public void setCustomers(List customers) { this.customers = customers; }\n\n}\n</code></pre> <p>\u6ce8\u610f\u8fd9\u91cc\u7684ManyToMany\u4ec0\u4e48\u90fd\u6ca1\u6709\u5199\u3002</p> <p>\u518d\u770bTestCustomer.java</p> <pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class TestCustomer {\n    private String            id;\n    private String            tel;\n    private List products = new ArrayList();\n\n    @Id\n    public String getId() { return id; }\n    public void setId(String id) { this.id = id; }\n\n    public String getTel() { return tel; }\n    public void setTel(String tel) { this.tel = tel; }\n\n    @ManyToMany(mappedBy = \"customers\")\n    public List getProducts() { return products; }\n    public void setProducts(List products) { this.products = products; }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a\u8fd9\u91cc\u7684ManyToMany\u6211\u5199\u4e86mappedBy\u8fd9\u4e2aattribute\u3002</p>"},{"location":"posts/hibernate%20simple%20tutorials/#db_7","title":"DB","text":"<p>\u7136\u540e\u770bhib\u4ea7\u751f\u7684sql:</p> <pre><code>drop table test_customer cascade constraints;\ndrop table test_product cascade constraints;\ndrop table test_product_customers cascade constraints;\n\ncreate table test_customer (\n    id varchar2(255 char) not null,\n    tel varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_product (\n    id varchar2(255 char) not null,\n    price float not null,\n    name varchar2(255 char),\n    primary key (id)\n);\n\ncreate table test_product_customers (\n    products_id varchar2(255 char) not null,\n    customers_id varchar2(255 char) not null\n);\n</code></pre> <p>ok! \u975e\u5e38\u597d\u3002hib\u7ec8\u4e8e\u5728ManyToMany\u4e0a\u6ca1\u6709\u72af\u767d\u75f4\u4e86\u3002</p> <p>\u4e0a\u9762\u5f3a\u8c03\u4e86mappedBy\u8fd9\u4e2a\u5c5e\u6027\u3002\u5176\u5b9e\uff0c\u4e4b\u524d\u6709\u63d0\u5230mappedBy\u8fd9\u4e2a\u4e1c\u897f\u3002\u53ea\u662f\uff0c\u6211\u6ca1\u6709\u8bf4\u5230\u5e95\u662f\u4ec0\u4e48\u610f\u601d\u3002\u5176\u5b9e\u5f88\u7b80\u5355\uff1a\u8fd9\u4e2a\u4e1c\u897f\u5c31\u76f8\u5f53\u4e8exml\u914d\u7f6e\u4e2d\u7684inverse\u3002\u5199\u4e86mappedBy\u5c31\u4ee3\u8868\u8fd9\u4e2a\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f\u88ab\u7ef4\u62a4\u65b9\u3002</p>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/","title":"Install mysql v5.7 on centos v7.9","text":"<p>+++ title = \"centos7.9\u5b89\u88c5mysql5.7\" date = 2021-12-30</p> <p>categories = [\"Tech\"] tags = [\"MySQL\"] +++</p> <p>\u6700\u8fd1\u5728\u4e00\u53f0centos7.9\u7684\u670d\u52a1\u5668\u4e0a\u88c5mysql\uff0c\u6574\u4f53\u5e76\u4e0d\u987a\u5229\uff0c\u6bd4\u8f83\u6298\u817e\u3002\u6240\u4ee5\uff0c\u7279\u70b9\u8bb0\u5f55\u4e0b\u6765\uff0c\u65b9\u4fbf\u4ee5\u540e\u67e5\u627e\u3002</p>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/#yummysql","title":"yum\u66f4\u65b0mysql\u6e90","text":"<p>\u56e0\u4e3ayum\u9ed8\u8ba4\u662fmariadb\uff0c\u6240\u4ee5\uff0c\u9700\u8981\u66f4\u65b0yum\u7684mysql\u6e90 \u5177\u4f53\u5982\u4e0b\uff1a - <code>wget https://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code> - <code>yum install -y mysql57-community-release-el7-10.noarch.rpm</code></p>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/#yum-mysql","title":"yum \u5b89\u88c5\u5e76\u542f\u52a8mysql","text":"<ul> <li><code>yum install mysql</code></li> <li><code>systemctl start mysqld</code></li> </ul>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/#mysqlroot","title":"\u66f4\u65b0mysql\u7684root\u5bc6\u7801","text":"<p>mysql\u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u4f1a\u7ed9\u4e00\u4e2a\u968f\u673a\u5bc6\u7801\uff0c\u5177\u4f53\u53ef\u4ee5\u901a\u8fc7\u6267\u884c <code>grep 'password' /var/log/mysqld.log</code> \u53ef\u4ee5\u770b\u5230\u3002</p> <p>\u901a\u8fc7mysql -uroot -p \u767b\u5f55\u6210\u529f\u540e\uff0c\u6267\u884c <code>alter user root@'localhost' identified by 'new-password';</code> \u5c31\u4fee\u6539\u65b0\u7684root\u5bc6\u7801\u4e86</p>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/#mysql","title":"\u91cd\u65b0\u6307\u5b9amysql\u7684\u6570\u636e\u5e93\u4f4d\u7f6e","text":"<p>\u4e0b\u9762\u6211\u4eec\u9700\u8981\u91cd\u65b0\u5236\u5b9amysql\u6570\u636e\u5e93\u7684\u4f4d\u7f6e\u3002\u56e0\u4e3a\u9ed8\u8ba4mysql\u6570\u636e\u5e93\u662f\u5728 /var/lib/mysql \u76ee\u5f55\u4e0b\u9762 \u3002\u800c\u670d\u52a1\u5668\u7684/var/lib/mysql\u4e00\u822c\u6ca1\u6709\u591a\u5927\u7a7a\u95f4\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u628a\u6570\u636e\u5e93\u4f4d\u7f6e\u653e\u5230 /data/lib/mysql\u4e0a\u6765\u3002</p> <ul> <li>\u5173\u95edmysql\uff1a<code>systemctl stop mysqld</code></li> <li>\u521b\u5efa\u76ee\u6807\u76ee\u5f55\uff1a<code>mkdir /data/lib</code></li> <li>\u628amysql\u76ee\u5f55\u8f6c\u79fb\u5230\u76ee\u6807\u76ee\u5f55\uff1a<code>mv /var/lib/mysql /data/lib</code></li> <li>\u4fee\u6539mysql\u914d\u7f6e\uff1a<code>vim /etc/my.cnf</code>\uff0c\u628a\u91cc\u9762\u7684/var/lib/mysql \u4fee\u6539\u4e3a /data/lib/mysql</li> </ul>"},{"location":"posts/install%20mysql-v5.7%20on%20centos_v7.9/#_1","title":"\u8fdb\u4e00\u6b65\u6392\u67e5\u9519\u8bef","text":"<p>\u6309\u9053\u7406\u8bf4\u8be5\u4fee\u6539\u7684\u90fd\u5b8c\u6210\u4e86\uff0c\u4f46\u662f\u5f53\u6211\u4eec\u91cd\u65b0\u542f\u52a8mysql\u65f6\u5019\uff0c\u7cfb\u7edf\u62a5\u9519\uff1a </p> <pre><code>&gt;&gt;&gt; systemctl start mysqld\n&gt;&gt;&gt; \n&gt;&gt;&gt; Job for mysqld.service failed because the control process exited with error code. See \"systemctl status mysqld.service\" and \"journalctl -xe\" for details.\n</code></pre> <p>\u4f7f\u7528\u547d\u4ee4\u67e5\u770bmysql\u72b6\u6001\uff0c\u5f97\u5230\u9519\u8bef\u4fe1\u606f\uff1a</p> <pre><code>&gt;&gt;&gt; service mysqld status\n&gt;&gt;&gt; \n&gt;&gt;&gt; Redirecting to /bin/systemctl status  mysqld.service\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u505a\u4e0b\u9762\u7684\u6b65\u9aa4\u6765\u8fdb\u884c\u5bf9\u5e94\u7684\u4fee\u6539\uff1a - \u4fee\u6539 /etc/selinux/config\u3002\u4fee\u6539\uff1aselinux=disabled\uff0c\u91cd\u65b0\u542f\u52a8\u7cfb\u7edf\u3002 - \u91cd\u542fmysql\uff1a<code>systemctl start mysqld</code></p> <p>\u8fd9\u65f6\u5019mysql\u542f\u52a8\u6210\u529f\u3002</p>"},{"location":"posts/java%20PorterStemmer%20in%20Lucene/","title":"java PorterStemmer in Lucene","text":"<p>+++ title = \"java\u5e38\u7528\u5de5\u5177-PorterStemmer\" date = 2009-03-28</p> <p>categories = [\"Tech\"] tags = [\"Java\", \"PorterStemmer\"] +++</p> <p>\u641c\u7d22\u5f15\u64ce\u5728\u8fdb\u884c\u7d22\u5f15\u548c\u68c0\u7d22\u7684\u65f6\u5019\uff0c\u9700\u8981\u5bf9\u4e00\u4e9b\u8bcd\u8bed\u7684\u5404\u79cd\u5f62\u5f0f\u8f6c\u6362\u4e3a\u539f\u578b\u3002\u5728 Lucene \u4e2d\uff0c\u63d0\u4f9b\u4e86\u8fd9\u6837\u7684\u4e00\u4e2ajava\u6587\u4ef6\u3002</p> <pre><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\nimport StringUtil;\n\n/**\n * Copyright 2004 The Apache Software Foundation\n * &lt;p&gt;\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * &lt;p&gt;\n * http://www.apache.org/licenses/LICENSE-2.0\n * &lt;p&gt;\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n\n    Porter stemmer in Java. The original paper is in\n\n    Porter, 1980, An algorithm for suffix stripping, Program, Vol. 14,\n    no. 3, pp 130-137,\n\n    See also http://www.tartarus.org/~martin/PorterStemmer/index.html\n\n    Bug 1 (reported by Gonzalo Parra 16/10/99) fixed as marked below.\n    Tthe words 'aed', 'eed', 'oed' leave k at 'a' for step 3, and b[k-1]\n    is then out outside the bounds of b.\n\n    Similarly,\n\n    Bug 2 (reported by Steve Dyrdahl 22/2/00) fixed as marked below.\n    'ion' by itself leaves j = -1 in the test for 'ion' in step 5, and\n    b[j] is then outside the bounds of b.\n\n    Release 3.\n\n    [ This version is derived from Release 3, modified by Brian Goetz to\n    optimize for fewer object creations.  ]\n\n    */\n\n/**\n * Stemmer, implementing the Porter Stemming Algorithm The Stemmer class transforms a word into its root form. The input word can be provided a character at\n * time (by calling add()), or at once by calling one of the various stem(something) methods.\n */\n\npublic class PorterStemmer {\n    private char[] b;\n\n    private int i, /* offset into b */\n            j, k, k0;\n\n    private boolean dirty = false;\n\n    private static final int INC = 50; /* unit of size whereby b is increased */\n\n    private static final int EXTRA = 1;\n\n    public PorterStemmer() {\n        b = new char[INC];\n        i = 0;\n    }\n\n    /**\n     * reset() resets the stemmer so it can stem another word. If you invoke the stemmer by calling add(char) and then stem(), you must call reset() before\n     * starting another word.\n     */\n    public void reset() {\n        i = 0;\n        dirty = false;\n    }\n\n    /**\n     * Add a character to the word being stemmed. When you are finished adding characters, you can call stem(void) to process the word.\n     */\n    public void add(char ch) {\n        if (b.length &lt;= i + EXTRA) {\n            char[] new_b = new char[b.length + INC];\n            for (int c = 0; c &lt; b.length; c++)\n                new_b[c] = b[c];\n            b = new_b;\n        }\n        b[i++] = ch;\n    }\n\n    /**\n     * After a word has been stemmed, it can be retrieved by toString(), or a reference to the internal buffer can be retrieved by getResultBuffer and\n     * getResultLength (which is generally more efficient.)\n     */\n    public String toString() {\n        return new String(b, 0, i);\n    }\n\n    /**\n     * Returns the length of the word resulting from the stemming process.\n     */\n    public int getResultLength() {\n        return i;\n    }\n\n    /**\n     * Returns a reference to a character buffer containing the results of the stemming process. You also need to consult getResultLength() to determine the\n     * length of the result.\n     */\n    public char[] getResultBuffer() {\n        return b;\n    }\n\n    /* cons(i) is true &lt;=&gt; b[i] is a consonant. */\n\n    private final boolean cons(int i) {\n        switch (b[i]) {\n            case 'a':\n            case 'e':\n            case 'i':\n            case 'o':\n            case 'u':\n                return false;\n            case 'y':\n                return (i == k0) ? true : !cons(i - 1);\n            default:\n                return true;\n        }\n    }\n\n    /*\n     * m() measures the number of consonant sequences between k0 and j. if c is a consonant sequence and v a vowel sequence, and &lt;..&gt; indicates arbitrary\n     * presence, &lt;c&gt;&lt;v&gt; gives 0 &lt;c&gt;vc&lt;v&gt; gives 1 &lt;c&gt;vcvc&lt;v&gt; gives 2 &lt;c&gt;vcvcvc&lt;v&gt; gives 3 ....\n     */\n    private final int m() {\n        int n = 0;\n        int i = k0;\n        while (true) {\n            if (i &gt; j)\n                return n;\n            if (!cons(i))\n                break;\n            i++;\n        }\n        i++;\n        while (true) {\n            while (true) {\n                if (i &gt; j)\n                    return n;\n                if (cons(i))\n                    break;\n                i++;\n            }\n            i++;\n            n++;\n            while (true) {\n                if (i &gt; j)\n                    return n;\n                if (!cons(i))\n                    break;\n                i++;\n            }\n            i++;\n        }\n    }\n\n    /* vowelinstem() is true &lt;=&gt; k0,...j contains a vowel */\n    private final boolean vowelinstem() {\n        int i;\n        for (i = k0; i &lt;= j; i++)\n            if (!cons(i))\n                return true;\n        return false;\n    }\n\n    /* doublec(j) is true &lt;=&gt; j,(j-1) contain a double consonant. */\n    private final boolean doublec(int j) {\n        if (j &lt; k0 + 1)\n            return false;\n        if (b[j] != b[j - 1])\n            return false;\n        return cons(j);\n    }\n\n    /*\n     * cvc(i) is true &lt;=&gt; i-2,i-1,i has the form consonant - vowel - consonant and also if the second c is not w,x or y. this is used when trying to restore an\n     * e at the end of a short word. e.g. cav(e), lov(e), hop(e), crim(e), but snow, box, tray.\n     */\n    private final boolean cvc(int i) {\n        if (i &lt; k0 + 2 || !cons(i) || cons(i - 1) || !cons(i - 2))\n            return false;\n        else {\n            int ch = b[i];\n            if (ch == 'w' || ch == 'x' || ch == 'y')\n                return false;\n        }\n        return true;\n    }\n\n    private final boolean ends(String s) {\n        int l = s.length();\n        int o = k - l + 1;\n        if (o &lt; k0)\n            return false;\n        for (int i = 0; i &lt; l; i++)\n            if (b[o + i] != s.charAt(i))\n                return false;\n        j = k - l;\n        return true;\n    }\n\n    /*\n     * setto(s) sets (j+1),...k to the characters in the string s, readjusting k.\n     */\n    void setto(String s) {\n        int l = s.length();\n        int o = j + 1;\n        for (int i = 0; i &lt; l; i++)\n            b[o + i] = s.charAt(i);\n        k = j + l;\n        dirty = true;\n    }\n\n    /* r(s) is used further down. */\n    void r(String s) {\n        if (m() &gt; 0)\n            setto(s);\n    }\n\n    /*\n     * step1() gets rid of plurals and -ed or -ing. e.g. caresses -&gt; caress ponies -&gt; poni ties -&gt; ti caress -&gt; caress cats -&gt; cat feed -&gt; feed agreed -&gt; agree\n     * disabled -&gt; disable matting -&gt; mat mating -&gt; mate meeting -&gt; meet milling -&gt; mill messing -&gt; mess meetings -&gt; meet\n     */\n    private final void step1() {\n        if (b[k] == 's') {\n            if (ends(\"sses\"))\n                k -= 2;\n            else if (ends(\"ies\"))\n                setto(\"i\");\n            else if (b[k - 1] != 's')\n                k--;\n        }\n        if (ends(\"eed\")) {\n            if (m() &gt; 0)\n                k--;\n        } else if ((ends(\"ed\") || ends(\"ing\")) &amp;&amp; vowelinstem()) {\n            k = j;\n            if (ends(\"at\"))\n                setto(\"ate\");\n            else if (ends(\"bl\"))\n                setto(\"ble\");\n            else if (ends(\"iz\"))\n                setto(\"ize\");\n            else if (doublec(k)) {\n                int ch = b[k--];\n                if (ch == 'l' || ch == 's' || ch == 'z')\n                    k++;\n            } else if (m() == 1 &amp;&amp; cvc(k))\n                setto(\"e\");\n        }\n    }\n\n    /* step2() turns terminal y to i when there is another vowel in the stem. */\n    private final void step2() {\n        if (ends(\"y\") &amp;&amp; vowelinstem()) {\n            b[k] = 'i';\n            dirty = true;\n        }\n    }\n\n    /*\n     * step3() maps double suffices to single ones. so -ization ( = -ize plus -ation) maps to -ize etc. note that the string before the suffix must give m() &gt; *\n     * 0.\n     */\n    private final void step3() {\n        if (k == k0)\n            return; /* For Bug 1 */\n        switch (b[k - 1]) {\n            case 'a':\n                if (ends(\"ational\")) {\n                    r(\"ate\");\n                    break;\n                }\n                if (ends(\"tional\")) {\n                    r(\"tion\");\n                    break;\n                }\n                break;\n            case 'c':\n                if (ends(\"enci\")) {\n                    r(\"ence\");\n                    break;\n                }\n                if (ends(\"anci\")) {\n                    r(\"ance\");\n                    break;\n                }\n                break;\n            case 'e':\n                if (ends(\"izer\")) {\n                    r(\"ize\");\n                    break;\n                }\n                break;\n            case 'l':\n                if (ends(\"bli\")) {\n                    r(\"ble\");\n                    break;\n                }\n                if (ends(\"alli\")) {\n                    r(\"al\");\n                    break;\n                }\n                if (ends(\"entli\")) {\n                    r(\"ent\");\n                    break;\n                }\n                if (ends(\"eli\")) {\n                    r(\"e\");\n                    break;\n                }\n                if (ends(\"ousli\")) {\n                    r(\"ous\");\n                    break;\n                }\n                break;\n            case 'o':\n                if (ends(\"ization\")) {\n                    r(\"ize\");\n                    break;\n                }\n                if (ends(\"ation\")) {\n                    r(\"ate\");\n                    break;\n                }\n                if (ends(\"ator\")) {\n                    r(\"ate\");\n                    break;\n                }\n                break;\n            case 's':\n                if (ends(\"alism\")) {\n                    r(\"al\");\n                    break;\n                }\n                if (ends(\"iveness\")) {\n                    r(\"ive\");\n                    break;\n                }\n                if (ends(\"fulness\")) {\n                    r(\"ful\");\n                    break;\n                }\n                if (ends(\"ousness\")) {\n                    r(\"ous\");\n                    break;\n                }\n                break;\n            case 't':\n                if (ends(\"aliti\")) {\n                    r(\"al\");\n                    break;\n                }\n                if (ends(\"iviti\")) {\n                    r(\"ive\");\n                    break;\n                }\n                if (ends(\"biliti\")) {\n                    r(\"ble\");\n                    break;\n                }\n                break;\n            case 'g':\n                if (ends(\"logi\")) {\n                    r(\"log\");\n                    break;\n                }\n        }\n    }\n\n    /* step4() deals with -ic-, -full, -ness etc. similar strategy to step3. */\n    private final void step4() {\n        switch (b[k]) {\n            case 'e':\n                if (ends(\"icate\")) {\n                    r(\"ic\");\n                    break;\n                }\n                if (ends(\"ative\")) {\n                    r(\"\");\n                    break;\n                }\n                if (ends(\"alize\")) {\n                    r(\"al\");\n                    break;\n                }\n                break;\n            case 'i':\n                if (ends(\"iciti\")) {\n                    r(\"ic\");\n                    break;\n                }\n                break;\n            case 'l':\n                if (ends(\"ical\")) {\n                    r(\"ic\");\n                    break;\n                }\n                if (ends(\"ful\")) {\n                    r(\"\");\n                    break;\n                }\n                break;\n            case 's':\n                if (ends(\"ness\")) {\n                    r(\"\");\n                    break;\n                }\n                break;\n        }\n    }\n\n    /* step5() takes off -ant, -ence etc., in context &lt;c&gt;vcvc&lt;v&gt;. */\n    private final void step5() {\n        if (k == k0)\n            return; /* for Bug 1 */\n        switch (b[k - 1]) {\n            case 'a':\n                if (ends(\"al\"))\n                    break;\n                return;\n            case 'c':\n                if (ends(\"ance\"))\n                    break;\n                if (ends(\"ence\"))\n                    break;\n                return;\n            case 'e':\n                if (ends(\"er\"))\n                    break;\n                return;\n            case 'i':\n                if (ends(\"ic\"))\n                    break;\n                return;\n            case 'l':\n                if (ends(\"able\"))\n                    break;\n                if (ends(\"ible\"))\n                    break;\n                return;\n            case 'n':\n                if (ends(\"ant\"))\n                    break;\n                if (ends(\"ement\"))\n                    break;\n                if (ends(\"ment\"))\n                    break;\n                /* element etc. not stripped before the m */\n                if (ends(\"ent\"))\n                    break;\n                return;\n            case 'o':\n                if (ends(\"ion\") &amp;&amp; j &gt;= 0 &amp;&amp; (b[j] == 's' || b[j] == 't'))\n                    break;\n                /* j &gt;= 0 fixes Bug 2 */\n                if (ends(\"ou\"))\n                    break;\n                return;\n            /* takes care of -ous */\n            case 's':\n                if (ends(\"ism\"))\n                    break;\n                return;\n            case 't':\n                if (ends(\"ate\"))\n                    break;\n                if (ends(\"iti\"))\n                    break;\n                return;\n            case 'u':\n                if (ends(\"ous\"))\n                    break;\n                return;\n            case 'v':\n                if (ends(\"ive\"))\n                    break;\n                return;\n            case 'z':\n                if (ends(\"ize\"))\n                    break;\n                return;\n            default:\n                return;\n        }\n        if (m() &gt; 1)\n            k = j;\n    }\n\n    /* step6() removes a final -e if m() &gt; 1. */\n\n    private final void step6() {\n        j = k;\n        if (b[k] == 'e') {\n            int a = m();\n            if (a &gt; 1 || a == 1 &amp;&amp; !cvc(k - 1))\n                k--;\n        }\n        if (b[k] == 'l' &amp;&amp; doublec(k) &amp;&amp; m() &gt; 1)\n            k--;\n    }\n\n    /**\n     * Stem a word provided as a String. Returns the result as a String.\n     */\n    public String stem(String s) {\n        if (stem(s.toCharArray(), s.length()))\n            return toString();\n        else\n            return s;\n    }\n\n    /**\n     * Stem a word contained in a char[]. Returns true if the stemming process resulted in a word different from the input. You can retrieve the result with\n     * getResultLength()/getResultBuffer() or toString().\n     */\n    public boolean stem(char[] word) {\n        return stem(word, word.length);\n    }\n\n    /**\n     * Stem a word contained in a portion of a char[] array. Returns true if the stemming process resulted in a word different from the input. You can retrieve\n     * the result with getResultLength()/getResultBuffer() or toString().\n     */\n    public boolean stem(char[] wordBuffer, int offset, int wordLen) {\n        reset();\n        if (b.length &lt; wordLen) {\n            char[] new_b = new char[wordLen + EXTRA];\n            b = new_b;\n        }\n        for (int j = 0; j &lt; wordLen; j++)\n            b[j] = wordBuffer[offset + j];\n        i = wordLen;\n        return stem(0);\n    }\n\n    /**\n     * Stem a word contained in a leading portion of a char[] array. Returns true if the stemming process resulted in a word different from the input. You can\n     * retrieve the result with getResultLength()/getResultBuffer() or toString().\n     */\n    public boolean stem(char[] word, int wordLen) {\n        return stem(word, 0, wordLen);\n    }\n\n    /**\n     * Stem the word placed into the Stemmer buffer through calls to add(). Returns true if the stemming process resulted in a word different from the input.\n     * You can retrieve the result with getResultLength()/getResultBuffer() or toString().\n     */\n    public boolean stem() {\n        return stem(0);\n    }\n\n    public boolean stem(int i0) {\n        k = i - 1;\n        k0 = i0;\n        if (k &gt; k0 + 1) {\n            step1();\n            step2();\n            step3();\n            step4();\n            step5();\n            step6();\n        }\n        // Also, a word is considered dirty if we lopped off letters\n        // Thanks to Ifigenia Vairelles for pointing this out.\n        if (i != k + 1)\n            dirty = true;\n        i = k + 1;\n        return dirty;\n    }\n\n    /**\n     * Test program for demonstrating the Stemmer. It reads a file and stems each word, writing the result to standard out. Usage: Stemmer file-name\n     *\n     * @throws IOException\n     */\n    public static void main(String[] args) throws IOException {\n        PorterStemmer s = new PorterStemmer();\n        String[] str = new String[]{\"d://stop.txt\"};\n        for (String key : str) {\n            InputStream in = new FileInputStream(key);\n            byte[] buffer = new byte[1024];\n            int bufferLen, offset, ch;\n\n            bufferLen = in.read(buffer);\n            offset = 0;\n            s.reset();\n\n            while (true) {\n                if (offset &lt; bufferLen)\n                    ch = buffer[offset++];\n                else {\n                    bufferLen = in.read(buffer);\n                    offset = 0;\n                    if (bufferLen &lt; 0)\n                        ch = -1;\n                    else\n                        ch = buffer[offset++];\n                }\n\n                if (StringUtil.isLetter((char) ch)) {\n                    s.add(Character.toLowerCase((char) ch));\n                } else {\n                    s.stem();\n                    System.out.print(s.toString());\n                    s.reset();\n                    if (ch &lt; 0)\n                        break;\n                    else\n                        System.out.print((char) ch);\n                }\n            }\n            in.close();\n        }\n    }\n}\n</code></pre>"},{"location":"posts/join%20SOHU/","title":"join SOHU","text":"<p>+++ title = \"\u6765\u4e86\u641c\u72d0\" date = 2011-07-04</p> <p>categories = [\"Life\"] tags = [\"Essay\"] +++</p>"},{"location":"posts/join%20SOHU/#sohu","title":"Sohu","text":"<p>\u6765\u5230\u4e86\u641c\u72d0\u90ae\u4ef6\u4e2d\u5fc3\u3002\u76ee\u524d\u611f\u89c9\u4e0d\u9519\u3002\u719f\u6089\u7684\u4eba\uff08\u6709\u4ee5\u524d\u7684\u540c\u4e8b\uff09\uff0c\u878d\u6d3d\u7684\u6c1b\u56f4\uff0c\u559c\u6b22\u7684\u5de5\u4f5c\u73af\u5883\u3002\u552f\u4e00\u4e86\u7f3a\u70b9\u662f\uff0c\u53ef\u80fd\u662f\u5927\u516c\u53f8\u7684\u539f\u56e0\uff0c\u6216\u8005\u53ef\u80fd\u662f\u90e8\u95e8\u670910\u5e74\u7684\u5386\u53f2\u7684\u539f\u56e0\u3002</p> <p>\u76ee\u524d\u7684\u4ee3\u7801\u5f88\u6df7\u4e71\u3002\u8d28\u91cf\u8fbe\u4e0d\u5230\u8fc5\u5947\u90a3\u6837\u3002\u4e0d\u8fc7\u4e5f\u597d\uff0c\u8fd9\u6837\u5c31\u80fd\u901a\u8fc7\u91cd\u6784\uff0c\u91cd\u5199\uff0c\u5feb\u901f\u7684\u8fdb\u5165\u6838\u5fc3\u4e1a\u52a1\uff0c\u6bd5\u7adf\uff0c\u5bf9\u4e8e\u90ae\u4ef6\u8fd9\u5757\uff0c\u6211\u8fd8\u662f\u7a7a\u767d\u3002</p>"},{"location":"posts/join%20SOHU/#diss-last-company","title":"diss last company","text":"<p>\u8fd9\u662f\u4e00\u5bb6\u56fd\u5185\u505asns game\u7684\u516c\u53f8\u3002\u5728\u5317\u4eac\uff0c\u4e3b\u8981\u9488\u5bf9\u65e5\u672c\u5e02\u573a\uff0c\u4e3b\u6d41\u5f00\u53d1\u8bed\u8a00\u662fPython\u3002\u516c\u53f8\u540d\u5c31\u4e0d\u8bf4\u4e86,\u5927\u5bb6\u81ea\u5df1\u53bb\u731c\u5427\u3002</p> <p>\u51e0\u4e2a\u69fd\u70b9\uff1a 1. \u516c\u53f8\u5728\u8bd5\u7528\u671f\u9664\u4e86\u5de5\u8d44\uff0c\u4e0a\u7f34\u4e2a\u4eba\u6240\u5f97\u7a0e\u5916\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u4fdd\u9669\u548c\u516c\u79ef\u91d1\u3002 2. \u516c\u53f8\u53f7\u79f0\u6bcf\u5929\u6709\u9910\u8865\uff0c\u5176\u5b9e\u5c31\u662f\u52a0\u73ed\u7684\u4eba\u53ef\u4ee5\u514d\u8d39\u5403\u4e00\u987f\u665a\u9910\uff0c\u800c\u4e14\u5fc5\u987b\u572820:00\u540e\u624d\u80fd\u6709\u5403 3. \u516c\u53f8\u7684\u9879\u76ee\u5c31\u662f\u4e00\u4e2a\u63a5\u4e00\u4e2a\uff0c\u5168\u90e8\u90fd\u662f\u5c0f\u4f5c\u574a\u5f0f\u7684\uff0c\u4e00\u4e2a\u9879\u76ee\u5b8c\u6210\u5c31\u8fdb\u5165\u53e6\u5916\u4e00\u4e2a\u9879\u76ee\uff0c\u5b8c\u6210\u7684\u9879\u76ee\u5c31\u53bbsns website\u4e0a\u8fdb\u884c\u8bd5\u6c34\uff0c\u5982\u679c\u6210\u529f\u4e86\uff0c\u90a3\u5c31\u6210\u529f\u4e86\uff0c\u5426\u5219\u5c31\u5ba3\u5e03\u9879\u76ee\u6b7b\u4ea1 4. \u6280\u672f\u4eba\u5458\u5168\u90e8\u90fd\u662f\u51e0\u4e2a\u9879\u76ee\u5e76\u884c\uff0c\u4e0a\u4e0b\u6587\u5207\u6362\u592a\u4e25\u91cd 5. \u9879\u76ee\u7ba1\u7406\u6df7\u4e71\uff0c\u4e00\u4e2a\u841d\u535c\u4e00\u4e2a\u5751\u3002\u8fdb\u5ea6\u7531\u4e0a\u9762\u5b9a\uff0c\u6280\u672f\u6ca1\u6709\u8bdd\u8bed\u6743 6. \u5185\u90e8\u4ee3\u7801\u6df7\u4e71\uff0c\u6240\u6709\u7684\u4eba\u5199\u4e1c\u897f\u90fd\u53ea\u80fd\u5728\u539f\u6765\u7684\u4ee3\u7801\u4e0a\u52a0\u529f\u80fd\uff0c\u7edd\u5bf9\u4e0d\u6562\u4fee\u6539\u6216\u8005\u5220\u9664\u3002\u56e0\u4e3a\u5b8c\u5168\u6ca1\u6709\u6d4b\u8bd5 7. \u53d1\u5e03\u6d4b\u8bd5\u66f4\u52a0\u53ef\u6015\uff0c\u8fd8\u9700\u8981\u53bb\u65e5\u672c\u7684sns website\u4e0a\uff0c\u4e0d\u61c2\u65e5\u6587\u5f88\u60b2\u5267 8. \u6211\u7684\u5de5\u4f5c\u4e60\u60ef\u662f\u65e9\u4e0a\u6765\u4e86\u540e\u5148\u6536\u90ae\u4ef6\uff0c\u770b\u534a\u5c0f\u65f6\u65b0\u95fb\uff0c\u65e9\u4e0a\u6765\u5f97\u65e9\u3002\u4e2d\u5348\u662f\u5348\u4f11\u4e00\u4e2a\u5c0f\u65f6\u3002\u9886\u5bfc\u5750\u6211\u65c1\u8fb9\uff0c\u7ed3\u679c\u627e\u6211\u8c08\u8bdd\u51e0\u6b21\u3002\u6bcf\u6b21\u90fd\u662f\u8bf4\uff1a\"\u6211\u4e00\u626d\u5934\u5c31\u770b\u5230\u4f60\u5728\u770b\u7f51\u9875\uff0c\u6216\u8005\u4f60\u5728\u7761\u89c9\"\u3002\u4f60\u59b9\u554a\uff0c\u5de5\u4f5c\u7684\u65f6\u5019\u4f60\u600e\u4e48\u6ca1\u6709\u626d\u5934\u554a</p>"},{"location":"posts/loaddata%20of%20mysql/","title":"Loaddata of mysql","text":"<p>+++ title = \"mysql\u7684loaddata\u52a0\u8f7d\u6570\u636e\u7684\u65b9\u5f0f\" date = 2008-09-21</p> <p>categories = [\"Tech\"] tags = [\"MySQL\"] +++</p> <p>\u7ecf\u5e38\u5148\u8fdb\u5165mysql\u7684\u547d\u4ee4\u884c\uff0c\u7136\u540e\u7528source\u547d\u4ee4\u5bfc\u5165\u5185\u5bb9\u3002\u5f53\u6570\u636e\u91cf\u8fbe\u5230\u4e00\u5b9a\u7a0b\u5ea6\uff0c\u5c31\u4f1a\u53d8\u5f97\u5f88\u6162\u3002\u6240\u4ee5\uff0c\u91c7\u7528\u4e86loaddata\u8fd9\u79cd\u65b9\u5f0f\u3002</p> <p>\u8fdb\u5165\u6570\u636e\u5e93\uff0c\u6572\u5165\uff1a</p> <pre><code>load data local infile 'd:\\loaddata.txt' into table detail fields terminated by ',' LINES terminated by '\\n';\n</code></pre> <ul> <li>'d:\\loaddata.txt'\uff1a\u8868\u793a loaddata.txt \u7684\u7edd\u5bf9\u8def\u5f84</li> <li>','\uff1a \u8868\u793a\u5b57\u6bb5\u4e4b\u95f4\u6309\u7167','\u5206\u5272\u3002</li> <li>'\\n'\uff1a\u8868\u793a\u8bb0\u5f55\u4e4b\u95f4\u4ee5'\\n'\u5206\u5272\u3002\u5373\uff1a1\u884c1\u6761\u8bb0\u5f55</li> </ul>"},{"location":"posts/parse%20html%20with%20python/","title":"Parse html with python","text":"<p>+++ title = \"\u7f51\u9875\u89e3\u6790\" date = 2011-02-27</p> <p>categories = [\"Tech\"] tags = [\"Python\", \"Crawler\"] +++</p> <p>\u5bf9\u4e8ecrawler, parse html \u662f\u4e00\u4e2a\u5fc5\u4e0d\u53ef\u5c11\u7684\u5de5\u4f5c\u3002\u73b0\u9636\u6bb5\u6709\u5f88\u591a\u7684\u5f00\u6e90\u5e93\uff0cpython\u4e2d\u4e5f\u6709\u81ea\u5df1\u7684\u6807\u51c6\u5e93\u3002\u90fd\u662f\u4e3a\u4e86\u65b9\u4fbf\u7684\u89e3\u6790html\u7684\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u6211\u4eec\u7684\u9700\u6c42\u53ef\u80fd\u4f1a\u53d8\u5f97\u5f88\u5947\u602a\uff0c\u6bd4\u65b9\u8bf4\uff1a\u5bf9\u4e8escript\u7684\u4e1c\u897f\u4e5f\u8bb8\u4e5f\u8981\u89e3\u6790\u3002\u5bf9\u4e8ecomment\u7684\u4e1c\u897f\u53ef\u80fd\u4e5f\u8981\u5206\u6790\u3002\u6216\u8005\uff0c\u8fd8\u6709\u5176\u5b83\u7684\u9700\u6c42\u3002\u4e3a\u6b64\uff0c\u6211\u91cd\u65b0\u9020\u4e2a\u8f6e\u5b50\u3002</p> <p>\u6838\u5fc3\u8981\u6c42\uff1a 1. html \u7531 \u6807\u7b7e\uff0c\u5185\u5bb9\u7ec4\u6210 2. \u6807\u7b7e\u7531\u6807\u7b7e\u540d\uff0cattr=value \u7684\u5c5e\u6027\u5bf9\u7ec4\u6210 3. \u6807\u7b7e\u53ef\u4ee5\u662f\u81ea\u5173\u95ed\u7684\uff0c\u4e5f\u53ef\u4ee5\u663e\u793a\u5173\u95ed\u7684\uff0c\u6709\u4e9b\u6807\u7b7e\u53ea\u67091\u4e2a\u3002\u6709\u4e9b\u662f1\u5bf9 4. \u5bf9\u4e8e \u4e5f\u53ef\u4ee5\u5f53\u6210\u662f\u7279\u6b8a\u7684\u6807\u7b7e 5. \u540c\u7406\uff0c \u4e5f\u662f\u7279\u6b8a\u7684\u6807\u7b7e 6. \u5bf9\u4e8e\u6587\u672c\uff0c\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6807\u7b7e\uff0c\u53ef\u4ee5\u9690\u5f0f\u7684\u8ba4\u4e3aname='', attr='' 7. \u6240\u4ee5 \u9700\u8981\u6709\uff1a   - \u89e3\u6790\u6807\u7b7e\u7684\u5de5\u5177   - \u904d\u5386\u7f51\u9875\uff0c\u627e\u51fa\u6807\u7b7e\u7684\u4e1c\u897f   - \u627e\u51fa\u6807\u7b7e\uff0c\u5e76\u4e14\u89e3\u6790\u540e\uff0c\u5b58\u653e\u89e3\u6790\u540e\u7684\u6570\u636e\u7684\u4e1c\u897f</p> <p>\u63a5\u4e0b\u6765\uff0c\u8bb2\u8bb2\u5982\u4f55\u8fdb\u884c\u7f51\u9875\u91cc\u9762\u6807\u7b7e\u5757\u7684\u89e3\u6790\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u8981\u89e3\u6790\u4e0b\u9762\u7684\u5185\u5bb9\uff1a</p> <pre><code>&lt;a href='#' class=\"anavy\"&gt;\n</code></pre> <p>\u5176\u5b9e\u5c31\u662f\u8981\u89e3\u6790\u51fa\u91cc\u9762\u7684href\u548cclass\u5206\u522b\u662f\u4ec0\u4e48\u3002\u4e0d\u8fc7\uff0c\u8981\u6ce8\u610f\u4e0b\u9762\u7684\u51e0\u70b9\uff1a 1. \u53ef\u4ee5\u68c0\u67e5\u6807\u7b7e\u662f\u5426\u53ef\u89c1\uff0c\u8fd9\u4e2a\u6709\u5229\u4e8e\u4ee5\u540e\u7684html\u5206\u6790\uff0c\u4ece\u800c\u77e5\u9053\u8fd9\u4e2a\u5185\u5bb9\u662f\u5426\u8981\u663e\u793a\u51fa\u6765 2. \u652f\u6301\u4e0d\u89c4\u8303\u7684\u6807\u7b7e\uff0c\u6bd4\u65b9\u8bf4\u53ea\u6709\u5f00\uff0c\u6ca1\u6709\u95ed\uff1b\u5c11\u4e00\u4e2a\u7a7a\u683c \u7b49\u7b49</p> <p>\u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a html_util.py</p> <pre><code>#coding=utf-8\nclass AttributeUtil(object):\n\n    @classmethod\n    def get_attribute(cls, html_string, attribute_name):\n        if html_string is None:\n            return None\n\n        attribute_name = attribute_name.lower()\n\n        p = cls.__find_attribute_name(html_string, attribute_name)\n        if p == -1:\n            return None\n\n        p = cls.__find_char_pos(html_string, p + len(attribute_name))\n        if p == -1:\n            return ''\n\n        c = html_string[p]\n        if c != '=':\n            return ''\n\n        p = cls.__find_char_pos(html_string, p + 1)\n        if p == -1:\n            return ''\n\n        c = html_string[p]\n        if c == \"'\" or c == '\"':\n            p1 = html_string.find(c, p + 1)\n            if p1 == -1:\n                return ''\n            return cls.__clear_return(html_string[p + 1:p1])\n\n        p1 = cls.__find_blank_pos(html_string, p + 1)\n        if p1 == -1:\n            return html_string[p:].strip()\n\n        return cls.__clear_return(html_string[p:p1].strip())\n\n\n    @classmethod\n    def __clear_return(cls, str):\n        if str is None:\n            return None\n\n        return str.replace('\\n', '').replace('\\r', '')\n\n    @classmethod\n    def __find_blank_pos(cls, html_string, p):\n\n        for i in range(p, len(html_string)):\n            c = html_string[i]\n            if c.isspace() or c == '/' and i == len(html_string) - 2 or c == '&gt;' and i == len(html_string) - 1:\n                return i \n\n        return -1\n\n    @classmethod\n    def __find_char_pos(cls, html_string, p):\n        if p &lt; 0:\n            return -1\n\n        for i in range(p, len(html_string)):\n            if not html_string[i].isspace():\n                return i\n        return -1\n\n    @classmethod\n    def __find_attribute_name(cls, html_string, attribute_name):\n        p = 0\n        tag_string_low = html_string.lower()\n        attribute_name_length = len(attribute_name)\n        while True:\n            p = tag_string_low.find(attribute_name, p)\n            if p == -1:\n                break\n            if p &gt; 0:\n                c = html_string[p - 1]\n\n                if c.isspace() or c == '\"' or c == \"'\":\n                    if p + attribute_name_length == len(html_string):\n                        return p\n                    c = html_string[p + attribute_name_length]\n                    if c.isspace() or c == '=':\n                        return p\n                p = p + attribute_name_length\n\n            if p == 0:\n                c = html_string[p + attribute_name_length]\n                if c.isspace() or c == '=':\n                    return p\n                p += attribute_name_length\n\n        return -1\n\n    @classmethod\n    def get_value_in_url(url, key):\n        if url is None:\n            return None\n\n        p = url.find('?')\n        if p == -1:\n            return None\n\n        lower_key = key.lower()\n        params = url[p + 1:].split('&amp;')\n        for param in params:\n            k, v = param.split('=')\n            if k.lower() == lower_key:\n                return v\n\n        return None\n\n    @classmethod\n    def style_visibility(cls, value):\n        \"\"\"\n        \u67e5\u770b\u662f\u5426\u53ef\u89c1\uff0c\n        @return: \u5982\u679c\u53ef\u89c1\u8fd4\u56deTrue,\u5426\u5219\u8fd4\u56deFalse\n        \"\"\"\n        style = cls.get_attribute(value, 'style')\n        if style is None:\n            return True\n        style = style.lower()\n        p = style.find('visibility');\n        if p == -1:\n            return True\n\n        p1 = style.find(':', p)\n        if p1 == -1:\n            return True\n\n        p2 = style.find(';', p1)\n\n        v = style[p1 + 1:] if p2 == -1 else style[p1 + 1:p2]\n\n        if v == None:\n            return True\n\n        v = v.strip()\n\n        if v == 'hidden' or v == 'false':\n            return False\n        return True\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a test_html_util.py</p> <pre><code>#coding=utf-8    \nimport unittest\nfrom html_util import AttributeUtil\n\nclass AttributeAnalyzerTest(unittest.TestCase):\n\n    def test_style_visibility(self):\n        tag_string = \"&lt;DIV ID=\\\"investInfo\\\" STYLE=\\\"position:absolute; width:106px; z-index:7; visibility: hiden\\\" onMouseOver=\\\"MM_showHideLayers('newsCenter','','hide','dataCenter','','hide','viewGovernment','','hide','chengxinCenter','','hide','workHall','','hide','superviseAppeal','','hide','participateGovern','','hide','investInfo','','show','serviceGuide','','hide')\\\"  onMouseOut=\\\"MM_showHideLayers('newsCenter','','hide','dataCenter','','hide','viewGovernment','','hide','chengxinCenter','','hide','workHall','','hide','superviseAppeal','','hide','participateGovern','','hide','investInfo','','hide','serviceGuide','','hide')\\\"&gt;\"\n        visibility = AttributeUtil.style_visibility(tag_string)\n        self.assertTrue(visibility)\n\n    def test_get_simple_attribute(self):\n        tag_string = \"window.location.href='bbsShowTopic.aspx?BoardID=148&amp;Page=182'\"\n        value = AttributeUtil.get_attribute(tag_string, \"window.location.href\")\n        self.assertEquals(value, 'bbsShowTopic.aspx?BoardID=148&amp;Page=182')\n\n    def test_get_none_attribute(self):\n        \"\"\"\n        There is an error. why the result value became #\"? the last version is none\n        \"\"\"\n        value = AttributeUtil.get_attribute(\"&lt;a href=#\\\" class=\\\"anavy\\\"&gt;\", \"href\")\n        self.assertEquals(value, '#\"')\n\n    def test_get_attribute_from_no_standrand_format_html(self):\n        value = AttributeUtil.get_attribute(\"&lt;sdgsadg witht=\\\"123\\\"src=ddsg\", \"src\")\n        self.assertEquals(value, 'ddsg')\n\n    def test_get_empty_attribute_from_no_standrand_format_html(self):\n        value = AttributeUtil.get_attribute(\"&lt;sdgsadg src='\", \"src\")\n        self.assertEquals('', value)\n\n    def test_get_upper_attribute(self):\n        value = AttributeUtil.get_attribute(\"&lt;sdgsadg src='SD'\", \"src\")\n        self.assertEquals('SD', value)\n\n    def test_get_no_standrand_attribute(self):\n        html_string = \"&lt;A class=blue href = \\\"http://shanghai.sohu.com/\\\" target=_blank&gt;\"\n        value = AttributeUtil.get_attribute(html_string, \"href\")\n        self.assertEquals(value, 'http://shanghai.sohu.com/')\n\n    def test_get_attribute_with_upper_attribute_name(self):\n        value = AttributeUtil.get_attribute(\"&lt;sdgsadg src='SD' &lt;aa&gt;\", \"SRC\")\n        self.assertEquals(value, 'SD')\n\n    def test_get_none_attribute_2(self):\n        value = AttributeUtil.get_attribute(\"&lt;script&gt;window.location='http://www.shang360.com'&lt;/script&gt;\", \"a\")\n        self.assertTrue(value is None)\n\n    def test_tuge_page_fetch(self):\n        value = AttributeUtil.get_attribute(\"&lt;script&gt;window.location='http://www.shang360.com'&lt;/script&gt;\", \"a\")\n        self.assertTrue(value is None)\n\n    def test_img_tag_and_no_standrand_attribute(self):\n        tag_string = '''&lt;IMG alt=\u5728\u7ebd\u7ea6\u8054\u5408\u56fd\u603b\u90e8\u5b89\u7406\u4f1a\u4f1a\u8bae\u5385\uff0c\u4e2d\u56fd\u5e38\u9a7b\u8054\u5408\u56fd\u4ee3\u8868\u674e\u4fdd\u4e1c \uff08\u5de6\u4e8c\uff09 \u4e0e\u5176\u4ed6\u4e00\u4e9b\u56fd\u5bb6\u4e0e\u4f1a\u4ee3\u8868\u4ea4\u8c08\u3002 \nsrc=\"http://photocdn.sohu.com/20100610/Img272688535.jpg\" align=middle&gt;'''\n        value = AttributeUtil.get_attribute(tag_string, \"src\")\n        self.assertEquals('http://photocdn.sohu.com/20100610/Img272688535.jpg', value)\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre> <p>\u8bb2\u660e\u4e86\u5982\u4f55\u89e3\u6790\u6807\u7b7e\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u89e3\u6790html\u7684\u5185\u5bb9\u4e86\u3002\u53c2\u8003\u4ee5\u5f80\u89e3\u6790xml\uff0c\u53ef\u4ee5\u91c7\u7528sax\u7684\u65b9\u5f0f\u3002\u8fd9\u6837\u66f4\u52a0\u6e05\u6670\uff0c\u4ee3\u7801\u4e5f\u66f4\u52a0\u597d\u5199\u3002</p> <p>\u6211\u4eec\u7684\u8bbe\u8ba1\u662f\u6709\u4e00\u4e2a HtmlHandler \u548c HtmlParser\u3002\u6709HtmlHandler\u91cc\u9762\u4fdd\u7559html\u7684\u53ef\u89c1\u5185\u5bb9\u3002\u800cHtmlParser\u8fdb\u884c\u771f\u6b63\u7684\u89e3\u6790\u3002</p> <p>html_handler.py</p> <pre><code>#coding=utf-8\n\nclass HtmlHandler(object):\n    \"\"\"\n    \u62ff\u5230\u6807\u7b7e\u540e\uff0c\u8fdb\u884c\u76f8\u5e94\u5904\u7406\u7684handler\n    \"\"\"\n    def __init__(self, handle_comment=False, handle_text=True):\n        self.handle_comment = handle_comment\n        self.handle_text    = handle_text\n        self.script = False\n        self.style  = False\n        self.html_list = []\n\n    def start(self, name, value, position):\n        lower_name = name.lower()\n        if lower_name == 'style':\n            self.style = True\n\n        if lower_name == 'script':\n            self.script = True\n\n    def end(self, name, value, position):\n        lower_name = name.lower()\n        if lower_name == 'style':\n            self.style = False\n\n        if lower_name == 'script':\n            self.script = False\n\n    def comment(self, text, position):\n        if not self.script and not self.style:\n            self.html_list.append(text)\n\n    def text(self, text):\n        if not self.script and not self.style:\n            self.html_list.append(text)\n\n    def finish(self):\n        pass\n\n    def get_html_exclude_script(self, connect_mark):\n        return connect_mark.join(self.html_list)\n\n    def clear_memory(self):\n        self.html_list = []\n</code></pre> <p>\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7 handler.text \u65b9\u6cd5\u6765text\u7684\u8ffd\u52a0\u3002\u6700\u540e\u8c03\u7528get_html_exclude_script\u5c31\u53ef\u4ee5\u62ff\u5230\u7f51\u9875\u7684\u5185\u5bb9\u4e86\u3002\u63a5\u4e0b\u6765\uff0c\u770bhtml_parser\u7684\u903b\u8f91\u3002</p> <p>html_parser.py</p> <pre><code>#coding=utf-8\nimport re\n\nclass HtmlParser(object):\n\n    def __init__(self, handler, mask=None):\n        self.handler = handler\n        self.mask = mask\n\n        self.handle_text = handler.handle_text\n        self.handle_comment = handler.handle_comment\n        self.is_end = False\n        self.tag_name = ''\n\n        self.replace_dict = {\n          '&amp;nbsp;': ' ',\n          '&amp;amp;': '&amp;',\n          '&amp;lt;': '&lt;',\n          '&amp;gt;': '&gt;',\n          '&amp;brvbar;': '?',\n          '&amp;quot;': '\"',\n          '&amp;middot;': '?',\n          '&amp;bull;': '?',\n          '\\n': ' ',\n          '\\r': ' '\n    }\n        self.rx = re.compile('|'.join(map(re.escape, self.replace_dict)))\n\n    def parse(self, html):\n        self.handler.clear_memory()\n        self.parse_html(html)\n        self.handler.finish()\n\n    def parse_html(self, html):\n      if html is None:\n        return\n\n      current_tag_begin, last_tag_end = 0, 0\n\n      while last_tag_end != -1 and last_tag_end &lt; len(html):\n        current_tag_begin = html.find('&lt;', last_tag_end)\n        if current_tag_begin == -1:\n          break\n\n        self.text(html, last_tag_end, current_tag_begin);\n\n        p2 = self.comment(html, current_tag_begin)  # \u770b\u662f\u4e0d\u662f\u6ce8\u91ca\n        if (p2 &gt; 0): # \u662f\u6ce8\u91ca\n          last_tag_end = p2\n          continue\n\n        # \u5f53'&lt;'\u540e\u9762\u4e0d\u662f\u6ce8\u91ca\u7684\u65f6\u5019\uff0c\u8d70\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u65ad\n        last_tag_end = self.check_is_end(html, current_tag_begin + 1);\n        if last_tag_end == -1:  # \u8868\u793a\u5df2\u7ecf\u7ed3\u675f\u4e86\u3002\n          break\n\n        last_tag_end = self.get_tag_name_position(html, last_tag_end)\n        if last_tag_end &lt; 0: # \u53ef\u80fd\u662f\u65e0\u6548\u5b57\u7b26\uff0c\u4e5f\u53ef\u80fd\u662f\u6ca1\u6709\u5173\u952e\u5b57\n          last_tag_end = current_tag_begin + 1\n          if self.handle_text:\n            self.handler.text(\"&lt;\")\n          continue\n\n        last_tag_end = self.find_tag_end(html, last_tag_end) # \u627e\u5230\u4e86\u4f1a\u8fd4\u56de\u4f4d\u7f6e\n        if (last_tag_end != -1):  # \u627e\u5230\n          last_tag_end += 1\n          if not self.in_mask():\n            continue\n\n          str = html[current_tag_begin:last_tag_end]\n          if self.isEnd:\n            self.handler.end(self.keyWord, str, current_tag_begin)\n          else:\n            self.handler.start(self.keyWord, str, current_tag_begin)\n            if not ('a' == self.keyWord or 'A' == self.tag_name) and self.is_self_closed(str):\n              self.handler.end(self.keyWord, str, current_tag_begin)\n\n      if last_tag_end == -1:\n        last_tag_end = current_tag_begin\n\n      self.text(html, last_tag_end, len(html))\n\n    def is_self_closed(self, html):\n      for i in range(len(html) - 2, 0, -1):\n        c = html[i]\n        if not c.isspace():\n          if c == '/':\n            return True\n          return False\n\n      return False\n\n    def text(self, html, last_tag_end, current_tag_begin):\n      if not self.handle_text:\n        return\n\n      begin, end = -1, current_tag_begin\n\n      for i in range(last_tag_end, current_tag_begin):\n        c = html[i] # \u627e\u5230\u7b2c\u4e00\u4e2a\u4e0d\u662f\u7a7a\u683c\u7684\u4f4d\u7f6e\n        if not c.isspace():\n          begin = i\n          break\n      if begin == -1:\n        return # \u5168\u90e8\u662f\u7a7a\u683c\uff0c\u8fd4\u56de\n\n      if current_tag_begin &gt; 0:\n        for i in range(current_tag_begin - 1, begin, -1):\n          if not html[i].isspace():\n            end = i + 1\n            break\n\n      self.handler.text(self.html_decode(html[begin:end]))\n\n    def html_decode(self, html):\n        return self.rx.sub(lambda match: self.replace_dict[match.group(0)], html)\n\n    def comment(self, html, p):\n      if html.startswith(\"&lt;!--\", p):\n        p1 = html.find(\"--&gt;\", p + 2)\n        if p1 == -1:\n          return -1\n        p1 += 3\n        if self.handle_comment:\n          self.handler.comment(html[p:p1], p)\n        return p1\n\n      return -1\n\n    def in_mask(self):\n      if self.keyWord is None:\n        return False\n      if self.mask is None:\n        return True\n\n      for x in self.mask:\n        if self.keyWord == x.upper() or self.tag_name == x.lower():\n          return True\n      return False\n\n      def find_tag_end(self, html, p):\n      if p == -1 or p &gt;= len(html):\n        return -1\n      match = '&gt;'\n      lastIsEqual = False\n\n      for i in range(p, len(html)):\n        c = html[i]\n        if c == match:\n          if match == '&gt;':\n            return i\n          if match == \"'\" or match == '\"':\n            match = '&gt;'\n        elif (c == \"'\" or c == '\"') and lastIsEqual:\n          if match == '&gt;':\n            match = c\n\n        if c == '=':\n          lastIsEqual = True\n        elif not c.isspace():\n          lastIsEqual = False\n\n      return -1\n\n    def get_tag_name_position(self, html, p):\n      self.keyWord = None\n      if p == -1 or p &gt;= len(html):\n        return -1\n\n      for i in range(p, len(html)):\n        c = html[i]\n\n        if self.is_tag_stop_flag(c):\n          self.keyWord = html[p:i].lower()\n          return i;  #\u8fd4\u56de\u5173\u952e\u8bcd\u7684\u8282\u6570\u4f4d\u7f6e\n\n        if not self.is_tag_name_char(c, i - p):\n          return -2 # \u5982\u679c\u662f\u9519\u8bef\u5b57\u7b26(\u975e\u6709\u6548\u5b57\u7b26)\u3002\n      return -1 # \u8868\u793a\u6ca1\u6709\u5173\u952e\u5b57\n\n    def is_tag_name_char(self, ch, i):\n      if (ch &gt;= 'a' and ch &lt;= 'z') or (ch &gt;= 'A' and ch &lt;= 'Z'):\n        return True\n      if ch == '_' or ch == ':' or ch == '.':\n        return True\n      if i &gt; 0 and ch &gt;= '0' and ch &lt;= '9':\n        return True\n      if i == 0 and ch == '!':\n        return True\n      return False\n\n    def check_is_end(self, html, p):\n      if p &gt;= len(html):\n        return -1\n\n      for i in range(p, len(html)):\n        c= html[i]\n        if not c.isspace():\n          if (c == '/'):\n            self.isEnd = True\n            return i + 1\n          else:\n            self.isEnd = False\n            return i\n      return -1\n\n    def is_tag_stop_flag(self, c):\n      if c.isspace() or c == '&gt;' or c == '/':\n        return True\n      return False\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u662f\u6d4b\u8bd5\u4ee3\u7801\uff1a</p> <p>test_parser.py</p> <pre><code>#coding=utf-8\n\nimport unittest\nfrom time import time\nfrom html_handler import HtmlHandler\nfrom html_parser import HtmlParser\nfrom html_util import AttributeUtil\n\nclass TestHandler(HtmlHandler):\n\n    def __init__(self, handle_comment=False, handle_text=True):\n        super(TestHandler, self).__init__(handle_comment, handle_text)\n        self.anum = 0\n        self.hrefs = []\n\n    def start(self, name, value, p):\n        print \"start:name=\", name, \";value=\", value, \";p=\", p\n        if name.lower() == 'a':\n            href = AttributeUtil.get_attribute(value, 'href')\n            if href:\n                self.hrefs.append(href.strip())\n                self.anum += 1\n\n    def end(self, name, value, p):\n        print \"end:name=\", name, \";value=\", value, \";p=\", p\n\n    def text(self, text):\n        print \"text:\", text\n\n    def comment(self, c, p):\n        print \"comment:\", c\n\n    def finish(self):\n        print 'finish'\n\n    def print_hrefs(self):\n        for href in set(self.hrefs):\n#            print href.replace(\"javascript:changeCity('\", \"http://\").replace(\"','')\", \".city8.com\")\n            print href\n\nclass TestParser(unittest.TestCase):\n\n    def setUp(self):\n        self.html = \"\"\"\u5f00\u59cb\u7684\u6587\u672c\u5185\u5bb9&lt;!--\u8fd9\u662f\u4e00\u4e2a\u6ce8\u91ca--&gt;\n&lt;div class=\"colRight\"&gt;\n&lt;h2&gt;&lt;a href=\"http://ent.163.com/09/0901/07/5I40E0S200031H2L.html\"&gt;\u91d1\u8d8a\u4efb\u864e\u5e74\u6625\u665a\u603b\u5bfc\u6f14&lt;/a&gt;&lt;/h2&gt;\n&lt;div class=\"list\"&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/05/5I3P9S7T00031H2L.html\"&gt;\u66fe\u8f76\u53ef\u300a\u72ee\u5b50\u5ea7\u300b\u6d89\u5acc\u6284\u88ad\u7eaf\u97f3\u4e50\u300a\u5929\u9645\u300b&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/07/5I41RRCR00031H2L.html\"&gt;\u91d1\u9a6c\u5956\u62a5\u540d\u622a\u6b62 \u90ed\u5bcc\u57ce\u5218\u5fb7\u534e\u9ece\u660e\u4e89\u593a\u5f71\u5e1d&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/04/5I3LJ0QE00031H2L.html\"&gt;\u8d75\u96c5\u829d\u51c6\u5907\u63a5\u6f14\u53e4\u8463\u6536\u85cf\u5267 \u652f\u6301\u963f\u5a07\u6f14\u767d\u5a18\u5b50&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/03/5I3I031200032DGD.html\"&gt;\u674e\u739f:\u4e0e\u7537\u53cb\u524d\u59bb\u6210\u4e86\u59d0\u59b9 \u6682\u65f6\u6ca1\u65f6\u95f4\u7ed3\u5a5a&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/02/5I3E96TU00032KMI.html\"&gt;\u6f58\u7ca4\u660e:\u5df2\u7ecf\u5728\u871c\u7f50\u91cc \u6709\u4fe1\u5fc3\u4e0e\u8463\u6d01\u767d\u5934\u5055\u8001&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\u4e2d\u95f4\u7684\u6587\u672c\u5185\u5bb9\n&lt;ul class=\"line\"&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/05/5I3OPHO600031H2L.html\"&gt;\u300a\u6c14\u5598\u5401\u5401\u300b\u88ab\u6279\u201c\u96be\u770b\u201d \u845b\u4f18\u7968\u623f\u795e\u8bdd\u96be\u7eed&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/02/5I3FAUL000032KMI.html\"&gt;\u5173\u9526\u9e4f\uff1a\u6881\u671d\u4f1f\u6597\u5fc3\u5f3a  \u5f20\u66fc\u7389\u66fe\u82e6\u7ec3\u8d70\u8def&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/06/5I3V00IF00031H2L.html\"&gt;\u90c1\u53ef\u552f\u6210\u957f\u7ecf\u5386\u63ed\u79d8 \u7236\u4eb2:\u5e38\u9a82\u5f97\u5979\u75db\u54ed\u6d41\u6d95&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/04/5I3NPGGT00031H2L.html\"&gt;\u674e\u82f1\u7231\u7ed3\u5a5a\u540e\u7ee7\u7eed\u5b8c\u6210\u535a\u58eb\u5b66\u4e1a 9\u6708\u521d\u56de\u97e9\u56fd&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"http://ent.163.com/09/0901/04/5I3NGA2F00031H2L.html\"&gt;\u5bfc\u6f14\u5f20\u5143\u76f4\u9762\u5438\u6bd2\u4e8b\u4ef6:\u611f\u8c22\u5168\u793e\u4f1a\u7684\u5173\u6ce8&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n&lt;    script type=\"text/javascript\"       &gt;\n&lt;div class=\"more\"&gt;\n&lt;span&gt;&lt;a href=\"http://ent.163.com/\"&gt;\u66f4\u591a\u5a31\u4e50\u65b0\u95fb&lt;/a&gt;&lt;/span&gt;\n&lt;/script&gt;\n&lt;span style=\"background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial; color: rgb(31, 58, 135); float: left;\"&gt;&lt;a href=\"http://popme.163.com/link/005975_0804_8307.html\"&gt;[\u70ed\u70b9:\u75d8\u5370\u96be\u6d88\u4e3a\u75d8\u6293\u72c2]&lt;/a&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\"\"\"\n\n    def test_is_closed(self):\n        p = HtmlParser(HtmlHandler())\n        self.assertFalse(p.is_self_closed(\"&lt;sdgsdg&gt;\"))\n        self.assertTrue(p.is_self_closed(\"&lt;sdgsdg/&gt;\"))\n        self.assertTrue(p.is_self_closed(\"&lt;sdgsdg/ &gt;\"))\n        self.assertTrue(p.is_self_closed(\"&lt;sdgsdg  /   &gt;\"))\n\n    def test_html(self):\n        handler = TestHandler(handle_comment=True, handle_text=True)\n        parser = HtmlParser(handler)\n        parser.parse(self.html)\n        self.assertEquals(13, handler.anum)\n\n    def test_remove_script(self):\n        handler = HtmlHandler(handle_comment=True, handle_text=True)\n        parser = HtmlParser(handler)\n        parser.parse(self.html)\n        connect_mark = ''\n        html_removed = handler.get_html_exclude_script(connect_mark)\n        self.assertEquals(html_removed, connect_mark.join([\n            \"\u5f00\u59cb\u7684\u6587\u672c\u5185\u5bb9&lt;!--\u8fd9\u662f\u4e00\u4e2a\u6ce8\u91ca--&gt;\u91d1\u8d8a\u4efb\u864e\u5e74\u6625\u665a\u603b\u5bfc\u6f14\",\n            \"\u66fe\u8f76\u53ef\u300a\u72ee\u5b50\u5ea7\u300b\u6d89\u5acc\u6284\u88ad\u7eaf\u97f3\u4e50\u300a\u5929\u9645\u300b\",\n            \"\u91d1\u9a6c\u5956\u62a5\u540d\u622a\u6b62 \u90ed\u5bcc\u57ce\u5218\u5fb7\u534e\u9ece\u660e\u4e89\u593a\u5f71\u5e1d\",\n            \"\u8d75\u96c5\u829d\u51c6\u5907\u63a5\u6f14\u53e4\u8463\u6536\u85cf\u5267 \u652f\u6301\u963f\u5a07\u6f14\u767d\u5a18\u5b50\",\n            \"\u674e\u739f:\u4e0e\u7537\u53cb\u524d\u59bb\u6210\u4e86\u59d0\u59b9 \u6682\u65f6\u6ca1\u65f6\u95f4\u7ed3\u5a5a\",\n            \"\u6f58\u7ca4\u660e:\u5df2\u7ecf\u5728\u871c\u7f50\u91cc \u6709\u4fe1\u5fc3\u4e0e\u8463\u6d01\u767d\u5934\u5055\u8001\",\n            \"\u4e2d\u95f4\u7684\u6587\u672c\u5185\u5bb9\",\n            \"\u300a\u6c14\u5598\u5401\u5401\u300b\u88ab\u6279\u201c\u96be\u770b\u201d \u845b\u4f18\u7968\u623f\u795e\u8bdd\u96be\u7eed\",\n            \"\u5173\u9526\u9e4f\uff1a\u6881\u671d\u4f1f\u6597\u5fc3\u5f3a  \u5f20\u66fc\u7389\u66fe\u82e6\u7ec3\u8d70\u8def\",\n            \"\u90c1\u53ef\u552f\u6210\u957f\u7ecf\u5386\u63ed\u79d8 \u7236\u4eb2:\u5e38\u9a82\u5f97\u5979\u75db\u54ed\u6d41\u6d95\",\n            \"\u674e\u82f1\u7231\u7ed3\u5a5a\u540e\u7ee7\u7eed\u5b8c\u6210\u535a\u58eb\u5b66\u4e1a 9\u6708\u521d\u56de\u97e9\u56fd\",\n            \"\u5bfc\u6f14\u5f20\u5143\u76f4\u9762\u5438\u6bd2\u4e8b\u4ef6:\u611f\u8c22\u5168\u793e\u4f1a\u7684\u5173\u6ce8\",\n            \"[\u70ed\u70b9:\u75d8\u5370\u96be\u6d88\u4e3a\u75d8\u6293\u72c2]\"\n        ]))\n\ndef test_main():\n    import urllib2\n    from time import time\n    urls = [\n        'http://wap.sohu.com/'\n#        'http://bj.3g.cn/index.aspx?cin=-67&amp;gaid=Tm9raWE2MjMw&amp;rd=02&amp;sid=0',\n#        'http://blog.3g.cn/',\n#        'http://blog.3g.cn/commspec/0754/6years.aspx?cin=362312&amp;gaid=Tm9raWE2MjMw&amp;sid=0',\n#        'http://bula.cn/HelpDetail.aspx?ID=7&amp;helperID=8&amp;sid=0',\n#        'http://caipiao.3g.cn/index.aspx?cin=-80&amp;gaid=Tm9raWE2MjMw&amp;rd=20&amp;sid=0',\n#        'http://digi.3g.cn/index.aspx?cin=121&amp;gaid=Tm9raWE2MjMw&amp;rd=02&amp;sid=0',\n#        'http://down2.uc.cn/?f=chenf@moabccom&amp;title=moabc.com&amp;url=http%3A%2F%2Fmoabc.com',\n#        'http://edu.3g.cn/index.aspx?ftp=0&amp;k=2009%e9%ab%98%e8%80%83&amp;nid=21336&amp;sid=0',\n#        'http://news.3g.cn/shehui.aspx?cin=366164&amp;gaid=Tm9raWE2MjMw&amp;sid=0',\n#        'http://now.3g.cn/foryou/index.aspx?cin=-33&amp;gaid=Tm9raWE2MjMw&amp;rd=02&amp;sid=0',\n#        'http://qinggan.loveshafa.com/index.aspx?cin=70&amp;sid=0',\n#        'http://rdt.yicha.cn/1360',\n#        'http://sj.lexun.com/man/manlist.aspx?cd=39903&amp;cr=cb04baa21198295&amp;forumId=8982&amp;lxt=0&amp;topic_page=1',\n#        'http://u.yicha.cn/union/search.jsp?pageBegin=1&amp;site=2145944277&amp;version=1',\n#        'http://wap.3g.net.cn/index.aspx',\n#        'http://wapblog.people.com.cn/?chid=&amp;fromid=201&amp;iv=sz&amp;sid=0&amp;v=l&amp;wv=1.2',\n#        'http://wfne.3g.qq.com/g/s?&amp;aid=tmark&amp;sid=0&amp;tips=1',\n#        'http://y.easou.com/thread/barViewThread.e?barId=10007&amp;esid=0&amp;fr=52.1.8'\n    ]\n    htmls = []\n    for url in urls:\n        try:\n            html = urllib2.urlopen(url, None, 3).read()\n            html = html.strip()\n            if html:\n                htmls.append(html)\n            else:\n                print url\n        except:\n            print url\n    print 'begin'\n    handler = HtmlHandler(handle_comment=False, handle_text=True)\n    parser = HtmlParser(handler)\n    btime = time()\n    for i in range(1):\n        for html in htmls:\n            parser.parse(html)\n            text = handler.get_html_exclude_script()\n            handler.html_list = []\n            print text\n    print time() - btime\n\ndef test_main_2():\n    from time import time\n    html = \"\"\"\n&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=gb2312\" /&gt;\n&lt;title&gt;\u4e09\u4e9a\u9152\u5e97\u9884\u8ba2\u5217\u8868 \u4e09\u4e9a\u5bbe\u9986\u67e5\u8be2\u8ba2\u623f&lt;/title&gt;\n&lt;meta name=\"Description\" content=\"\u4e09\u4e9a\u9152\u5e97\u5217\u8868\u5bbe\u9986\u67e5\u8be2\u8ba2\u623f\" /&gt;\n&lt;meta name=\"Keywords\" content=\"\u4e09\u4e9a\u9152\u5e97\u9884\u8ba2\u5bbe\u9986\u67e5\u8be2\u8ba2\u623f\" /&gt;\n&lt;link href=\"/hotel/css/hotellist.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script src=\"http://pic.yoyv.com/scripts/gwindow.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://pic.yoyv.com/scripts/stuHover.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://pic.yoyv.com/top/scripts/newtop.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://pic.yoyv.com/scripts/ajax.js\"&gt;&lt;/script&gt;\n&lt;link href=\"http://pic.yoyv.com/css/gwindow.css\" type=text/css rel=stylesheet&gt;&lt;/link&gt;\n&lt;link href=\"http://pic.yoyv.com/css/newtop.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n&lt;script language=\"javascript\" src=\"/hotel/scripts/search.js\"&gt;&lt;/script&gt;\n&lt;script language=\"javascript\" src=\"/hotel/scripts/mycal.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body style=\"margin-top:0px;\" onload=\"init('2201',0,0,0,0)\"&gt;\n&lt;div style=\"position:absolute; width:980px!important;width:983px; border:0px; top:0px; z-index:1000;\"&gt;\n    &lt;div id=\"loginBox\" name=\"loginBox\" class=\"signin\" style=\"position: absolute; display:none; float:right; right:0px; width:10px; height:10px; overflow: hidden;\"&gt;\n        &lt;div style=\"margin-top:10px;\"&gt;\n        &lt;div class=\"signintop\"&gt;\n        &lt;div style=\"text-align:right; margin-top:-10px; margin-right:-10px; z-index:500; position:relative;\"&gt;&lt;img src=\"/images/close_LoginBox.gif\" alt=\"\u5173\u95ed\" style=\"cursor:pointer;\" onclick=\"closeloginBox()\"&gt;&lt;/div&gt;\n        &lt;div class=\"loginword\"&gt;&lt;img src=\"/images/usericon.gif\" align=\"absmiddle\"&gt;\u6e38\u9c7c\u4f1a\u5458\u767b\u9646&lt;/div&gt;\n        &lt;table width=\"260\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-top:0px; margin-left:20px;\"&gt;\n            &lt;tr&gt;\n                &lt;td width=\"62\" height=\"18\"&gt;&lt;/td&gt;\n                &lt;td width=\"198\" id=\"errorLog\" align=\"left\" valign=\"bottom\" class=\"errorInfo\"&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td width=\"62\" height=\"34\" align=\"right\" class=\"loginword2\"&gt;\u7528\u6237\u540d\uff1a&lt;/td&gt;\n                &lt;td width=\"198\"&gt;&lt;input type=\"text\" id=\"username_login\" style=\"width:180px; height:17px; background-color:#FFFFFF;\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"loginword2\"&gt;\n                &lt;td height=\"39\" align=\"right\"&gt;\u767b\u5f55\u5bc6\u7801\uff1a&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"password\" id=\"password_login\" style=\"width:100px; height:17px; background-color:#FFFFFF;\" onkeyup=\"Javascript:if (event.which==13||event.keyCode==13){logOn();}\"/&gt;&amp;nbsp;&lt;a href=\"/land/getpwd.htm\" rel=\"nofollow\"&gt;\u5fd8\u8bb0\u4e86\u5bc6\u7801?&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"loginword3\"&gt;\n                &lt;td height=\"30\" colspan=\"2\"&gt;\u8fd8\u4e0d\u662f\u4f1a\u5458\uff1f&lt;a href=\"/tour/guideintr.html\" rel=\"nofollow\"&gt;\u4e86\u89e3\u4e00\u4e0b\u6e38\u9c7c&lt;/a&gt;\u6216\u8005&lt;a href=\"/reg/reg.asp\" rel=\"nofollow\"&gt;\u7acb\u5373\u6ce8\u518c&lt;/a&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;tr class=\"loginword3\"&gt;\n                &lt;td height=\"12\" colspan=\"2\"&gt;&lt;div class=\"loginline1\"&gt;&lt;/div&gt;&lt;div class=\"loginline2\"&gt;&lt;/div&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;tr class=\"loginword3\"&gt;\n                &lt;td height=\"34\" colspan=\"2\"&gt;&lt;input name=\"remember\" type=\"checkbox\" hidefocus=\"true\" value=\"\" checked=\"checked\"/&gt;\u5728\u8fd9\u53f0\u7535\u8111\u4e0a\u8bb0\u4f4f\u6211\u7684\u5bc6\u7801\u3002&amp;nbsp;&lt;img src=\"/images/sign_in_form_hover.gif\" align=\"absmiddle\" onclick=\"logOn()\" alt=\"\u767b\u5f55\" style=\"cursor:pointer;\"/&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;/div&gt;\n        &lt;div class=\"signinbottom\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"progressBar\" name=\"progressBar\" class=\"signin\" style=\"position: absolute; display:none; float:right; right:0px; width:310px; height:280px; overflow: hidden;\"&gt;\n        &lt;div style=\"margin-top:10px;\"&gt;\n        &lt;div class=\"signin\"&gt;\n        &lt;div class=\"signintop\"&gt;\n        &lt;div style=\"text-align:right; margin-top:-10px; margin-right:-10px; z-index:500; position:relative;\"&gt;&lt;img src=\"/images/close_LoginBox.gif\"&gt;&lt;/div&gt;\n        &lt;div class=\"loginword\"&gt;&lt;img src=\"/images/usericon.gif\" align=\"absmiddle\"&gt;\u6e38\u9c7c\u4f1a\u5458\u767b\u9646&lt;/div&gt;\n        &lt;table width=\"260\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-top:10px; margin-left:20px;\"&gt;\n            &lt;tr&gt;\n                &lt;td width=\"198\" height=\"22\"&gt;&amp;nbsp;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr class=\"loginword2\"&gt;\n                &lt;td height=\"40\" align=\"center\"&gt;&lt;img src=\"/images/progressBar_Log.gif\" width=\"40\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr class=\"loginword3\"&gt;\n                &lt;td height=\"38\" align=\"center\" valign=\"bottom\" id=\"progressInfo\"&gt;\u6b63\u5728\u767b\u5f55\u2026\u2026&lt;/td&gt;\n                &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;/div&gt;\n        &lt;div class=\"signinbottom\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"navarea\" style=\"background-color:#FFFFFF\"&gt;\n    &lt;div class=\"loginarea\"&gt;\n        &lt;div class=\"logoarea\"&gt;&lt;a href=\"/\" title=\"\u6e38\u9c7c\u2014\u2014\u53d1\u73b0\u65c5\u6e38\uff01\u5206\u4eab\u65c5\u6e38\uff01\"&gt;&lt;img src=\"/images/logo4.gif\" border=\"0\" alt=\"\u6e38\u9c7c\u2014\u2014\u53d1\u73b0\u65c5\u6e38\uff01\u5206\u4eab\u65c5\u6e38\uff01\" /&gt;&lt;/a&gt;&lt;/div&gt;\n        &lt;div class=\"pagetopright\"&gt;\n            &lt;div style=\"display:none; color:#999999;\" id=\"loginsuc\"&gt;&lt;/div&gt;\n            &lt;div id=\"login\" style=\"color:#999999;\"&gt;\u7b2c\u4e00\u6b21\u6765\u6e38\u9c7c\uff1f&lt;img src=\"/images/toprightarrow.gif\" align=\"absmiddle\" /&gt;&lt;a href=\"/tour/guideintr.html\" rel=\"nofollow\"&gt;\u4e86\u89e3\u6e38\u9c7c&lt;/a&gt;&amp;nbsp;|&amp;nbsp;&lt;a href=\"/reg/reg.asp\" rel=\"nofollow\"&gt;\u6ce8\u518c&lt;/a&gt;&amp;nbsp;|&amp;nbsp;&lt;a href=\"javascript:showLoginBox1()\" rel=\"nofollow\"&gt;\u767b\u9646&lt;/a&gt;&lt;/div&gt;\n            &lt;div class=\"topsearch\"&gt;\n                &lt;!-- Google CSE Search Box Begins  --&gt;\n                &lt;form id=\"searchbox_017628897638471485970:hceobi7ukkq\" action=\"http://www.yoyv.com/search/result.html\" target=\"_blank\" style=\"margin:0px\"&gt;\n                    &lt;input type=\"hidden\" value=\"017628897638471485970:hceobi7ukkq\" name=\"cx\" /&gt;\n                    &lt;input type=\"hidden\" value=\"FORID:9\" name=\"cof\" /&gt;\n                    &lt;input size=\"25\" name=\"q\" align=\"absmiddle\" class=\"inputarea\" /&gt;\n                    &lt;input name=\"Input\" type=\"image\" src=\"/images/yoyvsearch.gif\" align=\"absmiddle\"/&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div style=\"width:928px; text-align:left; clear:both;background-color:#FFFFFF\"&gt; &lt;span class=\"preload1\"&gt;&lt;/span&gt; &lt;span class=\"preload2\"&gt;&lt;/span&gt;\n            &lt;ul id=\"nav\"&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/\" class=\"top_link\"&gt;&lt;span&gt;\u9996\u9875&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/guide/\" rel=\"nofollow\" class=\"top_link\"&gt;&lt;span class=\"down\"&gt;\u65c5\u6e38\u6307\u5357&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                        &lt;ul class=\"sub\"&gt;\n                            &lt;li&gt;&lt;b&gt;\u76ee\u7684\u5730\u65c5\u6e38\u6307\u5357&lt;/b&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/guide/\"&gt;\u56fd\u5185\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/asia.html\"&gt;\u4e9a\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/europe.html\"&gt;\u6b27\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/africa.html\"&gt;\u975e\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/namerica.html\"&gt;\u5317\u7f8e\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/samerica.html\"&gt;\u5357\u7f8e\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/continent/oceania.html\"&gt;\u5927\u6d0b\u6d32\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/top/traveltool.html\" class=\"top_link\"&gt;&lt;span class=\"down\"&gt;\u9884\u8ba2\u67e5\u8be2&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                        &lt;ul class=\"sub\"&gt;\n                            &lt;li&gt;&lt;b&gt;\u65c5\u6e38\u67e5\u8be2\u9884\u8ba2&lt;/b&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/dflight.asp\"&gt;\u56fd\u5185\u822a\u73ed\u67e5\u8be2&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/iflight.asp\"&gt;\u56fd\u9645\u822a\u73ed\u67e5\u8be2&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/hotel.asp\"&gt;\u56fd\u5185\u9152\u5e97\u67e5\u8be2&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/overseas/hotelsearch.asp\"&gt;\u6d77\u5916\u9152\u5e97\u67e5\u8be2&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;b&gt;\u5206\u7c7b\u67e5\u8be2\u5de5\u5177&lt;/b&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/map/satellite.asp\"&gt;\u5730\u56fe\u641c\u7d22&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/sightseeing.asp\" class=\"fly\"&gt;\u666f\u70b9\u641c\u7d22&lt;/a&gt;\n                                    &lt;ul&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/sightseeing.asp\"&gt;\u56fd\u5185\u666f\u70b9\u641c\u7d22&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/overseas/sightsearch.asp\"&gt;\u4e16\u754c\u666f\u70b9\u641c\u7d22&lt;/a&gt;&lt;/li&gt;\n                                    &lt;/ul&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/easytour/index.asp\" class=\"fly\"&gt;\u65c5\u884c\u4ea4\u901a\u67e5\u8be2&lt;/a&gt;\n                                    &lt;ul&gt;\n                                        &lt;li&gt;&lt;a href=\"/easytour/index.asp\"&gt;\u884c\u6613\u901a&amp;nbsp;&lt;img src=\"/guide/myview/images/good.gif\" align=\"absmiddle\" border=\"0\" /&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/bus.asp\"&gt;\u56fd\u5185260\u57ce\u5e02\u516c\u4ea4&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/overseas/metromap.asp\"&gt;\u5730\u94c1\u8def\u7ebf\u56fe(\u5168\u7403)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/train.asp\"&gt;\u56fd\u5185\u706b\u8f66\u67e5\u8be2&lt;/a&gt;&lt;/li&gt;\n                                    &lt;/ul&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/hostel.asp\"&gt;\u65c5\u9986\u62db\u5f85\u6240\u67e5\u8be2&lt;/a&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/restaurant.asp\" class=\"fly\"&gt;\u9910\u996e\u5a31\u4e50\u8d2d\u7269&lt;/a&gt;\n                                    &lt;ul&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/restaurant.asp\"&gt;\u9910\u9986\u641c\u7d22(\u56fd\u5185)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/overseas/restaurantsearch.asp\"&gt;\u9910\u9986\u641c\u7d22(\u6d77\u5916)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/Entertainment.asp\"&gt;\u5a31\u4e50\u641c\u7d22(\u56fd\u5185)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/overseas/entertainmentsearch.asp\"&gt;\u5a31\u4e50\u641c\u7d22(\u6d77\u5916)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/traveltool/shopping.asp\"&gt;\u8d2d\u7269\u641c\u7d22(\u56fd\u5185)&lt;/a&gt;&lt;/li&gt;\n                                        &lt;li&gt;&lt;a href=\"/overseas/shoppingsearch.asp\"&gt;\u8d2d\u7269\u641c\u7d22(\u6d77\u5916)&lt;/a&gt;&lt;/li&gt;\n                                    &lt;/ul&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/traveltool/weather.asp\"&gt;\u5404\u57ce\u5e02\u5929\u6c14\u9884\u62a5&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/tripplanner/\" class=\"top_link\"&gt;&lt;span&gt;\u65c5\u884c\u8ba1\u5212&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\" style=\"margin-top:8px;\"&gt;&lt;font color=\"#999999\"&gt;|&lt;/font&gt;&lt;/li&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/space/blogindex.asp\" rel=\"nofollow\" class=\"top_link\"&gt;&lt;span class=\"down\"&gt;\u535a\u5ba2&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                        &lt;ul class=\"sub\"&gt;\n                            &lt;li&gt;&lt;b&gt;\u535a\u5ba2\u6e38\u8bb0\u5206\u4eab&lt;/b&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/space/blogindex.asp\"&gt;\u535a\u5ba2\u9996\u9875&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/platter/b-list/1\"&gt;\u535a\u5ba2\u62fc\u76d8&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/moving/blogmoving.asp\"&gt;\u535a\u5ba2\u642c\u5bb6&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/moving/synservice.asp\"&gt;\u535a\u5ba2\u540c\u6b65&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/Album/Index.asp\" rel=\"nofollow\" class=\"top_link\"&gt;&lt;span class=\"down\"&gt;\u56fe\u7247\u76f8\u518c&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                        &lt;ul class=\"sub\"&gt;\n                            &lt;li&gt;&lt;b&gt;\u76f8\u518c\u4e0e\u56fe\u7247\u5206\u4eab&lt;/b&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/Album/Index.asp\"&gt;\u56fe\u7247\u76f8\u518c\u9996\u9875&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/platter/p-list/1\"&gt;\u56fe\u7247\u62fc\u76d8&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/album/more_1/\"&gt;\u6700\u65b0\u76f8\u518c\u5217\u8868&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/photos/calendar.asp\"&gt;\u56fe\u7247\u65e5\u5386&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/phototype9/1.html\"&gt;\u65c5\u6e38\u56fe\u7247\u5206\u7c7b&lt;/a&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;a href=\"/space/pkzone.asp\"&gt;\u9753\u7167\u5bf9\u51b3&lt;/a&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/Map/\" class=\"top_link\"&gt;&lt;span&gt;\u4e3b\u9898\u5730\u56fe&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n                &lt;li class=\"top\"&gt;&lt;a href=\"/group/\" class=\"top_link\"&gt;&lt;span&gt;\u7fa4\u7ec4&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\" style=\"margin-top:8px;\"&gt;&lt;font color=\"#bbbbbb\"&gt;|&lt;/font&gt;&lt;/li&gt;\n\n        &lt;li class=\"top\"&gt;&lt;a href=\"/space/trailmap.asp\" class=\"top_link\"&gt;&lt;span&gt;\u8db3\u8ff9&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\"&gt;&lt;a href=\"/platter/\" class=\"top_link\"&gt;&lt;span&gt;\u62fc\u76d8&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\"&gt;&lt;a href=\"/quiz/travelquiz.asp\" class=\"top_link\"&gt;&lt;span&gt;\u7ade\u731c&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\"&gt;&lt;a href=\"/vote/voteindex.asp\" class=\"top_link\"&gt;&lt;span&gt;\u6295\u7968&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\"&gt;&lt;a href=\"/ask/index.asp\" class=\"top_link\"&gt;&lt;span&gt;\u95ee\u7b54&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"top\"&gt;&lt;a href=\"/Deal/Index.asp\" class=\"top_link\"&gt;&lt;span&gt;\u4ea4\u6613&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;/div&gt;&lt;script language=\"javascript\"&gt;login();&lt;/script&gt;\n\n&lt;div class=\"main\"&gt;\n  &lt;div class=\"nowposition\"&gt;&lt;a href=\"/traveltool/hotel.asp\"&gt;\u9152\u5e97\u9884\u8ba2&lt;/a&gt;&amp;nbsp;&amp;gt;&amp;gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_1/\"&gt;\u4e09\u4e9a\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n  &lt;div class=\"leftbody\"&gt;\n    &lt;div class=\"hotelcount\"&gt;\n      &lt;div class=\"hotelsno\"&gt;134&lt;/div&gt;\n      &lt;div class=\"hotelsnointro\"&gt;\u95f4\u4e09\u4e9a\u7684\u9152\u5e97\u5bbe\u9986&lt;br /&gt;\n        \u7b26\u5408\u60a8\u7684\u641c\u7d22\u8981\u6c42&lt;/div&gt;\n      &lt;div class=\"hotelsnointro\" style=\"margin-top:30px; font-weight:bold;\"&gt;\u5bf9\u641c\u7d22\u7ed3\u679c\u6392\u5e8f&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"hotelsfliterarrow\"&gt;&lt;/div&gt;\n    &lt;div class=\"fliterarea\"&gt;\n      &lt;div class=\"flitername1\"&gt;\u9152\u5e97\u4ef7\u683c\u6392\u5e8f&lt;/div&gt;\n      &lt;div class=\"flitervolum\"&gt;\n        &lt;select name=\"orderByPrice2\" class=\"selectmenu1\" onchange=\"orderType('price')\"&gt;\n          &lt;option value=\"\u8bf7\u9009\u62e9\u6392\u5e8f\u65b9\u5f0f\"&gt;\u8bf7\u9009\u62e9\u6392\u5e8f\u65b9\u5f0f&lt;/option&gt;\n          &lt;option value=\"asc\"&gt;\u4ece\u4f4e\u5230\u9ad8&lt;/option&gt;\n        &lt;/select&gt;\n      &lt;/div&gt;\n      &lt;div class=\"flitername1\"&gt;\u9152\u5e97\u661f\u7ea7\u6392\u5e8f&lt;/div&gt;\n      &lt;div class=\"flitervolum\"&gt;\n        &lt;select name=\"orderByStar2\" class=\"selectmenu1\" onchange=\"orderType('star')\"&gt;\n          &lt;option value=\"\u8bf7\u9009\u62e9\u6392\u5e8f\u65b9\u5f0f\"&gt;\u8bf7\u9009\u62e9\u6392\u5e8f\u65b9\u5f0f&lt;/option&gt;\n          &lt;option value=\"asc\"&gt;\u4ece\u4f4e\u5230\u9ad8&lt;/option&gt;\n        &lt;/select&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"leftothersearch\"&gt;\n      &lt;div class=\"searchvolum\" onclick=\"show2(this)\"&gt;\n        &lt;table width=\"168\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"margin-top:12px;\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"153\"&gt;\u6309\u5546\u4e1a\u533a\u67e5\u770b\u9152\u5e97&lt;/td&gt;\n            &lt;td width=\"15\" align=\"right\"&gt;&lt;img src=\"/hotel/images/displayarrow.gif\" border=\"0\" /&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n            &lt;div class=\"rightlist\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%B4%F3%B6%AB%BA%A3_1/\"&gt;\u5927\u4e1c\u6d77&lt;/a&gt;(50        )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C4%CF%C9%BD_1/\"&gt;\u5357\u5c71&lt;/a&gt;(3         )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C4%CF%CC%EF_1/\"&gt;\u5357\u7530&lt;/a&gt;(3         )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C8%FD%D1%C7%CD%E5_1/\"&gt;\u4e09\u4e9a\u6e7e&lt;/a&gt;(65        )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%CA%D0%C4%DA_1/\"&gt;\u5e02\u5185&lt;/a&gt;(27        )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%F2%DA%D6%A7%D6%DE_1/\"&gt;\u8708\u652f\u6d32&lt;/a&gt;(1         )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%CE%F7%B5%BA_1/\"&gt;\u897f\u5c9b&lt;/a&gt;(1         )&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;(20        )&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div class=\"searchvolum\" onclick=\"show2(this)\"&gt;\n                &lt;table width=\"168\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"margin-top:12px;\"&gt;\n                    &lt;tr&gt;\n                        &lt;td width=\"153\"&gt;\u6309\u884c\u653f\u533a\u67e5\u770b\u9152\u5e97&lt;/td&gt;\n                        &lt;td width=\"15\" align=\"right\"&gt;&lt;img src=\"/hotel/images/hidearrow.gif\" border=\"0\" /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n            &lt;div class=\"rightlist\" style=\"display:none\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%B4%F3%B6%AB%BA%A3_1/\"&gt;\u5927\u4e1c\u6d77&lt;/a&gt;(14)&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%BA%D3%B6%AB%C7%F8_1/\"&gt;\u6cb3\u4e1c\u533a&lt;/a&gt;(4)&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%C8%FD%D1%C7%CD%E5_1/\"&gt;\u4e09\u4e9a\u6e7e&lt;/a&gt;(25)&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;(17)&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div class=\"searchvolum\" onclick=\"show2(this)\"&gt;\n                &lt;table width=\"168\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"margin-top:12px;\"&gt;\n                    &lt;tr&gt;\n                        &lt;td width=\"153\"&gt;\u6309\u661f\u7ea7\u67e5\u770b\u9152\u5e97&lt;/td&gt;\n                        &lt;td width=\"15\" align=\"right\"&gt;&lt;img src=\"/hotel/images/hidearrow.gif\" border=\"0\" /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n            &lt;div class=\"rightlist\" style=\"display:none\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/star/%C8%FD%D1%C7_5_1/\"&gt;\u4e09\u4e9a\u4e94\u661f\u7ea7\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/star/%C8%FD%D1%C7_4_1/\"&gt;\u4e09\u4e9a\u56db\u661f\u7ea7\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/star/%C8%FD%D1%C7_3_1/\"&gt;\u4e09\u4e9a\u4e09\u661f\u7ea7\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/hotel/star/%C8%FD%D1%C7_2_1/\"&gt;\u4e09\u4e9a\u4e8c\u661f\u7ea7\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div class=\"searchvolum\" onclick=\"show2(this)\"&gt;\n                &lt;table width=\"168\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"margin-top:12px;\"&gt;\n                    &lt;tr&gt;\n                        &lt;td width=\"153\"&gt;\u70ed\u95e8\u57ce\u5e02\u9152\u5e97\u7d22\u5f15&lt;/td&gt;\n                        &lt;td width=\"15\" align=\"right\"&gt;&lt;img src=\"/hotel/images/hidearrow.gif\" border=\"0\" /&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n            &lt;div class=\"rightlist\" style=\"display:none\"&gt;\n                &lt;ul&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%B1%B1%BE%A9_1/\"&gt;\u5317\u4eac\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C9%CF%BA%A3_1/\"&gt;\u4e0a\u6d77\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%B9%E3%D6%DD_1/\"&gt;\u5e7f\u5dde\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C9%EE%DB%DA_1/\"&gt;\u6df1\u5733\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%BA%BC%D6%DD_1/\"&gt;\u676d\u5dde\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CE%F7%B0%B2_1/\"&gt;\u897f\u5b89\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CE%E4%BA%BA_1/\"&gt;\u6b66\u6c49\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%B3%C9%B6%BC_1/\"&gt;\u6210\u90fd\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C4%CF%BE%A9_1/\"&gt;\u5357\u4eac\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_1/\"&gt;\u4e09\u4e9a\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C9%F2%D1%F4_1/\"&gt;\u6c88\u9633\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CB%D5%D6%DD_1/\"&gt;\u82cf\u5dde\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C7%E0%B5%BA_1/\"&gt;\u9752\u5c9b\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CC%EC%BD%F2_1/\"&gt;\u5929\u6d25\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CF%C3%C3%C5_1/\"&gt;\u53a6\u95e8\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div class=\"searchvolum\"&gt;\n                &lt;table width=\"168\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"margin-top:12px;\"&gt;\n                    &lt;tr&gt;\n                        &lt;td width=\"153\"&gt;\u9152\u5e97\u8ba2\u5355\u67e5\u8be2&lt;/td&gt;\n                        &lt;td width=\"15\" align=\"right\"&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n      &lt;div class=\"rightlist\"&gt;&lt;form action=\"/hotel/browseorder.asp\" method=\"post\" style=\"margin:0px;\"&gt;\n        &lt;ul&gt;\n          &lt;li style=\"margin-left:0px; list-style:none;\"&gt;&lt;font color=\"#666666\"&gt;\u8054\u7cfb\u4eba\u59d3\u540d\uff1a&lt;/font&gt;\n              &lt;input name=\"CName\" type=\"text\" /&gt;\n          &lt;/li&gt;\n          &lt;li style=\"margin-left:0px; list-style:none;\"&gt;&lt;font color=\"#666666\"&gt;\u624b\u673a\u53f7\u7801\uff1a&lt;/font&gt;\n              &lt;input name=\"Mobile\" type=\"text\" /&gt;\n          &lt;/li&gt;\n          &lt;li style=\"margin-top:10px; margin-bottom:10px;margin-left:0px; list-style:none;\"&gt;&lt;input name=\"\" type=\"image\" src=\"/hotel/images/checkorder.gif\" /&gt;&lt;/li&gt;\n        &lt;/ul&gt;&lt;/form&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"rightbody\"&gt;\n    &lt;h1&gt;\u4e09\u4e9a\u9152\u5e97\u9884\u8ba2\u5217\u8868 \u4e09\u4e9a\u5bbe\u9986\u67e5\u8be2\u7ed3\u679c&lt;/h1&gt;\n    &lt;div class=\"hotellistintro\"&gt;\u60a8\u641c\u7d22\u7684\u662f&lt;font color=\"#FF6600\"&gt;&lt;strong&gt;2010-07-14&lt;/strong&gt;&lt;/font&gt;\u81f3&lt;font color=\"#FF6600\"&gt;&lt;strong&gt;2010-07-16&lt;/strong&gt;&lt;/font&gt;\u4e09\u4e9a\u9152\u5e97\u4ef7\u683c\u3002\u8fd9\u4e9b\u4ef7\u683c\u662f\u6bcf\u4e2a\u9152\u5e97\u5bbe\u9986\u7684\u6700\u4f4e\u623f\u578b\u4ef7\u683c\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb\u6bcf\u4e2a\u9152\u5e97\u53f3\u4fa7\u7684\u201c\u623f\u578b\u4ef7\u683c\u201d\u94fe\u63a5\u6765\u6d4f\u89c8\u8be5\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u3002\u540c\u65f6\u60a8\u4e5f\u53ef\u4ee5\u9009\u62e9\u5de6\u4fa7\u7684\u884c\u653f\u533a\u6216\u5546\u4e1a\u533a\u6765\u7f29\u5c0f\u60a8\u7684\u641c\u7d22\u8303\u56f4\u3002&lt;/div&gt;\n    &lt;div class=\"hotellistintro\" style=\"margin-top:20px;\"&gt;&lt;font class=\"changdate\"&gt;\u53d8\u66f4\u65e5\u671f\u91cd\u65b0\u67e5\u8be2\uff1a&lt;/font&gt;&amp;nbsp;\u5165\u4f4f\u65e5\u671f&amp;nbsp;&lt;input id=\"InDate2\" type=\"text\" class=\"datefill\" value=\"2010-07-14\" onClick=\"event.cancelBubble=true;showCalendar('InDate2',false,'InDate2')\"/&gt;&amp;nbsp;&amp;nbsp;\u79bb\u5e97\u65e5\u671f&amp;nbsp;&lt;input id=\"OutDate2\" type=\"text\" class=\"datefill\" value=\"2010-07-16\" onClick=\"event.cancelBubble=true;showCalendar('OutDate2',false,'OutDate2')\"/&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"javascript:changeDate()\"&gt;&lt;img src=\"/hotel/images/searchbutton.gif\" align=\"absmiddle\" border=\"0\" /&gt;&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"#moresearch\"&gt;\u66f4\u591a\u67e5\u8be2\u9009\u9879&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/searchmap/%C8%FD%D1%C7.html\" title=\"\u5728\u4e09\u4e9a\u5730\u56fe\u4e0a\u67e5\u8be2\u9152\u5e97\"&gt;\u4f7f\u7528\u5730\u56fe\u67e5\u8be2&lt;/a&gt;&lt;/div&gt;\n    &lt;div class=\"restpage\"&gt;&amp;nbsp;&lt;font class=\"curpage\"&gt;1&lt;/font&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_2/\"&gt;2&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_3/\"&gt;3&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_4/\"&gt;4&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_5/\"&gt;5&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_6/\"&gt;6&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_7/\"&gt;7&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_8/\"&gt;8&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_9/\"&gt;9&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_10/\"&gt;10&lt;/a&gt;&amp;nbsp;&lt;font color=\"#666666\" style=\" font-weight:normal;\"&gt;\u517114\u9875&lt;/font&gt;&amp;nbsp;&lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/30/42201201_0_5_0_6.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;1.&lt;a href=\"/hotel/details/8330.htm\"&gt;\u4e09\u4e9a\u56fd\u5149\u8c6a\u751f\u5ea6\u5047\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C8%FD%D1%C7%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e09\u4e9a\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e09\u4e9a\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e09\u4e9a\u6e7e\u8def188\u53f7&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;2010/3/16-2010/5/3\uff0c\u9152\u5e97\u8bd5\u884c24\u5c0f\u65f6\u5165\u4f4f\u5236\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5780&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/8330.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u56fd\u5149\u8c6a\u751f\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/8330.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u56fd\u5149\u8c6a\u751f\u5ea6\u5047\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/8330.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u56fd\u5149\u8c6a\u751f\u5ea6\u5047\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/8330.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u56fd\u5149\u8c6a\u751f\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/7/52201012_0_5_0_4.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;2.&lt;a href=\"/hotel/details/173.htm\"&gt;\u4e09\u4e9a\u5929\u798f\u6e90\u5ea6\u5047\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C8%FD%D1%C7%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e09\u4e9a\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e09\u4e9a\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e09\u4e9a\u6e7e\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u9152\u5e97\u4f4d\u4e8e\u4e09\u4e9a\u6e7e\u6d77\u5761\u5f00\u53d1\u533a\uff0c\u62e5\u6709\u76ee\u524d\u4e09\u4e9a\u6700\u5927\u7684\u6e29\u6cc9\u6cf3\u6c60\uff0c\u53ef\u8fd1\u89c8\u6d77\u5929\u4e00\u7ebf\u7684\u7f8e\u666f\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5348&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/173.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5929\u798f\u6e90\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/173.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5929\u798f\u6e90\u5ea6\u5047\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/173.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u5929\u798f\u6e90\u5ea6\u5047\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/173.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5929\u798f\u6e90\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/1/42201002_0_5_0_6.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;3.&lt;a href=\"/hotel/details/4583.htm\"&gt;\u4e09\u4e9a\u5357\u4e2d\u56fd\u5927\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate2.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%B4%F3%B6%AB%BA%A3_1/\"title=\"\u4f4d\u4e8e\u5927\u4e1c\u6d77\u7684\u9152\u5e97\u5217\u8868\"&gt;\u5927\u4e1c\u6d77&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u5927\u4e1c\u6d77\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u4ece\u9152\u5e97\u6b65\u884c\u4e24\u5206\u949f\u53ef\u8fbe\u5927\u4e1c\u6d77\u5b09\u6c34\u4e50\u56ed\uff0c\u66fe\u591a\u6b21\u63a5\u5f85\u56fd\u5bb6\u9886\u5bfc\u53ca\u5916\u56fd\u5143\u9996\u7684\u8c6a\u534e\u82b1\u56ed\u9152\u5e97\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5444&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/4583.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5357\u4e2d\u56fd\u5927\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/4583.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5357\u4e2d\u56fd\u5927\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/4583.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u5357\u4e2d\u56fd\u5927\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/4583.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5357\u4e2d\u56fd\u5927\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/2/52201004_0_5_0_3.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;4.&lt;a href=\"/hotel/details/184.htm\"&gt;\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u5929\u9e3f\u5ea6\u5047\u6751&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\" title=\"\u4e9a\u9f99\u6e7e\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;\uff0c&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e9a\u9f99\u6e7e\u56fd\u5bb6\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u5177\u6709\u70ed\u5e26\u4f11\u95f2\u98ce\u683c\u7684\u522b\u5885\u7cbe\u54c1\u5ea6\u5047\u9152\u5e97\uff0c\u524d\u77b0\u767d\u6c99\u78a7\u6d77\uff0c\u80cc\u4f9d\u6e56\u6cca\u9752\u5c71\uff0c\u623f\u95f4\u5168\u90e8\u9762\u6d77\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5738&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/184.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u5929\u9e3f\u5ea6\u5047\u6751\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/184.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u5929\u9e3f\u5ea6\u5047\u6751\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/184.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u5929\u9e3f\u5ea6\u5047\u6751\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/184.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u5929\u9e3f\u5ea6\u5047\u6751\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/11/52201018_0_2_0_6.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;5.&lt;a href=\"/hotel/details/176.htm\"&gt;\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u7ea2\u6811\u6797\u5ea6\u5047\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\" title=\"\u4e9a\u9f99\u6e7e\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;\uff0c&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e9a\u9f99\u6e7e\u56fd\u5bb6\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u9152\u5e97\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u56fd\u5bb6\u65c5\u6e38\u5ea6\u5047\u533a\uff0c\u662f\u4e2d\u56fd\u552f\u4e00\u5177\u6709\u5df4\u5398\u5c9b\u70ed\u5e26\u98ce\u60c5\u7684\u7eaf\u5ea6\u5047\u9152\u5e97\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe51240&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/176.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u7ea2\u6811\u6797\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/176.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u7ea2\u6811\u6797\u5ea6\u5047\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/176.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u7ea2\u6811\u6797\u5ea6\u5047\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/176.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u7ea2\u6811\u6797\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/11/52201017_0_5_0_4.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;6.&lt;a href=\"/hotel/details/175.htm\"&gt;\u4e09\u4e9a\u6e7e\u5047\u65e5\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C8%FD%D1%C7%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e09\u4e9a\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e09\u4e9a\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e09\u4e9a\u6e7e\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u4f4d\u4e8e\u6d77\u5357\u5c9b\u6d77\u5cb8\u7ebf\u6700\u957f\u7684\u4e09\u4e9a\u6e7e\u6d77\u5761\u5ea6\u5047\u533a\u7684\u56fd\u9645\u54c1\u724c\u9152\u5e97\uff0c\u4e0e\u7f8e\u4e3d\u7684\u6930\u68a6\u957f\u5eca\u76f8\u4f9d\u504e\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5700&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/175.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u6e7e\u5047\u65e5\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/175.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u6e7e\u5047\u65e5\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/175.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u6e7e\u5047\u65e5\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/175.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u6e7e\u5047\u65e5\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"/hotel/ImgList/nopic.gif\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;7.&lt;a href=\"/hotel/details/11835.htm\"&gt;\u4e09\u4e9a\u5927\u5c0f\u6d1e\u5929\u5c0f\u6708\u6e7e\u5ea6\u5047\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%C4%CF%C9%BD_1/\"title=\"\u4f4d\u4e8e\u5357\u5c71\u7684\u9152\u5e97\u5217\u8868\"&gt;\u5357\u5c71&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u4e09\u4e9a\u5e02\u5d16\u57ce\u5927\u5c0f\u6d1e\u5929\u65c5\u6e38\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u9152\u5e97\u4f4d\u4e8e\u56fd\u5bb65A\u7ea7\u666f\u533a\u5927\u5c0f\u6d1e\u5929\u5185\uff0c\u9762\u671d\u5357\u6d77\u80cc\u9760\u5357\u5c71\uff0c\u6ee8\u6d77\u539f\u751f\u6001\u6728\u5c4b\u522b\u5885\uff0c\u4e00\u5343\u591a\u7c73\u539f\u751f\u6001\u7684\u6d77\u6ee9\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5598&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/11835.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5927\u5c0f\u6d1e\u5929\u5c0f\u6708\u6e7e\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/11835.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5927\u5c0f\u6d1e\u5929\u5c0f\u6708\u6e7e\u5ea6\u5047\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/11835.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u5927\u5c0f\u6d1e\u5929\u5c0f\u6708\u6e7e\u5ea6\u5047\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/11835.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u5927\u5c0f\u6d1e\u5929\u5c0f\u6708\u6e7e\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"/hotel/images/nolistpic.gif\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;8.&lt;a href=\"/hotel/details/13929.htm\"&gt;\u4e09\u4e9a\u534a\u5c71\u534a\u5c9b\u6d32\u9645\u5ea6\u5047\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%B4%F3%B6%AB%BA%A3_1/\"title=\"\u4f4d\u4e8e\u5927\u4e1c\u6d77\u7684\u9152\u5e97\u5217\u8868\"&gt;\u5927\u4e1c\u6d77&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u4e2d\u56fd\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u6d32\u9645\u8def1\u53f7&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u534a\u5c71\u534a\u5c9b\u95f4\u60a6\u4eab\u6d32\u9645\u5929&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe51690&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/13929.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u534a\u5c71\u534a\u5c9b\u6d32\u9645\u5ea6\u5047\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/13929.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u534a\u5c71\u534a\u5c9b\u6d32\u9645\u5ea6\u5047\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/4/52201006_0_5_0_3.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;9.&lt;a href=\"/hotel/details/186.htm\"&gt;\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u73af\u7403\u57ce\u5927\u9152\u5e97&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\" title=\"\u4e9a\u9f99\u6e7e\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;\uff0c&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u6d77\u5357\u7701\u4e09\u4e9a\u5e02\u4e9a\u9f99\u6e7e\u56fd\u5bb6\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u9152\u5e97\u80cc\u9760\u9752\u5c71\u3001\u897f\u6795\u7eff\u6e56\u3001\u9762\u671d\u5927\u6d77\uff0c\u662f\u4e00\u5bb6\u62e5\u6709\u5c71\u3001\u6e56\u3001\u6d77\u201c\u4e09\u5408\u4e00\u201d\u5ba2\u623f\u98ce\u666f\u7684\u9152\u5e97\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5608&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/186.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u73af\u7403\u57ce\u5927\u9152\u5e97\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/186.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u73af\u7403\u57ce\u5927\u9152\u5e97\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/186.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u73af\u7403\u57ce\u5927\u9152\u5e97\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/186.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u4e9a\u9f99\u6e7e\u73af\u7403\u57ce\u5927\u9152\u5e97\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n        &lt;div class=\"hotellist\"&gt;\n      &lt;div class=\"detailtop\"&gt;&lt;/div&gt;\n      &lt;div class=\"detailmid\"&gt;\n        &lt;table width=\"727\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n          &lt;tr&gt;\n            &lt;td width=\"145\" valign=\"top\"&gt;&lt;img src=\"http://static.elong.com/images/hotels/hotelimages/1/32201001_0_5_0_1.jpg\" width=\"130\" border=\"0\" onError=javascript:{this.src='http://www.yoyv.com/hotel/ImgList/nopic.gif'}&gt;&lt;/td&gt;\n            &lt;td width=\"350\" valign=\"top\"&gt;&lt;div class=\"hotelname\"&gt;10.&lt;a href=\"/hotel/details/3337.htm\"&gt;\u4e09\u4e9a\u51ef\u83b1\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff08\u539f\u4e09\u4e9a\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff09&lt;/a&gt;&lt;/div&gt;\n                &lt;div class=\"hotelcontent\"&gt;\u9152\u5e97\u661f\u7ea7\uff1a&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&lt;img src='/hotel/images/rate.gif' align='absmiddle' /&gt;&amp;nbsp;&amp;nbsp;\u6240\u5728\u533a\u57df\uff1a&lt;a href=\"/hotel/district/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\" title=\"\u4e9a\u9f99\u6e7e\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;\uff0c&lt;a href=\"/hotel/sowntown/%C8%FD%D1%C7_%D1%C7%C1%FA%CD%E5_1/\"title=\"\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u7684\u9152\u5e97\u5217\u8868\"&gt;\u4e9a\u9f99\u6e7e&lt;/a&gt;&lt;br /&gt;\n                  \u9152\u5e97\u5730\u5740\uff1a\u4e09\u4e9a\u5e02\u4e9a\u9f99\u6e7e\u56fd\u5bb6\u65c5\u6e38\u5ea6\u5047\u533a&lt;br /&gt;\n                  &lt;font style=\"font-weight:bold\"&gt;\u4f4d\u4e8e\u4e9a\u9f99\u6e7e\u7684\u4ee5\u5370\u5730\u5b89\u4eba\u548c\u6d77\u5357\u9ece\u3001\u82d7\u65cf\u7b49\u571f\u8457\u6587\u5316\u4e3a\u4e3b\u9898\u5177\u6709\u6d53\u90c1\u739b\u96c5\u6587\u5316\u7684\u5ea6\u5047\u9152\u5e97\u3002&lt;/font&gt;&lt;/div&gt;&lt;/td&gt;\n            &lt;td width=\"232\" valign=\"top\"&gt;&lt;div class=\"hotelprice\"&gt;&lt;font class=\"hotelprice2\"&gt;\uffe5518&lt;/font&gt;\u8d77&lt;br /&gt;\n                    &lt;a href=\"/hotel/room/3337.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u51ef\u83b1\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff08\u539f\u4e09\u4e9a\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff09\u7684\u6240\u6709\u623f\u578b\u53ca\u4ef7\u683c\"&gt;\u623f\u578b\u4ef7\u683c&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/details/3337.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u51ef\u83b1\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff08\u539f\u4e09\u4e9a\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff09\u7684\u8be6\u7ec6\u4ecb\u7ecd\u53ca\u9152\u5e97\u8bbe\u65bd\"&gt;\u9152\u5e97\u8bbe\u65bd&lt;/a&gt;&lt;br /&gt;\n              &lt;a href=\"/hotel/traffic/3337.htm\" title=\"\u4e09\u4e9a\u4e09\u4e9a\u51ef\u83b1\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff08\u539f\u4e09\u4e9a\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff09\u7684\u4ea4\u901a\u3001\u4f4d\u7f6e\u4ee5\u53ca\u7535\u5b50\u5730\u56fe\"&gt;\u4ea4\u901a\u5730\u56fe&lt;/a&gt;&lt;br /&gt;&lt;a href=\"/hotel/pic/3337.htm\" title=\"\u6d4f\u89c8\u4e09\u4e9a\u4e09\u4e9a\u51ef\u83b1\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff08\u539f\u4e09\u4e9a\u4ed9\u4eba\u638c\u5ea6\u5047\u9152\u5e97\uff09\u7684\u6240\u6709\u56fe\u7247\"&gt;\u9152\u5e97\u56fe\u7247&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n      &lt;div class=\"detailbtm\"&gt;&lt;/div&gt;\n    &lt;/div&gt;        \n    &lt;div class=\"restpage\" style=\"margin-top:15px;\"&gt;&amp;nbsp;&lt;font class=\"curpage\"&gt;1&lt;/font&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_2/\"&gt;2&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_3/\"&gt;3&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_4/\"&gt;4&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_5/\"&gt;5&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_6/\"&gt;6&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_7/\"&gt;7&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_8/\"&gt;8&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_9/\"&gt;9&lt;/a&gt;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_10/\"&gt;10&lt;/a&gt;&amp;nbsp;&lt;font color=\"#666666\" style=\" font-weight:normal;\"&gt;\u517114\u9875&lt;/font&gt;&amp;nbsp;&lt;/div&gt;\n    &lt;/div&gt;\n  &lt;div class=\"moreinfo\"&gt;\n    &lt;form name=\"search1\" action=\"/hotel/search.asp\" method=\"post\" style=\"margin:0px 0px 0px 0px;\"&gt;\n    &lt;input name=\"districtId\" type=\"hidden\" value=\"\" /&gt;\n    &lt;input name=\"commercialId\" type=\"hidden\" value=\"\" /&gt;\n    &lt;input name=\"city\" type=\"hidden\" value=\"\u4e09\u4e9a\" /&gt;\n    &lt;input name=\"page\" type=\"hidden\" value=\"1\" /&gt;\n    &lt;input name=\"orderByPrice\" type=\"hidden\" value=\"\" /&gt;\n    &lt;input name=\"orderByStar\" type=\"hidden\" value=\"\" /&gt;\n    &lt;div class=\"moresearch\"&gt;&lt;strong&gt;\u9152\u5e97\u9ad8\u7ea7\u67e5\u8be2\uff1a&lt;a name=\"moresearch\" id=\"moresearch\"&gt;&lt;/a&gt;&lt;/strong&gt;&amp;nbsp;\u9009\u62e9\u57ce\u5e02&amp;nbsp;&lt;select name=\"cityId\" class=\"selectmenu2\"&gt;&lt;script language=\"JavaScript\" src=\"/hotel/scripts/hotelcityS.js\" type=\"text/javascript\"&gt;&lt;/script&gt;&lt;/select&gt;&amp;nbsp;&amp;nbsp;\u5165\u4f4f\u65e5\u671f&amp;nbsp;&lt;input name=\"InDate\" type=\"text\" class=\"datefill\" value=\"2010-07-14\" onClick=\"event.cancelBubble=true;showCalendar('InDate',false,'InDate')\"/&gt;&amp;nbsp;&amp;nbsp;\u79bb\u5e97\u65e5\u671f&amp;nbsp;&lt;input name=\"OutDate\" type=\"text\" class=\"datefill\" value=\"2010-07-16\" onClick=\"event.cancelBubble=true;showCalendar('OutDate',false,'OutDate')\"/&gt;\n    &lt;/div&gt;\n    &lt;div class=\"moresearch\" style=\"padding-top:10px; padding-left:347px;\"&gt;\u9152\u5e97\u661f\u7ea7&amp;nbsp;&lt;select name=\"star\" class=\"selectmenu2\"&gt;&lt;option value=\"1\" selected&gt;\u4e0d\u9650\u661f\u7ea7&lt;/option&gt;&lt;option value=\"2\"&gt;\u4e8c\u661f\u7ea7&lt;/option&gt;&lt;option value=\"3\"&gt;\u4e09\u661f\u7ea7&lt;/option&gt;&lt;option value=\"4\"&gt;\u56db\u661f\u7ea7&lt;/option&gt;&lt;option value=\"5\"&gt;\u4e94\u661f\u7ea7&lt;/option&gt;&lt;/select&gt;&amp;nbsp;&amp;nbsp;\u9152\u5e97\u4ef7\u683c&amp;nbsp;&lt;select name=\"price\" class=\"selectmenu2\" style=\"width:104px;\"&gt;&lt;option value='-1'  selected&gt;\u4e0d\u9650&lt;/option&gt;&lt;option value='1201'&gt;1200\u5143\u4ee5\u4e0a&lt;/option&gt;&lt;option value='1200'&gt;801--1200\u5143&lt;/option&gt;&lt;option value='800'&gt;501--800\u5143&lt;/option&gt;&lt;option value='500'&gt;401--500\u5143&lt;/option&gt;&lt;option value='400'&gt;301--400\u5143&lt;/option&gt;&lt;option value='300'&gt;201--300\u5143&lt;/option&gt;&lt;option value='200'&gt;200\u5143\u4ee5\u4e0b&lt;/option&gt;&lt;/select&gt;&amp;nbsp;&amp;nbsp;\u9152\u5e97\u540d\u79f0&amp;nbsp;&lt;input name=\"hotelName\" type=\"text\" class=\"datefill\" style=\"background-image:none;\"/&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"javascript:newSearch()\"&gt;&lt;img src=\"/hotel/images/searchbtn.gif\" border=\"0\" align=\"absmiddle\" /&gt;&lt;/a&gt;&lt;/div&gt;\n    &lt;div class=\"moresearch\"&gt;&lt;strong&gt;\u672c\u5730\u65c5\u6e38\u8d44\u8baf\uff1a&lt;/strong&gt;&amp;nbsp;&lt;a href=\"/totimetable/309_1/\"&gt;\u4e09\u4e9a\u822a\u73ed\u67e5\u8be2&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/guide/c/%C8%FD%D1%C7/\"&gt;\u4e09\u4e9a\u65c5\u6e38\u6307\u5357&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/guide/OutLook/%C8%FD%D1%C7/\"&gt;\u4e09\u4e9a\u65c5\u6e38\u666f\u70b9&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/search/Bus/City/C8FDD1C7.htm\"&gt;\u4e09\u4e9a\u516c\u4ea4&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/search/train/station/C8FDD1C7.htm\"&gt;\u4e09\u4e9a\u706b\u8f66&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/guide/Food/%C8%FD%D1%C7/\"&gt;\u4e09\u4e9a\u9910\u9986&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/city/trip/309_1/\"&gt;\u4e09\u4e9a\u65c5\u884c\u8ba1\u5212&lt;/a&gt;&lt;/div&gt;\n  &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"yoyvbtm\"&gt;\n  &lt;div class=\"btmbg\"&gt;\n    &lt;div class=\"btmcontent\"&gt;\n      &lt;div class=\"btmitem\"&gt;\u5173\u4e8e\u6e38\u9c7cwww.yoyv.com\u25ce&lt;/div&gt;\n      &lt;div class=\"youyuintro\"&gt;\u6e38\u9c7c\u662f\u4e00\u4e2a\u65c5\u6e38\u7231\u597d\u8005\u5206\u4eab\u65c5\u9014\u5feb\u4e50,\u4ea4\u6d41\u65c5\u884c\u7ecf\u9a8c\u7684\u65c5\u6e38\u793e\u533a\u3002&lt;br /&gt;\n        \u6e38\u9c7c\u662f\u4e00\u90e8\u6db5\u76d6\u76ee\u7684\u5730\u9910\u996e\u3001\u4f4f\u5bbf\u3001\u4ea4\u901a\u3001\u65c5\u6e38\u666f\u70b9\u3001\u8d2d\u7269\u3001\u5a31\u4e50\u7b49\u5b9e\u7528\u4fe1\u606f\u7684\u65c5\u884c\u6307\u5357\u3002&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"btmcontent2\" &gt;\n      &lt;div class=\"btmitem\"&gt;\u70ed\u95e8\u65c5\u6e38\u76ee\u7684\u5730&lt;/div&gt;\n      &lt;div class=\"youyuintro\"&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%B1%B1%BE%A9/\" target=\"_blank\"&gt;\u5317\u4eac\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%C9%CF%BA%A3/\" target=\"_blank\"&gt;\u4e0a\u6d77\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%BA%BC%D6%DD/\" target=\"_blank\"&gt;\u676d\u5dde\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%C4%CF%BE%A9/\" target=\"_blank\"&gt;\u5357\u4eac\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%B9%F0%C1%D6/\" target=\"_blank\"&gt;\u6842\u6797\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%CE%F7%B0%B2/\" target=\"_blank\"&gt;\u897f\u5b89\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%C8%FD%D1%C7/\" target=\"_blank\"&gt;\u4e09\u4e9a\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;a href=\"/guide/c/%C0%F6%BD%AD/\" target=\"_blank\"&gt;\u4e3d\u6c5f\u65c5\u6e38\u6307\u5357&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"btmcontent2\" &gt;\n            &lt;div class=\"btmitem\"&gt;\u70ed\u95e8\u5730\u533a\u9152\u5e97\u9884\u8ba2&lt;/div&gt;\n            &lt;div class=\"youyuintro\"&gt;\n                &lt;ul&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%B1%B1%BE%A9_1/\" target=\"_blank\"&gt;\u5317\u4eac\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%B3%C9%B6%BC_1/\" target=\"_blank\"&gt;\u6210\u90fd\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C9%CF%BA%A3_1/\" target=\"_blank\"&gt;\u4e0a\u6d77\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%CE%E4%BA%BA_1/\" target=\"_blank\"&gt;\u6b66\u6c49\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%B9%E3%D6%DD_1/\" target=\"_blank\"&gt;\u5e7f\u5dde\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%C4%CF%BE%A9_1/\" target=\"_blank\"&gt;\u5357\u4eac\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C9%EE%DB%DA_1/\" target=\"_blank\"&gt;\u6df1\u5733\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%C8%FD%D1%C7_1/\" target=\"_blank\"&gt;\u4e09\u4e9a\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%BA%BC%D6%DD_1/\" target=\"_blank\"&gt;\u676d\u5dde\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%CB%D5%D6%DD_1/\" target=\"_blank\"&gt;\u82cf\u5dde\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CE%F7%B0%B2_1/\" target=\"_blank\"&gt;\u897f\u5b89\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%C0%A5%C3%F7_1/\" target=\"_blank\"&gt;\u6606\u660e\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%C7%E0%B5%BA_1/\" target=\"_blank\"&gt;\u9752\u5c9b\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%B4%F3%C1%AC_1/\" target=\"_blank\"&gt;\u5927\u8fde\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/hotel/city/%CF%C3%C3%C5_1/\" target=\"_blank\"&gt;\u53a6\u95e8\u9152\u5e97&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/hotel/city/%D6%D8%C7%EC_1/\" target=\"_blank\"&gt;\u91cd\u5e86\u9152\u5e97&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"btmcontent2\" &gt;\n            &lt;div class=\"btmitem\"&gt;\u70ed\u95e8\u65c5\u6e38\u666f\u70b9&lt;/div&gt;\n            &lt;div class=\"youyuintro\"&gt;\n                &lt;ul&gt;\n                    &lt;li&gt;&lt;a href=\"/s/11796\" target=\"_blank\"&gt;\u6545\u5bab&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/15549\" target=\"_blank\"&gt;\u897f\u6e56&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/16521\" target=\"_blank\"&gt;\u9ec4\u5c71&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/22128\" target=\"_blank\"&gt;\u534e\u5c71&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/17772\" target=\"_blank\"&gt;\u6cf0\u5c71&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/15082\" target=\"_blank\"&gt;\u5468\u5e84&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/19604\" target=\"_blank\"&gt;\u9633\u6714&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/16284\" target=\"_blank\"&gt;\u4e4c\u9547&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/11865\" target=\"_blank\"&gt;\u5929\u5b89\u95e8&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/12465\" target=\"_blank\"&gt;\u9890\u548c\u56ed&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/15572\" target=\"_blank\"&gt;\u5343\u5c9b\u6e56&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/20162\" target=\"_blank\"&gt;\u4e5d\u5be8\u6c9f&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/17942\" target=\"_blank\"&gt;\u5c11\u6797\u5bfa&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/16900\" target=\"_blank\"&gt;\u9f13\u6d6a\u5c7f&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/s/18950\" target=\"_blank\"&gt;\u51e4\u51f0\u53e4\u57ce&lt;/a&gt;&amp;nbsp;&amp;nbsp;&lt;a href=\"/s/21556\" target=\"_blank\"&gt;\u5e03\u8fbe\u62c9\u5bab&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"btmcontent2\" style=\" border:0px;\"&gt;\n      &lt;div class=\"btmitem\"&gt;\u5173\u4e8e\u6e38\u9c7c&lt;/div&gt;\n      &lt;div class=\"youyuintro\"&gt;\n        &lt;ul&gt;\n          &lt;li&gt;&lt;a href=\"/Info/help.html#d\" target=\"_blank\" rel=\"nofollow\"&gt;\u5173\u4e8e\u6e38\u9c7c&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/Info/help.html#l\" target=\"_blank\" rel=\"nofollow\"&gt;\u8054\u7cfb\u6211\u4eec&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/ad/index.html\" target=\"_blank\"&gt;\u4ea7\u54c1\u670d\u52a1&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/Info/SiteMap.htm\" target=\"_blank\"&gt;\u7ad9\u5185\u5bfc\u822a&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/group/yoyv/\" target=\"_blank\"&gt;\u6e38\u9c7c\u7ad9\u52a1\u8bba\u575b&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"http://yoyvcom.yoyv.com\" target=\"_blank\"&gt;\u6e38\u9c7cBlog&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/LeaveWord/index.asp\" target=\"_blank\" rel=\"nofollow\"&gt;\u5efa\u8bae\u7559\u8a00&lt;/a&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;a href=\"/Info/link2.asp\" target=\"_blank\"&gt;\u53cb\u60c5\u94fe\u63a5&lt;/a&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"yoyvcopyright\"&gt;Copright \u25ce2006-2010 YOYV.COM All Rights reserved &lt;a href=\"http://www.miibeian.gov.cn/\" rel=\"nofollow\"&gt;\u9655ICP\u590707000041\u53f7&lt;/a&gt;&lt;/div&gt;\n    &lt;div style=\"display:none;\"&gt;&lt;script language=\"javascript\" src=\"http://count8.51yes.com/click.aspx?id=84597943&amp;logo=12\" charset=\"gb2312\"&gt;&lt;/script&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;    \"\"\"\n    handler = TestHandler(handle_comment=False, handle_text=False)\n    parser = HtmlParser(handler)\n    btime = time()\n    for i in range(1):\n        parser.parse(html)\n        handler.print_hrefs()\n    print time() - btime\n\ndef test_main_3():\n    html = '''\n&lt;a href=\"http://anshan.soufun.com/\" target=\"_blank\"&gt;\uffb0\uffb0\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://erds.soufun.com/\" target=\"_blank\"&gt;\uffb6\ufff5\uffb6\ufffb\uffb6\uffe0\uffcb\uffb9&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jn.soufun.com/\" target=\"_blank\"&gt;\uffbc\uffc3\uffc4\uffcf&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nanjing.soufun.com/\" target=\"_blank\"&gt;\uffc4\uffcf\uffbe\uffa9&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://tj.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffec\uffbd\ufff2&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yt.soufun.com/\" target=\"_blank\"&gt;\uffd1\uffcc\uffcc\uffa8&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;B&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;F&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jl.soufun.com/\" target=\"_blank\"&gt;\uffbc\uffaa\uffc1\uffd6&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nc.soufun.com/\" target=\"_blank\"&gt;\uffc4\uffcf\uffb2\ufffd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://tz.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffa8\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yz.soufun.com/\" target=\"_blank\"&gt;\uffd1\uffef\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://bj.soufun.com/\" target=\"_blank\"&gt;\uffb1\uffb1\uffbe\uffa9&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://fs.soufun.com/\" target=\"_blank\"&gt;\uffb7\ufff0\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jx.soufun.com/\" target=\"_blank\"&gt;\uffbc\uffce\uffd0\uffcb&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nn.soufun.com/\" target=\"_blank\"&gt;\uffc4\uffcf\uffc4\ufffe&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://taiyuan.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffab\uffd4\uffad&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yc.soufun.com/\" target=\"_blank\"&gt;\uffd2\uffcb\uffb2\ufffd&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://bt.soufun.com/\" target=\"_blank\"&gt;\uffb0\ufffc\uffcd\uffb7&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://fz.soufun.com/\" target=\"_blank\"&gt;\uffb8\uffa3\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jh.soufun.com/\" target=\"_blank\"&gt;\uffbd\ufff0\uffbb\uffaa&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nt.soufun.com/\" target=\"_blank\"&gt;\uffc4\uffcf\uffcd\uffa8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://taizhou.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffa9\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yinchuan.soufun.com/\" target=\"_blank\"&gt;\uffd2\ufff8\uffb4\uffa8&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://bd.soufun.com/\" target=\"_blank\"&gt;\uffb1\uffa3\uffb6\uffa8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;G&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jc.soufun.com/\" target=\"_blank\"&gt;\uffbd\ufffa\uffb3\uffc7&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nb.soufun.com/\" target=\"_blank\"&gt;\uffc4\ufffe\uffb2\uffa8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://ts.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffc6\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yl.soufun.com/\" target=\"_blank\"&gt;\uffd3\ufff1\uffc1\uffd6&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://bh.soufun.com/\" target=\"_blank\"&gt;\uffb1\uffb1\uffba\uffa3&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://gz.soufun.com/\" target=\"_blank\"&gt;\uffb9\uffe3\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jy.soufun.com/\" target=\"_blank\"&gt;\uffbd\uffad\uffd2\ufff5&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;Q&lt;/strong&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://tc.soufun.com/\" target=\"_blank\"&gt;\uffcc\uffab\uffb2\uffd6&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://yk.soufun.com/\" target=\"_blank\"&gt;\uffd3\uffaa\uffbf\uffda&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://baoji.soufun.com/\" target=\"_blank\"&gt;\uffb1\uffa6\uffbc\uffa6&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://gy.soufun.com\" target=\"_blank\"&gt;\uffb9\ufff3\uffd1\ufff4&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://jm.soufun.com/\" target=\"_blank\"&gt;\uffbd\uffad\uffc3\uffc5&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://qd.soufun.com/\" target=\"_blank\"&gt;\uffc7\uffe0\uffb5\uffba&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;W&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;Z&lt;/strong&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;C&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://guilin.soufun.com/\" target=\"_blank\"&gt;\uffb9\ufff0\uffc1\uffd6&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;K&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://qhd.soufun.com/\" target=\"_blank\"&gt;\uffc7\uffd8\uffbb\uffca\uffb5\uffba&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wuhan.soufun.com/\" target=\"_blank\"&gt;\uffce\uffe4\uffba\uffba&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zj.soufun.com/\" target=\"_blank\"&gt;\uffd5\uffbf\uffbd\uffad&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://cq.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffd8\uffc7\uffec&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://ganzhou.soufun.com/\" target=\"_blank\"&gt;\uffb8\uffd3\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://km.soufun.com/\" target=\"_blank\"&gt;\uffc0\uffa5\uffc3\ufff7&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://qz.soufun.com/\" target=\"_blank\"&gt;\uffc8\uffaa\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://weihai.soufun.com/\" target=\"_blank\"&gt;\uffcd\ufffe\uffba\uffa3&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zhenjiang.soufun.com/\" target=\"_blank\"&gt;\uffd5\ufff2\uffbd\uffad&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://cd.soufun.com/\" target=\"_blank\"&gt;\uffb3\uffc9\uffb6\uffbc&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;H&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://ks.soufun.com/\" target=\"_blank\"&gt;\uffc0\uffa5\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;R&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wf.soufun.com/\" target=\"_blank\"&gt;\uffce\uffab\uffb7\uffbb&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zz.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffa3\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://cz.soufun.com/\" target=\"_blank\"&gt;\uffb3\uffa3\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hz.soufun.com/\" target=\"_blank\"&gt;\uffba\uffbc\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;L&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://rz.soufun.com/\" target=\"_blank\"&gt;\uffc8\uffd5\uffd5\uffd5&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wz.soufun.com/\" target=\"_blank\"&gt;\uffce\uffc2\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zs.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffd0\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://changchun.soufun.com/\" target=\"_blank\"&gt;\uffb3\uffa4\uffb4\uffba&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hrb.soufun.com/\" target=\"_blank\"&gt;\uffb9\ufffe\uffb6\ufffb\uffb1\ufff5&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://lz.soufun.com/\" target=\"_blank\"&gt;\uffc0\uffbc\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;S&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wuxi.soufun.com/\" target=\"_blank\"&gt;\uffce\uffde\uffce\ufffd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zhuzhou.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffea\uffd6\uffde&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://cs.soufun.com/\" target=\"_blank\"&gt;\uffb3\uffa4\uffc9\uffb3&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hn.soufun.com/\" target=\"_blank\"&gt;\uffba\uffa3\uffc4\uffcf&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://ls.soufun.com/\" target=\"_blank\"&gt;\uffc0\ufff6\uffcb\uffae&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sh.soufun.com/\" target=\"_blank\"&gt;\uffc9\uffcf\uffba\uffa3&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wj.soufun.com/\" target=\"_blank\"&gt;\uffce\uffe2\uffbd\uffad&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zh.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffe9\uffba\uffa3&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://changshu.soufun.com/\" target=\"_blank\"&gt;\uffb3\uffa3\uffca\uffec&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hd.soufun.com/\" target=\"_blank\"&gt;\uffba\uffaa\uffb5\uffa6&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://lyg.soufun.com/\" target=\"_blank\"&gt;\uffc1\uffac\uffd4\uffc6\uffb8\uffdb&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sz.soufun.com/\" target=\"_blank\"&gt;\uffc9\uffee\uffdb\uffda&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xj.soufun.com/\" target=\"_blank\"&gt;\uffce\uffda\uffc2\uffb3\uffc4\uffbe\uffc6\uffeb&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zb.soufun.com/\" target=\"_blank\"&gt;\uffd7\uffcd\uffb2\uffa9&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;D&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hf.soufun.com\" target=\"_blank\"&gt;\uffba\uffcf\uffb7\uffca&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://ly.soufun.com/\" target=\"_blank\"&gt;\uffc2\uffe5\uffd1\ufff4&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://suzhou.soufun.com/\" target=\"_blank\"&gt;\uffcb\uffd5\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://wuhu.soufun.com/\" target=\"_blank\"&gt;\uffce\uffdf\uffba\ufffe&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zhoushan.soufun.com/\" target=\"_blank\"&gt;\uffd6\uffdb\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://dl.soufun.com/\" target=\"_blank\"&gt;\uffb4\ufff3\uffc1\uffac&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://huizhou.soufun.com/\" target=\"_blank\"&gt;\uffbb\uffdd\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://liuzhou.soufun.com/\" target=\"_blank\"&gt;\uffc1\ufff8\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sx.soufun.com/\" target=\"_blank\"&gt;\uffc9\uffdc\uffd0\uffcb&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;X&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://zjg.soufun.com/\" target=\"_blank\"&gt;\uffd5\uffc5\uffbc\uffd2\uffb8\uffdb&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://dg.soufun.com/\" target=\"_blank\"&gt;\uffb6\uffab\uffdd\uffb8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://nm.soufun.com/\" target=\"_blank\"&gt;\uffba\ufff4\uffba\uffcd\uffba\uffc6\uffcc\uffd8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://lf.soufun.com/\" target=\"_blank\"&gt;\uffc0\uffc8\uffb7\uffbb&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sy.soufun.com/\" target=\"_blank\"&gt;\uffc9\ufff2\uffd1\ufff4&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xian.soufun.com/\" target=\"_blank\"&gt;\uffce\ufff7\uffb0\uffb2&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;\uffc6\uffe4\uffcb\ufffb&lt;/strong&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://dy.soufun.com/\" target=\"_blank\"&gt;\uffb6\uffab\uffd3\uffaa&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://huaian.soufun.com/\" target=\"_blank\"&gt;\uffbb\uffb4\uffb0\uffb2&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://lc.soufun.com/\" target=\"_blank\"&gt;\uffc1\uffc4\uffb3\uffc7&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sjz.soufun.com/\" target=\"_blank\"&gt;\uffca\uffaf\uffbc\uffd2\uffd7\uffaf&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xn.soufun.com/\" target=\"_blank\"&gt;\uffce\ufff7\uffc4\ufffe&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://www.hkproperty.com/\" target=\"_blank\"&gt;\uffcf\uffe3\uffb8\uffdb&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://dz.soufun.com/\" target=\"_blank\"&gt;\uffb5\uffc2\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://heze.soufun.com/\" target=\"_blank\"&gt;\uffba\uffca\uffd4\ufff3&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;strong&gt;M&lt;/strong&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://st.soufun.com/\" target=\"_blank\"&gt;\uffc9\uffc7\uffcd\uffb7&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xm.soufun.com/\" target=\"_blank\"&gt;\uffcf\uffc3\uffc3\uffc5&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://www.twproperty.com.tw/\" target=\"_blank\"&gt;\uffcc\uffa8\uffcd\uffe5&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://huzhou.soufun.com/\" target=\"_blank\"&gt;\uffba\ufffe\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://mianyang.soufun.com/\" target=\"_blank\"&gt;\uffc3\uffe0\uffd1\ufff4&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://shunde.soufun.com/\" target=\"_blank\"&gt;\uffcb\uffb3\uffb5\uffc2&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xz.soufun.com/\" target=\"_blank\"&gt;\uffd0\uffec\uffd6\uffdd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" height=\"20\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://www.sgproperty.com/\" target=\"_blank\"&gt;\uffd0\uffc2\uffbc\uffd3\uffc6\uffc2&lt;/a&gt;&lt;/td&gt;\n\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://hs.soufun.com/\" target=\"_blank\"&gt;\uffba\uffe2\uffcb\uffae&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" height=\"20\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://mas.soufun.com/\" target=\"_blank\"&gt;\uffc2\uffed\uffb0\uffb0\uffc9\uffbd&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://sanya.soufun.com/\" target=\"_blank\"&gt;\uffc8\ufffd\uffd1\uffc7&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://xt.soufun.com/\" target=\"_blank\"&gt;\uffcf\uffe6\uffcc\uffb6&lt;/a&gt;&lt;/td&gt;\n\n        &lt;td align=\"left\" height=\"20\" valign=\"middle\" width=\"16%\"&gt;&lt;a href=\"http://vancouver.soufun.com/\" target=\"_blank\"&gt;\uffce\uffc2\uffb8\uffe7\uffbb\uffaa&lt;/a&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;td align=\"left\" valign=\"middle\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;td align=\"left\" height=\"20\" valign=\"middle\"&gt;&amp;nbsp;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\"&gt;&lt;a href=\"http://sq.soufun.com/\" target=\"_blank\"&gt;\uffcb\uffde\uffc7\uffa8&lt;/a&gt;&lt;/td&gt;\n        &lt;td align=\"left\" valign=\"middle\"&gt;&lt;a href=\"http://xx.soufun.com/\" target=\"_blank\"&gt;\uffd0\uffc2\uffcf\uffe7&lt;/a&gt;\n'''\n    handler = TestHandler(handle_comment=False, handle_text=True)\n    parser = HtmlParser(handler)\n    parser.parse(html)\n    handler.print_hrefs()\n\n\n\nif __name__ == '__main__':\n    unittest.main()\n    test_main()\n    test_main_2()\n    test_main_3()\n</code></pre>"},{"location":"posts/performace%20optimization/","title":"Performace optimization","text":"<p>+++ title = \"\u8bb0\u4e00\u6b21\u7cfb\u7edf\u4f18\u5316\u8fc7\u7a0b-1\" date = 2014-08-21</p> <p>categories = [\"Tech\"] tags = [\"Optimization\"] +++</p>"},{"location":"posts/performace%20optimization/#_1","title":"\u67b6\u6784\u4f18\u5316","text":"<p>\u6700\u8fd1\u8981\u641e\u4e00\u6b21\u62a2\u7968\u6d3b\u52a8\uff0c\u5c31\u50cf\u5c0f\u7c73\u90a3\u6837\uff0c\u8003\u8651\u5230\u76ee\u524d\u7684\u7528\u6237\u6570\u636e\uff0c\u9884\u8ba1\u5230\u65f6\u5019\u4f1a\u6709\u77ac\u65f630w\u5de6\u53f3\u7684\u5e76\u53d1\u3002\u8fd9\u5bf9\u4e8e\u4e00\u4e2a\u5e38\u89c4\u7684web\u9879\u76ee\u662f\u707e\u96be\u6027\u7684\u3002\u5373\u53ef\u80fd\u88ab\u5b95\u673a\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u60c5\u51b5\uff0c\u4e8e\u662f\u5bf9\u73b0\u6709\u7cfb\u7edf\u8fdb\u884c\u4e86\u6539\u9020\u3002\u5148\u8bf4\u73b0\u6709\u7cfb\u7edf\u7684\u7ed3\u6784\u3002\u73b0\u6709\u7684\u7cfb\u7edf\u6bd4\u8f83\u7b80\u5355\uff0c\u5c5e\u4e8e\u4f20\u7edf\u7684web\u5e94\u7528\uff0c\u67b6\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u79cd\u67b6\u6784\u662f\u6700\u4f20\u7edf\u7684\uff0c\u5bf9\u4e8e\u538b\u529b\u4e0d\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002\u5f53\u538b\u529b\u9010\u7ea7\u589e\u5927\uff0c\u901a\u8fc7\u6c34\u5e73\u6269\u5c55 web \u670d\u52a1 \u548c \u6c34\u5e73\u6269\u5c55db\u5c31\u8fbe\u5230\u76ee\u7684\u4e86\u3002\u4f46\u5982\u679c\u77ac\u65f6\u5927\u5e76\u53d1\u8fc7\u6765\uff0c\u4f8b\u5982\uff1a30w/s\uff0c\u4e5f\u6765\u4e0d\u53ca\u6269\u5c55\u3002\u800c\u4e14\uff0c\u8981\u6c42\u7684\u670d\u52a1\u5668\u8d44\u6e90\u5f88\u591a\uff0c\u6210\u672c\u4e0d\u80fd\u63a5\u53d7\u3002\u90a3\u4e48\uff0c\u5c31\u8981\u8003\u8651\u4f18\u5316\u548c\u6539\u9020\u4e86\u3002</p> <p>30w\u7684\u77ac\u65f6\u5e76\u53d1\uff0c\u5bf9\u4e8e\u540e\u9762\u7684\u538b\u529b\uff0c\u4e3b\u8981\u6765\u6e90\u4e8e\uff1anginx\uff0c\u62a2\u7968api\uff0cdb\u3002nginx\u88f8\u538b\uff0c\u8f7b\u677e\u4e0a15w\u5e76\u53d1\u3002\u6240\u4ee5\uff0cnginx\u53ea\u9700\u8981\u67093\u4e2a\u5c31\u591f\u4e86\u3002\u62a2\u7968API\u8981\u6c34\u5e73\u6269\u5c55\u5f88\u591a\u670d\u52a1\u5668\uff0c\u6210\u672c\u4e0d\u80fd\u63a5\u53d7\u3002\u800cdb\u8003\u8651\u5206\u5e93\u64cd\u4f5c\uff0c\u6539\u52a8\u6bd4\u8f83\u5927\uff0c\u5bf9\u4e8e\u73b0\u6709\u6570\u636e\u7684\u8fc1\u79fb\u4e5f\u662f\u6210\u672c\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ea\u8981\u80fd\u89e3\u51b3\u62a2\u7968api\u548cDB\u7684\u538b\u529b\u5c31ok\u4e86\u3002\u6240\u4ee5\uff0c\u8003\u8651\u7528MQ\u89e3\u8026\u3002\u5177\u4f53\u67b6\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u6837\u5b50\u538b\u529b\u8f6c\u5ac1\u5230MQ\u4e0a\u3002\u53ea\u8981\u62a2\u7968API\u80fd\u625b\u4f4f\u538b\u529b\uff0cMQ\u80af\u5b9a\u6ca1\u6709\u95ee\u9898\u3002\u800cDB\u7684\u538b\u529b\uff0c\u5b8c\u5168\u7531Consumer\u7684\u6570\u91cf\u51b3\u5b9a\uff0c\u662f\u53ef\u63a7\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cDB\u5b8c\u5168\u6ca1\u6709\u538b\u529b\u3002</p>"},{"location":"posts/performace%20optimization/#_2","title":"\u7f51\u7edc\u4f18\u5316","text":"<p>\u7f51\u7edc\u4f18\u5316\uff0c\u4e00\u822c\u5c31\u662f\u4f18\u5316\u64cd\u4f5c\u7cfb\u7edf\u7684limit fd\u6570\u91cf\u548csocket\u72b6\u6001\u3002</p> <ol> <li>\u4fee\u6539 /etc/security/limits.conf\u3002\u5728\u6587\u4ef6\u4e2d\u589e\u52a0\uff1a</li> </ol> <pre><code>* soft nofile 20480\n* hard nofile 20480\n* - memlock unlimited\n</code></pre> <ol> <li>\u4fee\u6539 /etc/sysctl.conf</li> </ol> <pre><code>kernel.shmall = 4294967296\nnet.ipv4.tcp_mem = 786432 2097152 3145728\nnet.ipv4.tcp_rmem = 4096 4096 16777216\nnet.ipv4.tcp_wmem = 4096 4096 16777216\n\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.tcp_fin_timeout = 30\n\nnet.ipv4.tcp_keepalive_time = 1200\nnet.ipv4.ip_local_port_range = 1024 65000\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.tcp_max_tw_buckets = 5000\nnet.ipv4.tcp_synack_retries = 2\nnet.ipv4.tcp_syn_retries = 2\nnet.ipv4.tcp_max_orphans = 3276800\n\nnet.core.netdev_max_backlog = 32768\nnet.core.somaxconn = 32768\nfs.file-max = 1048576\n</code></pre>"},{"location":"posts/python%20tricks%20and%20hacks/","title":"Python tricks and hacks","text":"<p>+++ title = \"python\u5947\u6280\u6deb\u5de7\" date = 2009-09-11</p> <p>categories = [\"Tech\"] tags = [\"Python\", \"Tricks\"] +++</p> <p>\u5728Python\u4e2d\uff0c\u6709\u4e00\u4e9b\u5e38\u89c1\u4e0d\u5e38\u7528\u53c8\u5f88\u6709\u7528\u7684\u5947\u6280\u6deb\u5de7</p>"},{"location":"posts/python%20tricks%20and%20hacks/#getattribute","title":"getattribute","text":"<p>\u5148\u4e0a\u4ee3\u7801</p> <pre><code>class Foo(object):\n\n    def __init__(self):\n        self.value = '1'*10\n\n    def __getattribute__(self, name):\n        print 'in get attribute'\n        return super(Foo, self).__getattribute__(name)\n\n    def hello(self):\n        return 'hello'\n\nf = Foo()\nprint f.value\n</code></pre> <p>\u6253\u5370\u51fa\uff1a</p> <pre><code>&gt;&gt;&gt; in get attribute\n&gt;&gt;&gt; 1111111111\n&gt;&gt;&gt; in get attribute\n&gt;&gt;&gt; hello\n</code></pre> <p>\u53ef\u89c1 \u5f53\u8c03\u7528\u4e00\u4e2aInstance.attr \u6216\u8005 Instance.method\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u662f\u8c03\u7528\u4e86<code>__getattribute__</code> \u6ce8\u610f\u4e0d\u8981\u5728__getattribute__\u7684\u65b9\u6cd5\u91cc\u9762\u5199Intance.xx\uff0c\u5426\u5219\u4f1a\u8fdb\u5165\u6b7b\u9012\u5f52\uff0c\u76f4\u5230\u6ea2\u51fa</p>"},{"location":"posts/python%20tricks%20and%20hacks/#getattr","title":"getattr","text":"<p>\u4e0a\u4ee3\u7801\uff1a</p> <pre><code>#coding: utf-8\n\nclass Foo(object):\n\n    def __init__(self):\n        self.value = '1'*10\n\n    def __getattribute__(self, name):\n        print 'in get attribute'\n        return super(Foo, self).__getattribute__(name)\n\n    def __getattr__(self, name):\n        print 'in get attr'\n\n\n    def hello(self):\n        return 'hello'\n\nf = Foo()\nprint f.value\nprint f.hello()\nprint f.value1\n</code></pre> <p>\u6253\u5370\u51fa\uff1a</p> <pre><code>&gt;&gt;&gt; in get attribute\n&gt;&gt;&gt; 1111111111\n&gt;&gt;&gt; in get attribute\n&gt;&gt;&gt; hello\n&gt;&gt;&gt; in get attribute\n&gt;&gt;&gt; in get attr\n&gt;&gt;&gt; None\n</code></pre> <p>\u53ef\u89c1 \u5f53\u8c03\u7528\u4e00\u4e2aInstance.attr \u6216\u8005 Instance.method\u7684\u65f6\u5019\uff0c\u5b9e\u9645\u4e0a\u5148\u8c03\u7528\u4e86<code>__getattribute__</code>\uff0c\u5f53\u6ca1\u6709\u627e\u5230\u7684\u65f6\u5019\uff0c</p> <p>\u518d\u8c03\u7528<code>__getattr__</code>\u65b9\u6cd5\u3002</p> <p>\u5229\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u5176\u5b9e\u7c7b\u4f3c\u4e8erails\u91cc\u9762\u7684missing_method\u5728Python\u4e2d\u4e5f\u53ef\u4ee5\u5b9e\u73b0</p>"},{"location":"posts/python%20tricks%20and%20hacks/#setattr","title":"setattr","text":"<p>\u4e0a\u4ee3\u7801\uff1a</p> <pre><code>#coding: utf-8\n\nclass Foo(object):\n\n    def __init__(self):\n        pass\n\n    def __setattribute__(self, name, value):\n        self.__dict__[name] = value\n        print 'in set attribute'\n\n    def __setattr__(self, name, value):\n        self.__dict__[name] = value\n        print 'in set attr'\n\nf = Foo()\nf.value = '1'*10\nf.hello = lambda: 'hello'\nprint f.value\nprint f.hello()\n</code></pre> <p>\u6253\u5370\u51fa\uff1a</p> <pre><code>&gt;&gt;&gt; in set attr\n&gt;&gt;&gt; in set attr\n&gt;&gt;&gt; 1111111111\n&gt;&gt;&gt; hello\n</code></pre> <p>\u53ef\u89c1</p> <pre><code>Instance.attr = value\nInstance.method = xxx\n</code></pre> <p>\u90fd\u662f\u8c03\u7528\u7684<code>__setattr__</code>\u65b9\u6cd5\uff0c\u6ce8\u610f\u4e0d\u8981\u5728<code>__setattr__</code>\u91cc\u9762\u518d\u8c03\u7528Instance.xx = yy\u6216\u8005 setattr\u7684\u65b9\u6cd5\uff0c\u5426\u5219\u4f1a\u8fdb\u884c\u6b7b\u9012\u5f52\uff0c\u76f4\u5230\u6ea2\u51fa</p>"},{"location":"posts/python%20tricks%20and%20hacks/#with-as","title":"with ... as ...","text":"<p>python2.6\u4e2d\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u7528\u6cd5\uff1a<code>with...as...</code>  \uff1b  \u57282.5\u4e2d\u9700\u8981<code>import __feature__</code>;</p> <p>\u5148\u6765\u8bf4\u8bf4\u4ed6\u7684\u7528\u6cd5\uff0c\u5148\u770b\u770b\u4e00\u822c\u6211\u4eec\u5982\u4f55\u6253\u5f00\u5e76\u4e14\u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6\u7684\uff1a</p> <pre><code>f = None\ntry:\n    f = open('/etc/hosts', 'r')\n    print f.readlines()\nexcept:\n    raise\nfinally:\n    if f:\n        try:\n            f.close()\n        except:\n            pass\n        finally:\n            f = None\n</code></pre> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u6587\u4ef6\u64cd\u4f5c\uff0c\u4f46\u662f\u5bf9\u4e8e\u6587\u4ef6\u7684\u6253\u5f00\u548c\u5173\u95ed\u6211\u4eec\u505a\u4e86\u592a\u591a\u7684\u5904\u7406\u3002\u90a3\u4e48\u5982\u679c\u51cf\u5c11\u8fd9\u4e9b\u8d44\u6e90\u7684\u6253\u5f00\u548c\u91ca\u653e\u7684\u4ee3\u7801\u5462\uff1f\u8bf7\u770b\u4e0b\u9762\uff1a</p> <pre><code>    with open('/etc/hosts', 'r') as f:\n        print f.readlines()\n</code></pre> <p>\u5b9e\u73b0\u4e86\u540c\u6837\u7684\u529f\u80fd\uff0c\u4f46\u662f\u6587\u4ef6\u7684\u5173\u95ed\u5728\u54ea\u91cc\u5462\uff1f\u8fd9\u4e2a\u5c31\u662fwith ... as ... \u7684\u4f5c\u7528\u4e86\u3002\u5b83\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u81ea\u52a8\u91ca\u653e\u4e00\u4e9b\u8d44\u6e90\u3002\u90a3\u4e48\u539f\u7406\u662f\u600e\u4e48\u6837\u7684\u5462\uff1f\u770b\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u5427\uff1a</p> <pre><code>class Foo(object):\n\n    def __enter__(self):\n        print 'in enter' \n\n    def __exit__(self, exc_type, exc_value, traceback):\n        print 'exit'    \n\nwith Foo() as f:\n    pass\n</code></pre> <p>\u6253\u5370\u51fa\uff1a</p> <pre><code>&gt;&gt;&gt; in enter\n&gt;&gt;&gt; exit\n</code></pre> <p>\u53ef\u89c1 <code>with ... as ...</code> \u7684\u65f6\u5019\uff0c\u55f2\u7528\u4e86 <code>__enter__</code> \u7684\u65b9\u6cd5\uff0c\u5f53\u8df3\u51fawith \u4ee3\u7801\u6bb5\u7684\u65f6\u5019\uff0c\u81ea\u52a8\u8c03\u7528\u4e86 <code>__exit__</code>\u7684\u65b9\u6cd5\u3002\u5bf9\u4e8e\u9ad8\u7248\u672c\u7684python\u6765\u8bf4\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528contextmanager\u6765\u8fdb\u884c\u76f8\u540c\u7684\u5de5\u4f5c\u3002\u800c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u5199\u51fa\u5f88\u591a\u6709\u610f\u601d\u7684\u4ee3\u7801\uff0c\u4f8b\u5982\u5728\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u65f6\u5019\uff0c\u5047\u8bbe\u6709\u4e00\u4e2aUser\u7684ORM\u3002</p> <p>\u90a3\u4e48\u5bf9\u4e8e\u4e8b\u52a1\u7684\u5904\u7406\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5199\u6210\uff1a</p> <pre><code>class Transaction(object):\n\n    def __init__(self, db):\n        self._conn = db\n        self._conn._db.autocommit(False)\n\n    def commit(self):\n        if self._conn._db:\n            self._conn._db.commit()\n            self._conn._db.autocommit(True)\n\n    def rollback(self):\n        if self._conn._db:\n            self._conn._db.rollback()\n            self._conn._db.autocommit(True)\n\n\nclass User(object):\n\n    @classmethod\n    @contextmanager\n    def transaction(cls):\n        t = Transaction(db)\n        try:\n            yield None\n        except Exception, ex:\n            t.rollback()\n            raise\n        else:\n            t.commit()\n\nwith User.transaction():\n    # do sth.\n</code></pre>"},{"location":"posts/python%20tricks%20and%20hacks/#_1","title":"\u5de7\u7528\u5f02\u5e38\u5f97\u5230\u4ee3\u7801\u7247\u6bb5\u7684\u4fe1\u606f","text":"<p>python \u6709<code>__file__</code>, \u4f46\u6ca1\u6709<code>__funcname__</code>, <code>__line__</code> \u8fd9\u6837\u7684\u4e1c\u897f\uff0c\u6765\u63cf\u8ff0\u76ee\u524d\u6267\u884c\u5230\u4ec0\u4e48\u65b9\u6cd5\uff0c\u54ea\u4e00\u884c\u3002\u600e\u4e48\u529e\uff1f\u5de7\u7528\u5f02\u5e38\uff0c\u53ef\u4ee5\u5f97\u5230\u76f8\u5e94\u7684\u4fe1\u606f\u3002</p> <pre><code>#utf-8\nimport sys\n\ndef func_name_and_line():\n    \"\"\"Return the frame object for the caller's stack frame.\"\"\"\n    try:\n        raise Exception\n    except:\n        f = sys.exc_info()[2].tb_frame.f_back\n    return f.f_code.co_name, f.f_lineno\n\ndef test():\n    print func_name_and_line()\n\nif __name__ == '__main__':\n    test()\n</code></pre>"},{"location":"posts/python%20tricks%20and%20hacks/#_2","title":"\u57fa\u672c\u6570\u5b66","text":"<p>\u4e00\u4e2a\u65b9\u6cd5\u5f97\u5230\u6574\u6570\u548c\u4f59\u6570</p> <pre><code>print divmod(5, 3)\n</code></pre> <p>\u5229\u7528\u4e24\u4e2a*\u53f7\uff0c\u6c42\u5e42</p> <pre><code>print 2**3\n</code></pre> <p>\u5229\u7528namedtuple\u4ee3\u66ff\u5e38\u91cf\u7684dict</p> <p>dict\u7684\u4f18\u52bf\u5728\u4e8e\u7b80\u5355\uff0c\u7f3a\u70b9\u5728\u4e8ekey\u53ef\u4ee5\u662f\u968f\u610f\u7684\uff0c\u6240\u4ee5\uff0c\u6709\u65f6\u5019key\u586b\u9519\u4e86\uff0c\u4e5f\u4e0d\u5bb9\u6613\u627e\u51fa\u6765\u3002\u800c\u4e14\uff0c\u7531\u4e8edict\u7684\u5b8c\u5168\u5bf9\u5916\u5f00\u53d1\u6027\u3002\u6240\u4ee5\uff0c\u901a\u8fc7\u67d0\u4e9b\u6b65\u9aa4\u540e\uff0c\u53ef\u80fd\u5185\u5bb9\u5c31\u5b8c\u5168\u53d8\u5316\u4e86\u3002\u6240\u4ee5\uff0c\u5f53\u4f60\u7684dict\u4f5c\u4e3a\u4e00\u4e2a\u5e38\u91cf\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u8003\u8651\u7528namedtuple\uff0c\u8fd9\u6837\u589e\u52a0\u4e86\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3002\u800c\u4e14\uff0c\u51cf\u5c11\u4e86\u51fa\u9519\u7684\u6982\u7387</p> <pre><code>from collections import namedtuple\nuser = namedtuple('User', ['name', 'password'])._make(['pengyi', '888888'])\nprint user.name, user.password\n</code></pre> <p>\u5feb\u901f\u62c9\u5e73\u4e00\u4e2alist</p> <p>\u5bf9\u4e8e\u4e00\u4e2alist\uff0c\u91cc\u9762\u7684\u5143\u7d20\u53ef\u80fd\u53c8\u662f\u4e00\u4e2alist\u6216\u8005tuple\u3002\u90a3\u4e48\u6709\u6ca1\u6709\u65b9\u5f0f\u5feb\u901f\u62c9\u5e73\uff1f</p> <pre><code>def flatten(sequnce):\n    for x in sequnce:\n        if isinstance(x, (list, tuple)):\n            for y in flatten(x):\n                yield y\n        else:\n            yield x\n\nfor x in flatten(['a', ['b', 'c'], range(10), 'f']):\n    print x\n</code></pre> <p>\u5143\u7d20\u7ec4\u5408</p> <p>\u7ec4\u5408\u4e00\u4e2a\u96c6\u5408\u91cc\u9762\u7684\u6240\u6709\u5143\u7d20</p> <pre><code>from itertools import combinations\n\nfor x in combinations(range(10), 2):\n    print x\nfor x in combinations(range(10), 3):\n    print x\n</code></pre> <p>\u5bf9list\u8fdb\u884c\u6392\u5e8f - \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199</p> <pre><code>l = ['B', 'a', 'A', 'b' ]\nl.sort()\n</code></pre> <ul> <li>\u5ffd\u7565\u5927\u5c0f\u5199</li> </ul> <pre><code>l = ['B', 'a', 'A', 'b' ]\nl.sort(key = str.lower)\n</code></pre> <p>\u5bf9\u5b57\u5178\u8fdb\u884c\u6392\u5e8f</p> <ul> <li>\u5143\u7d20\u5f88\u591a\u7684\u5b57\u5178\uff1a</li> </ul> <pre><code>def sort_dict(d):\n    for k in sorted(d.iterkeys()):\n        yield k, d[k]\n</code></pre> <ul> <li>\u5143\u7d20\u4e0d\u591a\u7684\u5b57\u5178\uff1a</li> </ul> <pre><code>[ k, d[k] for k in sorted(d.iterkeys()) ]\n</code></pre> <p>SortedDict \u4fdd\u8bc1\u5b57\u5178\u7684\u63d2\u5165\u987a\u5e8f \u5bf9\u4e8e\u5b57\u5178\u6765\u8bf4\uff0ckey\u662fhash\u7b97\u6cd5\u3002\u90a3\u4e48\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u63d2\u5165\u987a\u5e8f\u3002\u4f46\u662fpython\u7684\u6807\u51c6\u5e93\u91cc\u9762\u63d0\u4f9b\u4e86\u4e00\u4e2aSortedDict\uff0c\u7528\u6cd5\u548cdict\u4e00\u6837\u3002</p> <pre><code>for k, v in SortedDict(a=1, b=2, c=3, aa=4, bb=5).iteritems():\n    print k, v\n</code></pre>"},{"location":"posts/python%20validation/","title":"Python validation","text":"<p>+++ title = \"python validation\" date = \"2010-11-13\"</p> <p>categories = [\"Tech\"] tags = [\"Python\"] +++</p> <p>rails\u4e2d\uff0c\u6709\u4e00\u4e2aactive_validation\uff0c\u7528\u6765\u505a\u4e00\u4e9b\u5e38\u89c1\u7684\u6821\u9a8c\uff0c\u5341\u5206\u65b9\u4fbf\u3002\u4e8e\u662f\u4e4e\uff0c\u6a21\u4eff\u4e86\u5b83\uff0c\u5199\u4e0b\u4e86\u5b83\u3002</p> <pre><code>#coding: utf-8\nimport re\n\nclass NoOptionError(Exception):\n    def __init__(self, options = []):\n        self.msg = 'should be in [%s], but noting' % ', '.join(options)\n\n\nclass OptionNameError(Exception):\n    def __init__(self, option, options = []):\n        should_be = ', '.join(options)\n        self.msg = 'should be in [%s], but %s' % (should_be, option)\n\n\nclass Validator(object):\n\n    def _validate_options(self, **options):\n        all_null = True\n        for opt in options:\n            if opt not in self._options:\n                raise OptionNameError(opt, self._options)\n            else:\n                if options[opt] is not None:\n                    all_null = False\n        if all_null:\n            raise NoOptionError(self._options)\n        return True\n\n\nclass PresenceValidator(Validator):\n\n    def validate(self, value, allow_blank = True):\n        if value is None:\n            return False\n\n        if allow_blank:\n            if isinstance(value, str): # \u5b57\u7b26\u4e32\u8981\u5355\u72ec\u5904\u7406\n                if not value.strip():\n                    return True\n            if not value:\n                return True\n        else:\n            if isinstance(value, str): # \u5b57\u7b26\u4e32\u8981\u5355\u72ec\u5904\u7406\n                if not value.strip():\n                    return False\n            if (isinstance(value, str) or isinstance(value, list) \n                or isinstance(value, dict) or isinstance(value, tuple)) and not value: # \u6570\u5b570\u4e0d\u7528\u505a\u8fd9\u4e2a\u5224\u65ad\n                return False\n\n        return True\n\n\nclass InclusionValidator(Validator):\n\n    def validate(self, value, in_values = [], allow_null = False, allow_blank = False):\n        if value is None:\n            return allow_null\n\n        if isinstance(value, str):\n            value = value.strip()\n\n        if isinstance(value, str) and not value:\n            return allow_blank\n        return value in in_values\n\n\nclass NumericalityValidator(Validator):\n    _options = set([\n        'greater_than', 'greater_than_or_equal_to', 'equal_to', \n        'less_than', 'less_than_or_equal_to', 'odd', 'even'\n    ])\n\n    def validate(self, value, **options):\n        self._validate_options(**options)\n        if value is None:\n            raise Exception('value can not be null.')\n        if type(value) not in (int, long, float):\n            raise Exception('value should be a number, but a %s' % type(value))\n        if options.get('greater_than', False) and value &lt;= options['greater_than']: \n            return False\n        if options.get('greater_than_or_equal_to', False) and value &lt; options['greater_than_or_equal_to']:\n            return False\n        if options.get('equal_to', False) and value != options['equal_to']:\n            return False\n        if options.get('less_than', False) and value &gt;= options['less_than']:\n            return False\n        if options.get('less_than_or_equal_to', False) and value &gt; options['less_than_or_equal_to']:\n            return False\n        odd = options.get('odd', None)\n        if odd in (True, False):\n            if odd:\n                if value % 2 == 0: return False\n            else:\n                if value % 2 != 0: return False\n        even = options.get('even', None)\n        if even in (True, False):\n            if even:\n                if value % 2 != 0: return False\n            else:\n                if value % 2 == 0: return False\n        return True\n\n\nclass AcceptanceValidator(Validator):\n\n    def validate(self, value, allow_null = True ):\n        if allow_null:\n            return True\n        return value is not None\n\n\nclass LengthValidator(Validator):\n    _options = set([\n        '_is', 'minimum', 'maximum', \n        'allow_null', 'allow_blank'\n    ])\n\n    def validate(self, value, **options):\n        self._validate_options(**options)\n        if value is None:\n            return options.get('allow_null', True)\n\n        if options.get('allow_blank', True):\n            if isinstance(value, str):\n                if value.strip() == '':\n                    return True\n            if not value:\n                return True\n        else:\n            if isinstance(value, str):\n                if value.strip() == '':\n                    return False\n            if (isinstance(value, str) or isinstance(value, list) \n                or isinstance(value, dict) or isinstance(value, tuple)) and not value: # \u6570\u5b570\u4e0d\u7528\u505a\u8fd9\u4e2a\u5224\u65ad\n                return False\n\n        if options.get('_is', False) and len(value) != options['_is']: \n            return False\n        if options.get('minimum', False) and len(value) &lt; options['minimum']:\n            return False\n        if options.get('maximum', False) and len(value) &gt; options['maximum']:\n            return False\n        return True\n\n\nclass ConfirmationValidator(Validator):\n\n    def validate(self, value, confirmation_value):\n        return confirmation_value == value\n\n\nclass FormatValidator(Validator):\n\n    def validate(self, value, _with = None, allow_null = True, allow_blank = True):\n        if value is None:\n            return allow_null\n\n        if allow_blank:\n            if isinstance(value, str):\n                if not value.strip():\n                    return True\n            if (isinstance(value, str) or isinstance(value, list) \n                or isinstance(value, dict) or isinstance(value, tuple)) and not value: # \u6570\u5b570\u4e0d\u7528\u505a\u8fd9\u4e2a\u5224\u65ad\n                return True\n\n        return True if re.match(_with, value) else False\n\n\nclass ExclusionValidator(Validator):\n\n    def validate(self, value, exclusion_values = [], allow_null = False, allow_blank = False):\n        if value is None:\n            return allow_null\n\n        if isinstance(value, str):\n            value = value.strip()\n\n        if (isinstance(value, str) or isinstance(value, list) \n                or isinstance(value, dict) or isinstance(value, tuple)) and not value: # \u6570\u5b570\u4e0d\u7528\u505a\u8fd9\u4e2a\u5224\u65ad\n            return allow_blank\n\n        return value not in exclusion_values\n</code></pre>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/","title":"some common metrics in Data Analysis and Statistics","text":"<p>+++ title = \"\u51e0\u4e2a\u5e38\u7528\u7edf\u8ba1\u6307\u6807\" date = 2010-03-09</p> <p>categories = [\"Tech\"] tags = [\"Data Analysis\", \"Data Statistics\"] +++</p>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/#tfidf","title":"TF/IDF","text":"<ul> <li>TF: \u8bcd\u5728\u4e00\u4e2a\u6587\u6863\u51fa\u73b0\u7684\u6b21\u6570 / \u6587\u6863\u4e2d\u7684\u6240\u6709\u8bcd</li> <li>IDF: log(\u6240\u6709\u6587\u6863\u7684\u6570\u91cf/\u51fa\u73b0\u4e86\u67d0\u4e2a\u8bcd\u7684\u6587\u6863\u6570\u91cf)</li> </ul>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/#f","title":"\u53ec\u56de\u7387\u3001\u51c6\u786e\u7387\u3001F\u503c","text":"<ul> <li>\u53ec\u56de\u7387 = \u67e5\u8be2\u51fa\u6765\u7684\u6b63\u786e\u6570\u91cf / \u6b63\u786e\u6570\u91cf\u7684\u603b\u96c6</li> <li>\u51c6\u786e\u7387 = \u67e5\u8be2\u51fa\u6765\u7684\u6b63\u786e\u6570\u91cf / \u67e5\u8be2\u51fa\u6765\u7684\u603b\u96c6</li> <li>F\u503c = ( \u53ec\u56de\u7387 * \u51c6\u786e\u7387 * 2 ) / ( \u53ec\u56de\u7387 + \u51c6\u786e\u7387 ) <p>\u53ec\u56de\u7387\u5f88\u9ad8\u7684\u65f6\u5019\uff0c\u5f80\u5f80\u51c6\u786e\u7387\u4f1a\u4f4e\u3002\u6240\u4ee5\uff0c\u4e00\u5473\u7684\u62a2\u5230\u53ec\u56de\u7387\u6216\u8005\u51c6\u786e\u7387\u90fd\u4e0d\u884c\uff0c\u56e0\u6b64\uff0c\u5b9a\u4e00\u4e2a\u4e86F\u503c\uff0c\u662f\u5bf9\u53ec\u56de\u7387\u548c\u51c6\u786e\u7387\u7684\u4e00\u4e2a\u5e73\u8861. </p> </li> </ul>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/#_1","title":"\u4e3e\u4f8b","text":"<p>\u6c34\u5858\u4e2d\u67091000\u6761\u9c7c, 500\u53ea\u867e, 300\u53ea\u87ba. 1. \u6355\u9c7c500\u6761, 300\u867e, 200\u87ba\u53ea\u90a3\u4e48: - \u53ec\u56de\u7387 = 500 / 1000 = 50% - \u51c6\u786e\u7387 = 500 / ( 500 + 300 + 200) = 50% - F\u503c      = 50% * 50% * 2 / (50% + 50%) =  50%</p> <ol> <li>\u6355\u9c7c1000\u6761, 500\u867e, 300\u87ba</li> <li>\u53ec\u56de\u7387 = 1000 / 1000 = 100%</li> <li>\u51c6\u786e\u7387 = 1000 / ( 1000 + 500 + 300) = 56%</li> <li>F\u503c      =  100% * 56% * 2 (100% + 56%) = 72.8% </li> </ol>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/#_2","title":"\u5176\u5b83\u5404\u79cd\u7387","text":"<p>\u7edf\u4e00\u7b97\u6cd5\uff1a\u5404\u79cd\u7387 = |(\u65b0\u503c - \u65e7\u503c) - 1| - \u5229\u6da6\u7387 = \u5229\u6da6 / \u8fdb\u4ef7 = (\u552e\u4ef7 - \u8fdb\u4ef7) / \u8fdb\u4ef7 = (\u552e\u4ef7 / \u8fdb\u4ef7) - 1 - \u53d8\u5316\u7387 = \u53d8\u5316\u91cf / \u53d8\u524d\u91cf * 100% - \u589e\u957f\u7387 = (\u73b0\u5728 - \u539f\u6765) / \u539f\u6765 = (\u73b0\u5728 / \u539f\u6765) - 1 - \u4e0b\u964d\u7387 = (\u539f\u6765 - \u73b0\u5728) / \u539f\u6765  = 1 - (\u539f\u6765 / \u73b0\u5728)</p>"},{"location":"posts/some%20common%20metrics%20in%20Data%20Analysis%20and%20Statistics/#_3","title":"\u6bd4\u4f8b\u6027\u8d28","text":"<ul> <li>a / b = c / d  &lt;--&gt; ad = bc</li> </ul>"},{"location":"posts/this%20is%20not%20the%20time%20to%20work%20yourself%20to%20death/","title":"This is not the time to work yourself to death","text":"<p>+++ title = \"\u8fd9\u4e0d\u662f\u62fc\u547d\u7684\u65f6\u4ee3\" date = 2021-01-05</p> <p>categories = [\"Life\"] tags = [\"Essay\"] +++</p> <p>\u300e\u62fc\u591a\u591a\u300f22\u5c81\u5458\u5de5\u6df1\u591c\u731d\u6b7b\uff0c\u5f15\u53d1\u4e86\u5927\u5bb6\u7684\u6fc0\u70c8\u8ba8\u8bba\u3002\u5c24\u5176\u65e0\u6570\u7f51\u53cb\u5bf9\u65e0\u4f11\u6b62\u52a0\u73ed\u7684\u6fc0\u70c8\u58f0\u8ba8\uff0c\u503c\u5f97\u6df1\u601d\u3002\u5176\u5b9e\u5927\u5bb6\u90fd\u5e0c\u671b\u300a\u52b3\u52a8\u6cd5\u300b\u7684\u4e25\u683c\u5b9e\u65bd\uff0c\u4fdd\u62a4\u6240\u6709\u52b3\u52a8\u8005\u7684\u5408\u6cd5\u6743\u76ca\u3002\u6240\u8c13\u6709\u6cd5\u53ef\u4f9d\uff0c\u6709\u6cd5\u5fc5\u4f9d\uff0c\u6267\u6cd5\u5fc5\u4e25\uff0c\u8fdd\u6cd5\u5fc5\u7a76\u3002\u76ee\u524d\u5927\u90e8\u5206\u7684\u7f51\u53cb\u4e5f\u4ec5\u4ec5\u5e0c\u671b\u4e25\u683c\u6267\u884c\u800c\u5df2\u3002\u4f46\u662f\u771f\u8fd9\u4e48\u96be\u4e48\uff1f\u5176\u5b9e\u672c\u8d28\u4e0a\u5c31\u662f\u8fdd\u6cd5\u7684\u4ee3\u4ef7\u592a\u4f4e\u5bfc\u81f4\u3002</p> <p>\u524d\u5e74\u300e996.ICU\u300f\u5f15\u7206\u5168\u7f51\uff0c\u4f46\u591a\u6570\u7684\u5355\u4f4d\uff0c\u5c24\u5176\u4e92\u8054\u7f51\u5355\u4f4d\u7684\u5458\u5de5\u90fd\u662f\uff0c\u867d\u8ba8\u538c996\uff0c\u4f46\u5374\u8df5\u884c\u7740\u3002\u4e0d\u7981\u8981\u95ee\uff1a\u8fd9\u5c31\u662f\u4eba\u751f\u4e48\uff1f\u300e\u62fc\u591a\u591a\u300f\u8fd9\u4e48\u8bf4\uff1a\"\u4f60\u4eec\u770b\u770b\u5e95\u5c42\u7684\u4eba\u6c11\uff0c\u54ea\u4e00\u4e2a\u4e0d\u662f\u7528\u547d\u6362\u94b1\uff0c\u6211\u4e00\u76f4\u4e0d\u4ee5\u4e3a\u662f\u8d44\u672c\u7684\u95ee\u9898\uff0c\u800c\u662f\u8fd9\u4e2a\u793e\u4f1a\u7684\u95ee\u9898\uff0c\u8fd9\u662f\u4e00\u4e2a\u7528\u547d\u62fc\u7684\u65f6\u4ee3\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5b89\u9038\u7684\u65e5\u5b50\uff0c\u4f46\u4f60\u5c31\u8981\u9009\u62e9\u5b89\u9038\u5e26\u6765\u7684\u540e\u679c\uff0c\u4eba\u662f\u53ef\u4ee5\u63a7\u5236\u81ea\u5df1\u7684\u52aa\u529b\u7684\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\"\u3002\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u7529\u9505\u65b9\u5f0f\uff0c\u5982\u679c\u300e\u62fc\u591a\u591a\u300f\u7ed9\u5458\u5de5\u6709\u9009\u62e9\u6743\u5462\uff1f</p> <p>\u8bda\u7136\uff0c\u4e2d\u56fd\u7684\u5feb\u901f\u53d1\u5c55\u6709\u5f88\u5927\u4e00\u90e8\u5206\u662f\u52a0\u73ed\u52a0\u51fa\u6765\u7684\u3002\u4f46\u5728\u4e0d\u540c\u7684\u53d1\u5c55\u9636\u6bb5\uff0c\u4eba\u7684\u9700\u6c42\u4e5f\u4e0d\u540c\u3002\u4ee5\u524d\u7529\u7a77\u5e3d\u8c0b\u8d76\u8d85\uff0c\u5927\u5bb6\u4e3b\u52a8\u653e\u5f03\u4f11\u606f\uff0c\u90a3\u662f\u52e4\u52b3\u5949\u732e\u3002\u4f46\u5728\u65b0\u7684\u53d1\u5c55\u9636\u6bb5\uff0c\u7eaf\u9760\u52b3\u52a8\u529b\u7b49\u8981\u7d20\u73a9\u547d\u6295\u5165\u5df2\u4e0d\u53ef\u6301\u7eed\u3002\u5927\u5bb6\u613f\u610f\u4e3a\u66f4\u7f8e\u597d\u7684\u751f\u6d3b\u800c\u594b\u6597\uff0c\u4f46\u594b\u6597\u4e0d\u610f\u5473\u7740\u727a\u7272\u52b3\u52a8\u6743\u76ca\uff0c\u66f4\u4e0d\u610f\u5473\u7740\u727a\u7272\u4e2a\u4eba\u5065\u5eb7\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u5f53\u751f\u5b58\u5df2\u7136\u4e0d\u662f\u95ee\u9898\u7684\u65f6\u5019\uff0c\u5927\u5bb6\u66f4\u9700\u8981\u7684\u662f\u751f\u6d3b\u3002\u4f46\u662f\uff0c\u300e\u62fc\u591a\u591a\u300f\u6709\u7ed9\u8fc7\u4e48\uff1f</p> <p>\u90a3\u4e9b\u65f6\u523b\u8ba9\u5458\u5de5\u201c996\u201d\u7684\u300e\u62fc\u591a\u591a\u300f\u4eec\uff0c\u8868\u9762\u770b\u662f\u63d0\u5021\u201c\u594b\u6597\u201d\uff0c\u5b9e\u8d28\u662f\u5bf9\u52b3\u52a8\u8005\u6743\u76ca\u7684\u6f20\u89c6\uff0c\u628a\u52b3\u52a8\u8005\u5f02\u5316\u6210\u65e0\u4f11\u65e0\u6b62\u7684\u673a\u5668\u3002\u66f4\u522b\u8bf4\u56e0\u957f\u671f\u8d85\u989d\u52b3\u52a8\u5bfc\u81f4\u7684\u8eab\u4f53\u4e9a\u5065\u5eb7\u3001\u6162\u6027\u75c5\u548c\u5fc3\u7406\u95ee\u9898\u4e86\u3002</p> <p>\u8bb0\u4f4f\uff0c\u8d44\u672c\u9010\u5229\u662f\u5929\u6027\uff0c\u4f46\u7edd\u4e0d\u80fd\u628a\u9010\u5229\u89c6\u4f5c\u5929\u7136\u6b63\u4e49\u3002</p>"},{"location":"posts/thoughts%20on%20building%20a%20production/","title":"Thoughts on building a production","text":"<p>+++ title = \"\u5bf9\u4ea7\u54c1\u7684\u601d\u8003\" date = 2012-09-02</p> <p>categories = [\"Tech\"] tags = [\"Production\"] +++</p> <p>\u4ea7\u54c1\u662f\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u4e1c\u897f\u3002\u53ef\u4ee5\u5f88\u5927\uff0c\u53ef\u4ee5\u5f88\u5c0f\u3002\u4f46\u662f\u65e0\u4e00\u4f8b\u5916\uff0c\u6240\u6709\u7684\u5927\u4ea7\u54c1\u90fd\u662f\u4ece\u5c0f\u4ea7\u54c1\u4e00\u6b65\u4e00\u6b65\u505a\u8d77\u6765\u7684\u3002</p>"},{"location":"posts/thoughts%20on%20building%20a%20production/#_1","title":"\u53d7\u4f17","text":"<p>\u987e\u540d\u601d\u4e49\uff0c\u662f\u6307\u4f7f\u7528\u4ea7\u54c1\u7684\u4eba\u7fa4\u3002\u8fd9\u4e2a\u662f\u6700\u91cd\u8981\u7684\uff0c\u5982\u679c\u53d7\u4f17\u5b9a\u4f4d\u4e0d\u660e\u786e\uff0c\u5c31\u4f1a\u4f7f\u5f97\u4ea7\u54c1\u6ca1\u6709\u9488\u5bf9\u6027\u3002</p>"},{"location":"posts/thoughts%20on%20building%20a%20production/#_2","title":"\u9700\u6c42","text":"<p>\u53d6\u51b3\u4e8e\u53d7\u4f17\u7684\u9700\u8981\uff0c\u4e00\u5b9a\u662f\u5178\u578b\u7684\u9700\u8981\uff0c\u4efb\u4f55\u5b9a\u5236\u5316\u7684\u9700\u8981\u90fd\u662f\u5f97\u518d\u4e09\u8003\u8651\u8861\u91cf\u7684\u3002</p>"},{"location":"posts/thoughts%20on%20building%20a%20production/#_3","title":"\u5e02\u573a","text":"<p>\u5176\u5b9e\u6211\u8ba4\u4e3a\uff0c\u5e02\u573a\u8fd9\u4e2a\u4e1c\u897f\u5f88\u5927\u7684\u7a0b\u5ea6\u4e0a\uff0c\u53d6\u51b3\u4e8e\u4f60\u7684\u53d7\u4f17\u3002\u53d7\u4f17\u9762\u5e7f\uff0c\u5e02\u573a\u5c31\u5927\uff0c\u53d7\u4f17\u9762\u7a84\uff0c\u5e02\u573a\u5c31\u5c0f\u3002\u4f46\u662f\uff0c\u5207\u8bb0\uff1a\u53d7\u4f17\u9762\u4e0d\u662f\u8d8a\u5e7f\u5c31\u8d8a\u597d\u3002</p> <p>\u5148\u8003\u8651\u5c0f\u4f17\u7684\u4ea7\u54c1\uff0c\u8fd9\u91cc\u7684\u5c0f\u4f17\u4e0d\u662f\u63071\u30012\u4e2a\u4eba\uff0c\u800c\u662f\u76f8\u5bf9\u800c\u8a00\u7684\u5c0f\u8303\u56f4\u7684\u4eba\u7fa4\u3002\u8fd9\u6837\uff0c\u9700\u6c42\u6bd4\u8f83\u660e\u786e\uff0c\u5e02\u573a\u5b9a\u4f4d\u6bd4\u8f83\u6e05\u6670\uff0c\u6218\u7565\u76ee\u6807\u5bb9\u6613\u5236\u5b9a\u3002\u800c\u540e\u8003\u8651\u600e\u4e48\u628a\u5c0f\u4f17\u7684\u4ea7\u54c1\u505a\u6210\u5927\u4f17\u5316\u7684\u3002\u5343\u4e07\u4e0d\u8981\u4e00\u4e0a\u6765\u5c31\u505a\u6210\u5927\u4f17\u5316\u7684\uff0c\u5426\u5219\u5bb9\u6613\u627e\u4e0d\u5230\u65b9\u5411\uff0c\u6478\u4e0d\u7740\u5317\u3002</p>"},{"location":"posts/thoughts%20on%20building%20a%20production/#_4","title":"\u76c8\u5229\u70b9","text":"<p>\u4e0d\u505a\u5f00\u6e90\uff0c\u4e0d\u662f\u81ea\u5df1\u7684\u5b8c\u5168\u7684\u5174\u8da3\uff0c\u5b9a\u4f1a\u843d\u5165\u4fd7\u5957\uff1a\u6323\u94b1\u3002\u662f\u7684\uff0c\u4ea7\u54c1\u90fd\u662f\u9700\u8981\u80fd\u6323\u94b1\u7684\uff0c\u6216\u8005\u81f3\u5c11\u662f\u80fd\u4e3a\u6323\u94b1\u6765\u670d\u52a1\u7684\u3002\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u76c8\u5229\u70b9\u3002</p> <ul> <li> <p>\u524d\u5411: \u5373\u5411\u5ba2\u6237\u6536\u94b1\uff0c\u4f8b\u5982\u67d0\u4e9b\u4fe1\u606f\u53d1\u5e03\u5e73\u53f0\uff0c\u9700\u8981\u6536\u53d6\u7528\u6237\u7684\u94b1\uff0c\u7528\u6237\u53d1\u5e03\u4e00\u6761\u4fe1\u606f\u6536\u53d6\u591a\u5c11\u94b1</p> </li> <li> <p>\u540e\u5411: \u5373\u5411\u5546\u5bb6\u6536\u94b1\uff0c\u4f8b\u5982\u62db\u8058\u7f51\u7ad9\uff0c\u4f01\u4e1a\u53d1\u5e03\u62db\u8058\u4fe1\u606f\uff0c\u90a3\u4e48\u9700\u8981\u652f\u4ed8\u7ed9\u62db\u8058\u7f51\u7ad9\u4e00\u5b9a\u7684\u8d39\u7528</p> </li> </ul>"},{"location":"posts/thoughts%20on%20vertical%20website%20crawler/","title":"Thoughts on vertical website crawler","text":"<p>+++ title = \"\u5173\u4e8e\u5782\u76f4\u7f51\u7ad9\u722c\u866b\u7684\u601d\u8003\" date = \"2009-09-01\"</p> <p>categories = [\"Tech\"] tags = [\"Crawler\"] +++</p>"},{"location":"posts/thoughts%20on%20vertical%20website%20crawler/#_1","title":"\u57fa\u672c\u6307\u6807\u548c\u96be\u70b9","text":"<ol> <li>\u5b9e\u65f6\u6027</li> <li>\u65b0\u7684\u5185\u5bb9\uff0c\u9700\u8981\u5f88\u5feb\u7684\u6293\u5230</li> <li>\u5168\u9762\u6027</li> <li>\u8001\u7684\u5185\u5bb9\u548c\u65b0\u7684\u5185\u5bb9\u90fd\u9700\u8981\u80fd\u6293\u5230\uff0c\u4e0d\u80fd\u53ea\u4fa7\u91cd\u67d0\u4e00\u65b9\u9762</li> <li>\u65b0\u7684\u5185\u5bb9\u5728\u4e00\u5b9a\u65f6\u95f4\u540e\u5c31\u662f\u8001\u7684\u5185\u5bb9\u4e86</li> <li>\u57fa\u4e8e1\uff0c\u53ef\u80fd\u65b0\u5185\u5bb9\u8981\u6293\u53d6\u7684\u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u4f46\u4e0d\u80fd\u53ea\u6293\u65b0\u7684\uff0c\u4e0d\u8981\u65e7\u7684</li> <li>\u53bb\u9664\u91cd\u590d</li> <li>\u4e0d\u540c\u7684\u7f51\u7ad9\u53ef\u80fd\u6709\u76f8\u540c\u7684\u5185\u5bb9\uff0c\u6293\u5b8c\u540e\u53ef\u80fd\u9700\u8981\u53bb\u6389\u91cd\u590d\u7684\u5185\u5bb9</li> <li>\u6709\u5199\u7f51\u7ad9\u7684url\u540e\u9762\u5e26\u6709\u968f\u673a\u6570\uff0c\u6216\u8005\u65e0\u6548\u7684\u53c2\u6570\uff0c\u4f46\u662f\u5185\u5bb9\u5374\u662f\u56fa\u5b9a\u7684\uff0c\u9700\u8981\u60f3\u529e\u6cd5\u53bb\u6389\uff0c\u53ea\u6293\u4e00\u6b21</li> <li>\u53bb\u9664\u5faa\u73af\u6293\u53d6</li> <li>\u5404\u4e2a\u7f51\u7ad9\u4e4b\u95f4\u53ef\u80fd\u76f8\u4e92link\uff0c\u9700\u8981\u804c\u80fd\u7684\u5206\u6790\u51fa\u5df2\u7ecf\u6293\u53d6\u8fc7\u7684</li> <li>\u53ef\u6301\u7eed\u6293\u53d6\u6027</li> <li>\u4e00\u4e2a\u5165\u53e3\u53ef\u4ee5\u4e00\u76f4\u5728\u6293\u53d6\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\uff0c7*24\u5c0f\u65f6\u670d\u52a1</li> <li>\u4eba\u5de5\u5e72\u9884</li> <li>\u6293\u53d6\u901f\u5ea6</li> <li>\u6293\u53d6\u8fdb\u7a0b\u4e2a\u6570</li> <li>\u53ef\u80fd\u88ab\u5c01</li> <li>\u5229\u75286 \u964d\u4f4e\u6293\u53d6\u9891\u7387</li> <li>\u591aIP\u5bf9\u5916\u6293\u53d6</li> <li>\u901a\u8fc7Proxy</li> </ol>"},{"location":"posts/thoughts%20on%20vertical%20website%20crawler/#_2","title":"\u5b50\u7cfb\u7edf\u7b80\u5355\u5206\u6790","text":"<ol> <li>crawler\uff0c\u4e13\u95e8\u8d1f\u8d23\u6293\u53d6\u7684\u670d\u52a1\uff0c\u8f93\u5165\u662f\u4e00\u4e2aurl\uff0c\u8f93\u5165\u662f\u4e00\u4e2aurl\u5bf9\u5e94\u7684\u9875\u9762</li> <li>scheduler\uff0c\u4e13\u95e8\u8d1f\u8d23crawler\u7684\u8c03\u5ea6\uff0c\u80fd\u591f\u63a7\u5236crawler\u7684\u5404\u65b9\u9762\u53c2\u6570\uff0c\u53ef\u80fd\u9700\u8981\u591a\u8fdb\u7a0b\u5171\u4eab</li> <li>linkdb, \u7528\u6765\u5b58\u53d6link\u7684\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u6709\u589e\u5220\u6539\u67e5\uff0c\u6ce8\u610f\u5927\u6570\u636e\uff0c\u8981\u63d0\u4f9b\u5bf9\u4e8elink\u6293\u53d6\u4f18\u5148\u7ea7\u7684\u63a5\u53e3\uff0c\u6c38\u8fdc\u63d0\u4f9b\u4f18\u5148\u7ea7\u7684topN\u4e2alink</li> <li>repository, \u7528\u6765\u5b58\u53d6content\u7684\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u6709\u589e\u5220\u6539\u67e5\uff0c\u6ce8\u610f\u5927\u6570\u636e</li> <li>analyzer, \u5206\u6790repository\u7684\u5185\u5bb9\uff0c\u8fdb\u884c\u53bb\u91cd\u590d\uff0c\u4e3a\u7d22\u5f15\u670d\u52a1</li> </ol>"},{"location":"posts/thoughts%20on%20vertical%20website%20crawler/#_3","title":"\u6293\u53d6\u6a21\u578b","text":"<ol> <li>\u591a\u7ebf\u7a0b</li> <li>\u5b9e\u73b0\u7b80\u5355\uff0cpython\u7684\u591a\u7ebf\u7a0b\u65e0\u6cd5\u91cd\u590d\u5229\u7528\u591a\u6838</li> <li>\u591a\u8fdb\u7a0b</li> <li>\u5b9e\u73b0\u7b80\u5355\uff0cpython\u7684\u591a\u8fdb\u7a0b\u80fd\u5229\u7528\u591a\u6838</li> <li>\u5f02\u6b65</li> <li>\u5b9e\u73b0\u590d\u6742\uff0c\u91cd\u590d\u5229\u7528\u591a\u6838</li> <li>\u6027\u80fd\u9ad8</li> </ol>"},{"location":"posts/translation%3A%20rethinking%20kanban/","title":"Translation: rethinking kanban","text":"<p>+++ title = \"\u91cd\u65b0\u8bbe\u8ba1\u6211\u7684\u770b\u677f\" date = 2014-08-11</p> <p>categories = [\"Tech\"] tags = [\"Kanban\", \"Translation\"] +++</p> <p>\u53d1\u73b0\u4e00\u7bc7\u6587\u7ae0\uff0c\u89c9\u5f97\u6709\u610f\u601d\uff0c\u5c31\u7ffb\u8bd1\u4e86\u4e00\u4e0b\u3002</p> <p>\u5982\u679c\u4f60\u66fe\u4eca\u4f7f\u7528\u8fc7 Trello\uff0cJira\uff0c\u6216\u8005 \u5176\u4ed6\u770b\u677f\u5de5\u5177\uff0c\u4f60\u53ef\u80fd\u4e60\u60ef\u4e8e\u50cf\u8fd9\u6837\u770b\u770b\u677f\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1a\u4fbf\u7b7e\u7684\u540d\u5b57\u88ab\u4fee\u6539\uff0c\u4ee5\u4fdd\u62a4\u5185\u5bb9</p> <p>\u8fd9\u91cc\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5178\u578b\u76843\u5217\u5e03\u5c40\uff1bTo Do\uff0cDoing\uff0c\u548c Done\u3002\u6211\u4eec\u6709\u4e0b\u97623\u4e2a\u53ef\u7528\u7684\u7ef4\u5ea6\uff1a</p> <ul> <li>\u5782\u76f4\uff1a\u4f18\u5148\u7ea7</li> <li>\u6c34\u5e73\uff1a\u72b6\u6001</li> <li>\u989c\u8272\uff1a\u5de5\u4f5c\u4e1a\u52a1\u8f68\u8ff9</li> </ul> <p>\u6839\u636e\u9879\u76ee\uff0c\u989c\u8272\u7684\u4f7f\u7528\u4e5f\u6709\u6240\u4e0d\u540c\u3002\u6709\u5f88\u591a\u7cfb\u7edf\u90fd\u662f\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\uff0c\u800c\u6211\u4e5f\u5df2\u7ecf\u4e60\u60ef\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u4e86\u3002\u5373\u4f7f\u5b83\u6709\u4e00\u4e9b\u95ee\u9898\uff0c\u50cf\uff1a</p> <ul> <li>\u53ea\u6709\u51e0\u79cd\u989c\u8272\u53ef\u4ee5\u7528\uff0c\u6240\u4ee5\u5728\u590d\u6742\u7684\u7cfb\u7edf\u91cc\u9762\u53ef\u80fd\u4e0d\u591f</li> <li>\u5217\u8868\u91cc\u9762\u53ea\u6709\u4e00\u4e2a 'top'\uff0c\u6240\u4ee5\u5982\u679c\u6709\u5f88\u591a\u4eba\u7684\u5de5\u4f5c\u6e05\u5355\u5927\u90e8\u5206\u4e0d\u4e00\u81f4</li> <li>\u5982\u679c\u5c0f\u7ec4\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\uff0c\u4eba\u4eec\u53ef\u80fd\u9700\u8981\u8df3\u8fc7\u6e05\u5355\u7684\u7684\u5e95\u90e8\u6765\u5bfb\u627e\u4ed6\u4eec\u5de5\u4f5c\u4e0a\u7684\u4fbf\u7b7e</li> </ul> <p>\u5f53\u7136\uff0c\u8fd9\u4e9b\u60c5\u51b5\u662f\u5c11\u89c1\u7684\uff0c\u4e14\u53ef\u4ee5\u88ab\u7ba1\u7406\u7684\u3002\u6240\u4ee5\u6211\u4ecd\u7136\u5f88\u9ad8\u5174\u7528\u8fd9\u79cd\u6a21\u578b\u6765\u5de5\u4f5c\u3002Jira\u540c\u6837\u8ba9\u8fd9\u7b80\u5355\uff0c\u56e0\u4e3a\u6211\u53ef\u4ee5\u521b\u5efa\u8fc7\u6ee4\u5668\uff0c\u4ec5\u4ec5\u5173\u6ce8\u770b\u677f\u4e2d\u6211\u5de5\u4f5c\u9700\u8981\u7684\u90e8\u5206\u3002 \u4f46\u662f\uff0c\u5f53\u6211\u6700\u8fd1\u52a0\u5165\u4e86\u4e00\u4e2a\u5728Trello\u770b\u677f\u7684\u4efb\u52a1\uff0c\u6211\u770b\u5230\uff1a </p> <p>\u597d\u5427\uff0c\u4eba\u4eec\u3002 \u6211\u600e\u4e48\u77e5\u9053\u8fd9\u4e2a\u4fbf\u7b7e\u4e4b\u524d\u7684\u72b6\u6001\uff1f\u6211\u600e\u4e48\u5206\u79bb\u6211\u81ea\u5df1\u7684\u5df2\u7ecf\u5de5\u4f5c\u5b8c\u6210\u7684\u8bb0\u5f55\uff1f \u8fd9\u91cc\u7684\u6c34\u5e73\u7ef4\u5ea6\u7531\u72b6\u6001\u88ab\u66ff\u6362\u6210\u5de5\u4f5c\u7684\u8f68\u8ff9\u3002\u6211\u7684\u540c\u4e8b\u8bf4\u8fd9\u6837\u628a\u4ed6\u89e3\u653e\u51fa\u6765\u4e86\uff0c\u56e0\u4e3a\u4ed6\u662f\u8fd9\u6837\u601d\u8003\u9879\u76ee\u7684\u3002\u6211\u8ba4\u4e3a\u5f97\u56de\u5230\u6211\u66fe\u7ecf\u4f7f\u7528\u8fc7\u7684\u65b9\u5f0f\u3002\u4f46\u662f\u8fd9\u4e2a\u9879\u76ee\u5df2\u7ecf\u6709\u4e86\u6bd4Trello\u66f4\u591a\u7684\u53ef\u7528\u7684\u5de5\u4f5c\u8f68\u8ff9\u7684\u989c\u8272\u3002</p> <p>\u7136\u540e\u6211\u604d\u7136\u5927\u609f\uff1a\u6211\u771f\u6b63\u5173\u6ce8\u7684\u72b6\u6001\u4ec5\u4ec5\u662f\u5173\u4e8e\"Doing\"\u3002\u8fd9\u5f88\u5bb9\u6613\u7528\u989c\u8272\u4f53\u73b0\u51fa\u6765\u3002\u800c\u4e14\u6240\u6709\u8fd9\u4e9b\u5176\u5b83\u53ef\u7528\u989c\u8272\u6211\u786e\u5b9a\u4f7f\u7528\u4e24\u79cd\u6765\u4f53\u73b0\u6211\u7684\u6545\u4e8b\u70b9\u6570\uff1a0\u8868\u793a\u5fae\u4e0d\u8db3\u9053\uff0c2\u8868\u793a\u7b80\u5355\uff0c4\u8868\u793a\u56f0\u96be\u3002</p> <p>\u73b0\u5728\uff0c\u770b\u677f\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a  \u73b0\u5728\u6211\u7684\u7ef4\u5ea6\u662f\u8fd9\u6837\uff1a</p> <ul> <li>\u5782\u76f4\uff1a\u4f18\u5148\u7ea7</li> <li>\u6c34\u5e73\uff1a\u5de5\u4f5c\u4e1a\u52a1\u8f68\u8ff9</li> <li>\u989c\u8272\uff1a\u72b6\u6001\u548c\u56f0\u96be\u7a0b\u5ea6</li> </ul> <p>\u6ce8\u610f\u6211\u4eec\u6dfb\u52a0\u4e86\u4e00\u70b9\u989d\u5916\u7684\u4fe1\u606f\uff0c\u73b0\u5728\u6765\u4ecb\u7ecd\u8fd96\u4e2d\u5de5\u4f5c\u8f68\u8ff9\u7684\u9009\u9879 \u6211\u4eec\u4e5f\u5728\u5de6\u8fb9\u6dfb\u52a0\u4e86\u4e00\u4e2a\"Ideas\"\u7684\u5217\u7528\u6765\u8868\u793a\u66f4\u9ad8\u7ea7\u522b\u7684ideas\uff0c\u4e5f\u4ecd\u7136\u9700\u8981\u62c6\u5206\u5230\u4e0d\u540c\u7684\u5de5\u4f5c\u8f68\u8ff9\u4e2d\u3002\u4e00\u4e2a\"Done\"\u7684\u5217\u62ff\u5230\u6700\u540e\u8fb9\uff0c\u8868\u793a\u5df2\u7ecf\u5b8c\u6210\u7684\u4fbf\u7b7e\u3002</p> <p>\u6211\u4eec\u4ecd\u7136\u5728\u8fd9\u70b9\u4e0a\u8fdb\u884c\u8fed\u4ee3\uff0c\u5c31\u50cf\u4f60\u8fd9\u4e48\u505a\u7684\u3002\u4f46\u662f\uff0c\u6211\u5f88\u9ad8\u5174\u5b83\u7684\u4ea7\u751f\u3002\u800c\u4e14\u771f\u7684\u5f88\u9ad8\u5174\uff0c\u6211\u4e0d\u662f\u5f3a\u8feb\u81ea\u5df1\u5728\u73b0\u6709\u7684\u770b\u677f\u4e0a\u5148\u5165\u4e3a\u4e3b\u3002</p>"},{"location":"posts/%E6%97%A0%E5%85%B1%E4%BA%AB%E6%9E%B6%E6%9E%84/","title":"\u65e0\u5171\u4eab\u67b6\u6784","text":"<p>+++ title = \"Share Nothing Architecture\" date = 2010-07-26</p> <p>categories = [\"Tech\"] tags = [\"Architecture\"] +++</p>"},{"location":"posts/%E6%97%A0%E5%85%B1%E4%BA%AB%E6%9E%B6%E6%9E%84/#about-title","title":"about title","text":"<p>\u6807\u9898\u662f\u7f51\u4e0a\u65e9\u5c31\u6709\u4e86\u7684\u3002\u800c\u6211\u662f\u5728\u5904\u7406\u5b9e\u9645\u7684\u95ee\u9898\u65f6\u5019\uff0c\u60f3\u5230\u4e86\u4e00\u4e9b\u89e3\u51b3\u65b9\u6848\uff0c\u7136\u540e\u518d\u901a\u8fc7\u89e3\u51b3\u65b9\u6848\u53bb\u627e\u5c31\u53d1\u73b0\u4e86\u5b83\u3002\u5c31\u76f4\u63a5\u62ff\u6765\u7528\u4e86\u3002</p>"},{"location":"posts/%E6%97%A0%E5%85%B1%E4%BA%AB%E6%9E%B6%E6%9E%84/#question","title":"question","text":"<p>\u95ee\u9898\u662f\u8fd9\u6837\u7684\uff1a</p> <ol> <li> <p>\u4ee5\u524d\u505a\u4f01\u4e1a\u7ea7\u5e94\u7528\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u7528\u5f97\u591a\u7684\u662fJava\uff0cWebServer\u662fTomcat\uff0cTomcat\u662f\u91c7\u7528multi thread \u65b9\u5f0f\u7684\u3002\u800c\u4f01\u4e1a\u5e94\u7528\u4e00\u822c\u7528\u6237\u91cf\u4e0d\u5927\uff0c\u4e3b\u8981\u662f\u8981\u7a33\u5b9a\u3002\u6240\u4ee5\uff0c\u6bcf\u6b21\u53ea\u542f\u52a8\u4e00\u4e2atomcat\u5b9e\u4f8b\u3002\u53e6\u5916\u4e00\u4e2atomcat\u7eaf\u7cb9\u662f\u7528\u6765\u505a\u5907\u4efd\u7684\u3002\u4e0d\u63d0\u4f9b\u751f\u4ea7\u3002\u6240\u4ee5\uff0c\u5bf9\u4e8e\u7528\u6237\u767b\u9646\u4fe1\u606f\uff0c\u5c31\u5b58\u653e\u5230session\u4e2d\u7684\u3002\u7531\u4e8e\u6bcf\u6b21\u90fd\u53ea\u6709\u4e00\u4e2atomcat\u670d\u52a1\uff0c\u6240\u4ee5\uff0c\u8fd9\u6837\u662f\u5408\u7406\u7684\uff0c\u6ca1\u6709\u95ee\u9898</p> </li> <li> <p>\u8f6c\u5165\u5230\u4e92\u8054\u7f51\u5e94\u7528\u65f6\u5019\uff0c\u5fc5\u987b\u8981\u8003\u8651\u7684\u662f\u8bbf\u95ee\u91cf\u5927\u7684\u60c5\u51b5\u3002\u800c\u8fd9\u65f6\uff0c\u5f80\u5f80\u4e00\u4e2awebserver\u662f\u625b\u4e0d\u4f4f\u7684\u3002\u6240\u4ee5\uff0c\u4e60\u60ef\u7684\u542f\u52a8\u591a\u8fdb\u7a0b\u3002\u524d\u9762\u7528\u4e00\u4e2anginx\u4ee3\u7406\u3002\u8fd9\u65f6\u5019\uff0c\u95ee\u9898\u5c31\u6765\u4e86\u3002nginx\u7684\u4ee3\u7406\u662f\u968f\u673a\u7684\u6253\u5230\u540e\u9762\u7684\u5b9e\u4f8b\uff0c\u800c\u5404\u4e2a\u5b9e\u4f8b\u4e2d\u7684session\u662f\u65e0\u6cd5\u76f8\u4e92\u8bbf\u95ee\u7684\u3002\u90a3\u4e48\u539f\u6765\u7684\u4e00\u4e9b\u4fe1\u606f\u653e\u5230session\u91cc\u9762\u5c31\u4e0d\u5408\u7406\u4e86\u3002</p> </li> </ol> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u5c31\u9700\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898</p>"},{"location":"posts/%E6%97%A0%E5%85%B1%E4%BA%AB%E6%9E%B6%E6%9E%84/#solutions","title":"solutions","text":"<ol> <li>\u6240\u6709\u7684session\u5b58\u653e\u5230db\u4e2d\uff0c\u903b\u8f91\u4e0a\u89e3\u51b3\u4e86session\u7684\u5171\u4eab\u95ee\u9898\u3002\u4f46\u662f\uff0cdb\u7684\u538b\u529b\u4f1a\u7a81\u7136\u95f4\u589e\u5927\uff0c\u4e0d\u9002\u5408\u91c7\u7528\uff0c\u5c5e\u4e8e\u4e0b\u7b56</li> <li>\u540e\u9762\u6709\u4e00\u4e2a\u5171\u4eab\u7684cache\u6216\u8005cache\u96c6\u7fa4\uff0c\u7528\u6765\u5b58\u653e\u7528\u6237\u7684session\u4fe1\u606f\uff0c\u8fd9\u4e2a\u89e3\u51b3\u4e86db\u7684\u538b\u529b\uff0c\u80fd\u591f\u7528\u4e8e\u5b9e\u9645\uff0c\u989d\u5916\u5f15\u5165\u4e86\u7b2c3\u65b9\u7684\u4e1c\u897f\uff0c\u5c5e\u4e8e\u4e2d\u7b56</li> <li>\u5229\u7528cookie\uff0c\u628asession\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\uff0c\u4e14\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u3002\u8fd9\u4e2a\u89e3\u51b3\u4e86db\u7684\u538b\u529b\uff0c\u4e0d\u9700\u8981\u5f15\u5165\u7b2c3\u65b9lib\uff0c\u7f16\u7801\u7684\u5de5\u4f5c\u5f88\u5c0f\u3002\u6240\u4ee5\uff0c\u5c5e\u4e8e\u4e0a\u7b56</li> </ol>"}]}